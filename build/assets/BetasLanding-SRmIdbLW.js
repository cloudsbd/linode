import{u as S,j as s,a0 as o,T as m,f as w,a1 as T,aa as C,$ as B,C as I,E as O,J as l}from"./index-Eksrs3uK.js";import{L as H}from"./LandingHeader-JXAVBhqg.js";import{P}from"./ProductInformationBanner-NRgFHJLr.js";import{D as y}from"./DateTimeDisplay-bXC9mIcz.js";import{u as _,a as k}from"./betas-xsGya32U.js";const A=e=>{const n=S();let r,t;"more_info"in e.beta&&(r=e.beta.more_info),"enrolled"in e.beta&&(t=e.beta.enrolled);const{beta:{description:i,ended:a,id:c,label:j,started:p}}=e,g=t?null:s.jsxs(m,{children:[s.jsx("strong",{children:"Start Date: "}),s.jsx(y,{displayTime:!1,value:p})]}),h=a?s.jsxs(m,{children:[s.jsx("strong",{children:"End Date: "}),s.jsx(y,{displayTime:!1,value:a})]}):null;return s.jsxs(o,{direction:"row",justifyContent:"space-between",minHeight:66,spacing:2,width:"100%",children:[s.jsxs(o,{minHeight:66,spacing:2,width:"100%",children:[s.jsxs(o,{direction:"row",justifyContent:"space-between",children:[s.jsx(m,{children:s.jsx("strong",{children:j})}),s.jsxs(o,{direction:"row",spacing:"30px",children:[g,h]})]}),s.jsx(m,{children:i})]}),s.jsxs(o,{direction:"column",minHeight:66,minWidth:"111px",spacing:2,children:[t?null:s.jsx(w,{onClick:()=>{n.push("/betas/signup",{betaId:c})},buttonType:"primary",children:"Sign Up"}),r?s.jsx(T,{external:!0,to:r,children:"More Info"}):null]})]})},V=e=>e.errors?s.jsx(O,{errorText:e.errors[0].reason}):null,f=e=>{const{betas:n,errors:r,isLoading:t,title:i}=e;return s.jsxs(C,{children:[s.jsx(m,{variant:"h2",children:i}),s.jsx(B,{spacingBottom:20,spacingTop:20}),s.jsx(V,{errors:r}),t&&s.jsx(I,{}),s.jsx(o,{divider:s.jsx(B,{spacingBottom:20,spacingTop:20}),children:n.map((a,c)=>s.jsx(A,{beta:a},`${c}-${a.id}`))})]})},v=e=>l.fromISO(e.started)<=l.now(),$=e=>l.fromISO(e.ended??"").isValid,x=e=>$(e)&&l.fromISO(e.ended??"")<l.now();function D(e){return"enrolled"in e?l.fromISO(e.enrolled??"").isValid&&!x(e):!1}function M(e){return"enrolled"in e?l.fromISO((e==null?void 0:e.enrolled)??"").isValid&&x(e):!1}function Q(e){return M(e)&&x(e)?"historical":D(e)&&v(e)&&!x(e)?"active":!D(e)&&v(e)&&!x(e)?"available":"no_status"}const U=e=>{const n={active:[],available:[],historical:[],no_status:[]};return e.reduce((r,t)=>{const i=Q(t);return r[i].push(t),r},n)},G=()=>{const{data:e,error:n,isLoading:r}=_(),{data:t,error:i,isLoading:a}=k(),c=(e==null?void 0:e.data)??[],j=(t==null?void 0:t.data)??[],g=[...c,...j].reduce((u,d)=>(u[d.id]?u[d.id]=Object.assign(d,u[d.id]):u[d.id]=d,u),{}),{active:h,available:L,historical:E}=U(Object.values(g));return s.jsxs(s.Fragment,{children:[s.jsx(P,{bannerLocation:"Betas"}),s.jsx(H,{title:"Betas"}),s.jsxs(o,{spacing:2,children:[s.jsx(f,{betas:h,errors:n,isLoading:r,title:"Currently Enrolled Betas"}),s.jsx(f,{betas:L,errors:i,isLoading:a,title:"Available & Upcoming Betas"}),s.jsx(f,{betas:E,errors:n,isLoading:r,title:"Beta Participation History"})]})]})};export{G as default};
