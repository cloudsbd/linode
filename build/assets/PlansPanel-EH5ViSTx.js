import{m as v,j as a,ew as O,s as N,c1 as q,cp as z,c as H,r as F,W as R,d0 as U,c3 as G,ex as D,ey as A,e as B,G as E,ad as M,aW as V}from"./index-Eksrs3uK.js";import{T as K}from"./TabbedPanel-IicwaI6L.js";import{S as X,g as Q,p as J,P as Y,a as Z,d as ee}from"./PlanInformation-CouBULD4.js";import{b as ae,a as b,T as se,c as te}from"./TableRow-phXfWUGW.js";import{T as le}from"./TableRowEmpty-aXmC67-Z.js";import{U as L,a as $,b as _}from"./constants-KokzTiEs.js";import{C as ne}from"./Currency-No8tnN7b.js";import{R as re}from"./Radio-HudVgwMW.js";import{S as oe}from"./SelectionCard-IyO-o1CU.js";import{r as W}from"./dynamicPricing-n5eCZqTg.js";import{g as ie}from"./linodes-orSDvVk7.js";import{T as de}from"./TableHead-Si_pzkLK.js";const ce=v()(s=>({icon:{fontSize:"1.8em",height:24,marginLeft:6,marginRight:s.spacing(),position:"absolute",[s.breakpoints.only("xs")]:{fontSize:"1.52em"}},root:{alignItems:"center",display:"flex",flexFlow:"row nowrap",height:"100%",paddingLeft:"45px !important"}})),De=s=>{const{classes:l}=ce();return a.jsxs(a.Fragment,{children:[a.jsx(O.SingleValue,{"data-qa-react-select-single-value":!0,...s,className:l.root,children:s.children}),a.jsx("span",{className:`${s.data.className} ${l.icon}`,children:s.data.flag})]})},me=N(ae,{label:"StyledTable",shouldForwardProp:q(["isDisabled"])})(({isDisabled:s,theme:l})=>({"& tr ":{opacity:s?.4:1},borderLeft:`1px solid ${l.borderColors.borderTable}`,borderRight:`1px solid ${l.borderColors.borderTable}`,cursor:s?"not-allowed":"inherit",opacity:s?.5:1,overflowX:"hidden"})),ue=N(b,{label:"StyledTableCell",shouldForwardProp:q(["isPlanCell"])})(({theme:s,...l})=>({"&.emptyCell":{borderRight:"none"},"&.planHeaderCell":{...l.isPlanCell&&{paddingLeft:4}},"&:last-child":{paddingRight:15},"&:not(.emptyCell)":{borderLeft:"none !important"},borderBottom:`1px solid ${s.borderColors.borderTable} !important`,borderTop:`1px solid ${s.borderColors.borderTable} !important`})),be=N(z,{label:"StyledChip"})(({theme:s})=>({backgroundColor:s.color.green,color:"#fff",marginLeft:s.spacing(2),textTransform:"uppercase"})),he=N(b,{label:"StyledRadioCell"})(({theme:s})=>({height:s.spacing(6),paddingRight:0,width:"3%"})),pe=(s,l)=>l.includes(s),ge=s=>{const{currentPlanHeading:l,disabled:i,disabledClasses:x,idx:d,isCreate:h,linodeID:y,onSelect:c,selectedDiskSize:C,selectedId:T,selectedRegionId:S,showTransfer:m,type:e}=s,o=(C||0)>e.disk,p=o?"This plan is too small for the selected image.":void 0,r=e.heading===l,P=e.class==="gpu",n=pe(e.class,x??[]),g=m&&e.transfer,I=m&&e.network_out,{data:u}=H(y??-1,y!==void 0),j=u==null?void 0:u.type,f=e&&e.formattedLabel&&r?`${e.formattedLabel} this is your current plan`:o?`${e.formattedLabel} this plan is too small for resize`:e.formattedLabel,t=location.pathname.includes("/databases/create")?e.price:ie(e,S);return e.subHeadings[0]=`$${W(t==null?void 0:t.monthly)}/mo ($${(t==null?void 0:t.hourly)??L}/hr)`,a.jsxs(F.Fragment,{children:[a.jsx(R,{lgDown:h,mdDown:!h,children:a.jsxs(X,{onClick:()=>!r&&!i&&!n?c(e.id):void 0,"aria-disabled":r||o||n,"aria-label":f,"data-qa-plan-row":e.formattedLabel,disabled:r||o||n,children:[a.jsx(he,{children:!r&&a.jsx(U,{control:a.jsx(re,{checked:!i&&!o&&e.id===String(T),disabled:o||i||n,id:e.id,onChange:()=>c(e.id)}),"aria-label":e.heading,className:"label-visually-hidden",label:e.heading})}),a.jsxs(b,{"data-qa-plan-name":!0,children:[e.heading," ",(r||e.id===j)&&a.jsx(be,{"aria-label":"This is your current plan","data-qa-current-plan":!0,label:"Current Plan"}),p&&a.jsx(G,{sxTooltipIcon:{paddingBottom:"0px !important",paddingTop:"0px !important"},status:"help",text:p,tooltipPosition:"right-end"})]}),a.jsxs(b,{"data-qa-monthly":!0,errorCell:!(t!=null&&t.monthly),errorText:t!=null&&t.monthly?void 0:$,children:[" ","$",W(t==null?void 0:t.monthly)]}),a.jsx(b,{"data-qa-hourly":!0,errorCell:!(t!=null&&t.hourly),errorText:t!=null&&t.hourly?void 0:$,children:P?a.jsx(ne,{quantity:(t==null?void 0:t.hourly)??L}):`$${(t==null?void 0:t.hourly)??L}`}),a.jsx(b,{center:!0,"data-qa-ram":!0,noWrap:!0,children:D(e.memory,!0)}),a.jsx(b,{center:!0,"data-qa-cpu":!0,children:e.vcpus}),a.jsx(b,{center:!0,"data-qa-storage":!0,noWrap:!0,children:D(e.disk,!0)}),g&&e.transfer?a.jsxs(b,{center:!0,"data-qa-transfer":!0,children:[e.transfer/1e3," TB"]}):null,I&&e.network_out?a.jsxs(b,{center:!0,"data-qa-network":!0,noWrap:!0,children:[A," Gbps"," ",a.jsx("span",{style:{color:"#9DA4A6"},children:"/"})," ",e.network_out/1e3," Gbps"]}):null]},e.id)}),a.jsx(R,{lgUp:h,mdUp:!h,children:a.jsx(oe,{checked:e.id===String(T),disabled:o||r||i||n,heading:e.heading,onClick:()=>c(e.id),subheadings:e.subHeadings,tooltip:p},e.id)})]},`tabbed-panel-${d}`)},fe=[{cellName:"",center:!1,noWrap:!1,testId:""},{cellName:"Plan",center:!1,noWrap:!1,testId:"plan"},{cellName:"Monthly",center:!1,noWrap:!1,testId:"monthly"},{cellName:"Hourly",center:!1,noWrap:!1,testId:"hourly"},{cellName:"RAM",center:!0,noWrap:!1,testId:"ram"},{cellName:"CPUs",center:!0,noWrap:!1,testId:"cpu"},{cellName:"Storage",center:!0,noWrap:!1,testId:"storage"},{cellName:"Transfer",center:!0,noWrap:!1,testId:"transfer"},{cellName:"Network In / Out",center:!0,noWrap:!0,testId:"network"}],xe=s=>{const{currentPlanHeading:l,disabled:i,disabledClasses:x,isCreate:d,linodeID:h,onSelect:y,plans:c,selectedDiskSize:C,selectedId:T,selectedRegionId:S,showTransfer:m}=s,e=B(),w=m&&c.some(n=>n.transfer),o=m&&c.some(n=>n.network_out),p=e.pathname.includes("/databases/create"),r=!S&&!p,P=F.useCallback(()=>c.map((n,g)=>a.jsx(ge,{currentPlanHeading:l,disabled:i,disabledClasses:x,idx:g,isCreate:d,linodeID:h,onSelect:y,selectedDiskSize:C,selectedId:T,selectedRegionId:S,showTransfer:m,type:n},g)),[l,i,x,d,h,y,c,C,T,S,m]);return a.jsxs(E,{container:!0,spacing:2,children:[a.jsx(R,{lgUp:d,mdUp:!d,children:r?a.jsx(M,{spacingLeft:8,spacingTop:8,sx:{"& p":{fontSize:"0.875rem"}},text:_,variant:"info"}):P()}),a.jsx(R,{lgDown:d,mdDown:!d,children:a.jsx(E,{xs:12,children:a.jsxs(me,{"aria-label":"List of Linode Plans",isDisabled:i,spacingBottom:16,children:[a.jsx(de,{children:a.jsx(se,{children:fe.map(({cellName:n,center:g,noWrap:I,testId:u})=>{const j=`${u}-header`;return!w&&u==="transfer"||!o&&u==="network"?null:a.jsx(ue,{center:g,"data-qa":j,isPlanCell:n==="Plan",noWrap:I,children:n},u)})})}),a.jsx(te,{role:"radiogroup",children:r?a.jsx(le,{colSpan:9,message:_}):P()})]})})})]})},Ee=s=>{const{className:l,copy:i,currentPlanHeading:x,disabled:d,docsLink:h,error:y,header:c,isCreate:C,linodeID:T,onSelect:S,regionsData:m,selectedId:e,selectedRegionID:w,showTransfer:o,types:p}=s,r=V(),P=Q(p),{hasSelectedRegion:n,isPlanPanelDisabled:g,isSelectedRegionEligibleForPlan:I}=J({regionsData:m,selectedRegionID:w}),u=Object.keys(P).map(f=>{var k;return{render:()=>a.jsxs(a.Fragment,{children:[a.jsx(Y,{isSelectedRegionEligibleForPlan:I(f),disabledClasses:s.disabledClasses,hasSelectedRegion:n,planType:f,regionsData:m||[]}),a.jsx(xe,{currentPlanHeading:x,disabled:d||g(f),disabledClasses:s.disabledClasses,isCreate:C,linodeID:T,onSelect:S,plans:P[f],selectedDiskSize:s.selectedDiskSize,selectedId:e,selectedRegionId:w,showTransfer:o})]}),title:(k=Z[f==="standard"?"shared":f])==null?void 0:k.title}}),j=ee(p,e,x);return a.jsx(K,{copy:i,"data-qa-select-plan":!0,docsLink:h,error:y,header:c||"Linode Plan",initTab:j>=0?j:0,innerClass:s.tabbedPanelInnerClass,rootClass:`${l} tabbedPanel`,sx:{marginTop:r.spacing(3),width:"100%"},tabs:u})};export{Ee as P,De as _};
