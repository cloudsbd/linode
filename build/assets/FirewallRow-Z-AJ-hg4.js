import{r as h,aW as j,bD as F,ao as y,bp as L,j as t,bt as k,q as C,j7 as D,V as p,aq as $,W as I}from"./index-Eksrs3uK.js";import{S}from"./StatusIcon-RuV8PvAV.js";import{T,a as d}from"./TableRow-phXfWUGW.js";import{A}from"./ActionMenu-4CPisA_2.js";import{I as M}from"./InlineMenuAction-d5mRENST.js";import{c as E}from"./shared-QcuPM2Px.js";const R="You don't have permissions to modify this Firewall.",v=h.memo(s=>{const l=j(),e=F(l.breakpoints.down("md")),{data:n}=y(),{data:f}=L(),{firewallID:i,firewallLabel:o,firewallStatus:r,triggerDeleteFirewall:b,triggerDisableFirewall:m,triggerEnableFirewall:c}=s,u=E(i,n,f)?{}:{disabled:!0,tooltip:R},g=[{onClick:()=>{x()},title:r==="enabled"?"Disable":"Enable",...u},{onClick:()=>{b(i,o)},title:"Delete",...u}],x=()=>{r==="disabled"?c(i,o):m(i,o)};return t.jsxs(t.Fragment,{children:[!e&&g.map(a=>t.jsx(M,{actionText:a.title,disabled:a.disabled,onClick:a.onClick,tooltip:a.tooltip},a.title)),e&&t.jsx(A,{actionsList:g,ariaLabel:`Action menu for Firewall ${s.firewallLabel}`})]})}),V=k.memo(s=>{const l=C(),{id:e,label:n,rules:f,status:i,...o}=s,{data:r,error:b,isLoading:m}=D(e);let c=r??[];l.firewallNodebalancer||(c=(r==null?void 0:r.filter(u=>u.entity.type==="linode"))??[]);const w=N(f);return t.jsxs(T,{ariaLabel:`Firewall ${n}`,"data-testid":`firewall-row-${e}`,children:[t.jsx(d,{children:t.jsx(p,{tabIndex:0,to:`/firewalls/${e}`,children:n})}),t.jsxs(d,{statusCell:!0,children:[t.jsx(S,{status:i==="enabled"?"active":"inactive"}),$(i)]}),t.jsxs(I,{smDown:!0,children:[t.jsx(d,{children:q(w)}),t.jsx(d,{children:O(c??[],m,b??void 0)})]}),t.jsx(d,{sx:{textAlign:"end",whiteSpace:"nowrap"},children:t.jsx(v,{firewallID:e,firewallLabel:n,firewallStatus:i,...o})})]})}),q=s=>{const[l,e]=s;let n="";return l!==0&&e!==0?`${l} Inbound / ${e} Outbound`:(l!==0?n=`${l} Inbound`:e!==0&&(n+=`${e} Outbound`),n||"No rules")},N=s=>[(s.inbound||[]).length,(s.outbound||[]).length],O=(s,l,e)=>l?"Loading...":e?"Error retrieving Linodes":s.length===0?"None assigned":P(s),P=s=>{const l=s.slice(0,3);return t.jsxs(t.Fragment,{children:[l.map((e,n)=>t.jsxs(p,{className:"link secondaryLink","data-testid":"firewall-row-link",to:`/${e.entity.type}s/${e.entity.id}`,children:[n>0&&", ",e.entity.label]},e.id)),s.length>3&&t.jsxs("span",{children:[", ","plus ",s.length-3," more."]})]})};export{V as F,q as a,N as g,R as n};
