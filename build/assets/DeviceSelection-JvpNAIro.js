import{eX as D,j as o,eY as T,bI as c}from"./index-Eksrs3uK.js";import{F as m}from"./FormControl-CNHz4Ctl.js";import{g as C}from"./getSelectedOptionFromGroupedOptions-4YyATpGV.js";const t=e=>{if(e==null||e==="none")return null;const[n,r]=e.split("-");if(n!=="volume"&&n!=="disk")return null;const s=`${n}_id`,i=Number(r);return{[s]:i}},M=e=>({sda:t(e.sda),sdb:t(e.sdb),sdc:t(e.sdc),sdd:t(e.sdd),sde:t(e.sde),sdf:t(e.sdf),sdg:t(e.sdg),sdh:t(e.sdh)}),E=e=>{const{devices:n,disabled:r,errorText:s,getSelected:i,onChange:p,rescue:b,slots:h}=e,x=D(0,e.counter),f=s?N(s):null;return o.jsxs("div",{"data-testid":"device-select",children:[h.map((d,g)=>{const u=Object.entries(n).map(([a,v])=>({label:T(a),options:v.map(({_id:j,label:k})=>({label:k,value:j})),value:a}));u.unshift({label:"",options:[{label:"None",value:null}],value:""});const l=C(i(d),u);return x<g?null:o.jsx(m,{fullWidth:!0,children:o.jsx(c,{errorText:(l==null?void 0:l.value)===f&&s?O(s,l.label):void 0,disabled:r,isClearable:!1,label:`/dev/${d}`,noMarginTop:!0,onChange:a=>p(d,a.value),options:u,placeholder:"None",value:l})},d)}),b&&o.jsx(m,{fullWidth:!0,children:o.jsx(c,{defaultValue:{label:"finnix",value:"finnix"},disabled:!0,id:"rescueDevice_sdh",label:"/dev/sdh",name:"rescueDevice_sdh",noMarginTop:!0,onChange:()=>null,placeholder:"Finnix Media"})})]})},F=/[0-9]+/g,N=e=>{var s;const n=e.includes("disk")?"disk":"volume",r=(s=e.match(F))==null?void 0:s[0];return r?`${n}-${Number(r)}`:null},O=(e,n)=>n?`${n} is already in use.`:e;export{E as D,M as c};
