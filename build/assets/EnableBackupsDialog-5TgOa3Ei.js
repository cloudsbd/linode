import{au as v,av as l,aw as u,dY as Q,dV as s,dZ as E,d_ as m,d$ as f,e0 as C,c as h,dr as x,cx as L,r as P,j as o,af as S,T,ad as j,ag as M,dE as R}from"./index-Eksrs3uK.js";import{C as q}from"./Currency-No8tnN7b.js";import{a as _}from"./backups-brLSog0e.js";import{P as w}from"./constants-KokzTiEs.js";const K=(a,e=!0)=>v([s,"linode",a,"backups"],()=>Q(a),{enabled:e}),A=a=>{const e=l();return u(()=>E(a),{onSuccess(){e.invalidateQueries([s,"paginated"]),e.invalidateQueries([s,"all"]),e.invalidateQueries([s,"infinite"]),e.invalidateQueries([s,"linode",a,"details"])}})},V=a=>{const e=l();return u(()=>m(a),{onSuccess(){e.invalidateQueries([s,"paginated"]),e.invalidateQueries([s,"all"]),e.invalidateQueries([s,"infinite"]),e.invalidateQueries([s,"linode",a,"details"])}})},X=a=>{const e=l();return u(({label:t})=>f(a,t),{onSuccess(){e.invalidateQueries([s,"linode",a,"backups"]),e.invalidateQueries([s,"linode",a,"details"]),e.invalidateQueries([s,"paginated"]),e.invalidateQueries([s,"all"]),e.invalidateQueries([s,"infinite"])}})},Y=()=>u(({backupId:a,linodeId:e,overwrite:t,targetLinodeId:i})=>C(e,a,i,t)),Z=a=>{const{linodeId:e,onClose:t,open:i}=a,{error:r,isLoading:d,mutateAsync:p,reset:y}=A(e??-1),{data:n}=h(e??-1,i&&e!==void 0&&e>0),{data:k}=x((n==null?void 0:n.type)??"",!!(n!=null&&n.type)),c=_({region:n==null?void 0:n.region,type:k}),{enqueueSnackbar:b}=L(),B=async()=>{await p(),R(),b("Backups are being enabled for this Linode.",{variant:"success"}),t()};P.useEffect(()=>{i&&y()},[i]);const g=o.jsx(M,{primaryButtonProps:{"data-testid":"confirm-enable-backups",disabled:!c,label:"Enable Backups",loading:d,onClick:B},secondaryButtonProps:{"data-testid":"cancel-cance",label:"Close",onClick:t},style:{padding:0}});return o.jsx(S,{actions:g,error:r==null?void 0:r[0].reason,onClose:t,open:i,title:"Enable backups?",children:c?o.jsxs(T,{children:["Are you sure you want to enable backups on this Linode?"," ","This will add ",o.jsx(q,{quantity:c})," ","to your monthly bill."]}):o.jsx(j,{spacingBottom:16,spacingTop:8,text:w,variant:"error"})})};export{Z as E,X as a,Y as b,K as c,V as u};
