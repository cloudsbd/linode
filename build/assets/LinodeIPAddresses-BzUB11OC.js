import{c9 as fe,f2 as ss,f3 as vs,cg as ns,f4 as $e,cc as bs,c6 as fs,s as C,V as ys,cp as Ps,c1 as ts,G as b,B as ye,T as c,q as as,f5 as Is,bn as js,au as Pe,f6 as Ss,dV as x,av as ee,aw as se,f7 as ws,f8 as Cs,f9 as Rs,fa as Ls,fb as Ds,fc as Ts,fd as As,fe as ks,ff as Bs,fg as Os,aW as ne,r as m,j as s,ad as G,d0 as Ne,da as qs,ag as _,a1 as De,cx as Ie,af as is,ak as Te,bB as be,bD as Es,ab as Qs,c as le,C as je,$ as Ae,f as Ce,bI as ve,N as os,dq as $s,bH as rs,bL as Ns,an as Re,aj as _s,ca as Ms,bj as _e,cA as ie,ci as Fs,ba as ls,bp as Gs,E as Ws,W as zs,aa as Hs}from"./index-Eksrs3uK.js";import{A as Us}from"./AddNewLink-LwviGK8c.js";import{O as Vs}from"./OrderBy-H-bWJCPy.js";import{f as Ys,a as $,T as ds,b as Ks,c as Zs}from"./TableRow-phXfWUGW.js";import{T as Js}from"./TableSortCell-hcsagFzN.js";import{u as Xs}from"./configs-3PoBJaCX.js";import{u as en}from"./vpcs-qp5yIH1u.js";import{g as sn}from"./linodes--kIa80QO.js";import{D as oe}from"./Drawer-A9yKjC3Z.js";import{R as Me}from"./Radio-HudVgwMW.js";import{R as Fe}from"./RadioGroup-zpRjMzXK.js";import{u as cs}from"./formik.esm-Kap5lsIh.js";import{i as Ge}from"./ipaddr-jlottelM.js";import{C as Se}from"./CopyTooltip-mIyzAQ7E.js";import{A as nn}from"./ActionMenu-4CPisA_2.js";import{I as tn}from"./InlineMenuAction-d5mRENST.js";import{a as We}from"./PublicIpsUnassignedTooltip-A07mEsGp.js";import{r as an}from"./remove-KHZAQMPH.js";import{u as us}from"./uniq-xa8_MmzW.js";import{_ as on}from"./_isFunction-X3ooR5X_.js";import{l as J,o as ke}from"./over-27tc0FF7.js";import{s as Be}from"./set-2Chj4B2I.js";import{v as ze}from"./view-I-40yLKJ.js";import{T as rn}from"./TableHead-Si_pzkLK.js";var ln=fe(function(n,t){return n&&t}),dn=fe(function(n,t){return typeof t["fantasy-land/ap"]=="function"?t["fantasy-land/ap"](n):typeof n.ap=="function"?n.ap(t):typeof n=="function"?function(a){return n(a)(t(a))}:ss(function(a,o){return vs(a,ns(o,t))},[],n)}),cn=fe(function(n,t){var a=$e(n,t);return $e(n,function(){return ss(dn,ns(a,arguments[0]),Array.prototype.slice.call(arguments,1))})}),un=bs(function(n){return cn(n.length,n)}),pn=fe(function(n,t){return on(n)?function(){return n.apply(this,arguments)&&t.apply(this,arguments)}:un(ln)(n,t)}),he=fs(function(n,t,a){return n(a)?t(a):a});const At=C(ys,{label:"StyledLink"})(({theme:e})=>({"&:hover":{color:e.palette.primary.light,textDecoration:"underline"},marginLeft:e.spacing()})),kt=C(Ps,{label:"StyledChip",shouldForwardProp:ts(["isSummaryView","hasSecondaryStatus","isOffline","isOther","isRunning"])})(({hasSecondaryStatus:e,isOffline:n,isOther:t,isRunning:a,isSummaryView:o,theme:r})=>({"&:before":{...n&&{backgroundColor:r.color.grey8},...t&&{backgroundColor:r.color.orange},...a&&{backgroundColor:r.color.teal}},borderRadius:0,fontSize:"0.875rem",height:r.spacing(3),letterSpacing:".5px",marginLeft:r.spacing(2),...e&&{borderRight:`1px solid ${r.borderColors.borderTypography}`,paddingRight:`${r.spacing(2)}`},...o&&{[r.breakpoints.down("lg")]:{marginLeft:r.spacing()}}})),Bt=C(b,{label:"StyledBodyGrid"})(({theme:e})=>({justifyContent:"space-between",padding:e.spacing(2)})),Ot=C(b,{label:"StyledColumnLabelGrid"})(({theme:e})=>({color:e.textColors.headlineStatic,fontFamily:e.font.bold})),qt=C(b,{label:"StyledRightColumnGrid"})(({theme:e})=>({flexBasis:"75%",flexWrap:"nowrap",paddingBottom:0,paddingRight:0,[e.breakpoints.down("md")]:{flexDirection:"column"}})),Et=C(b,{label:"StyledSummaryGrid"})(({theme:e})=>({"& > div":{flexBasis:"50%",[e.breakpoints.down("md")]:{flexBasis:"100%"}},"& p":{color:e.textColors.tableStatic}})),Qt=C(ye,{label:"StyledVPCBox"})(({theme:e})=>({padding:0,[e.breakpoints.down("md")]:{paddingBottom:e.spacing(.5)}})),$t=C(ye,{label:"StyledBox"})(({theme:e})=>({alignItems:"center",display:"flex",[e.breakpoints.down("md")]:{alignItems:"flex-start",flexDirection:"column"}})),Nt=C(ye,{label:"StyledLabelBox"})(({theme:e})=>({fontFamily:e.font.bold,marginRight:"4px"})),ps={borderRight:0,flex:"50%",padding:0},_t={borderRight:0,paddingRight:0},Mt=C(c,{label:"StyledTypography"})(({theme:e})=>({borderRight:`1px solid ${e.borderColors.borderTypography}`,color:e.textColors.tableStatic,display:"flex",padding:"0px 10px",[e.breakpoints.down("md")]:{...ps}})),Ft=e=>({[e.breakpoints.down("md")]:{...ps,"&:first-of-type":{paddingBottom:e.spacing(.5)}}}),Gt=C(Ys,{label:"StyledTable"})(({theme:e})=>({"& td":{border:"none",borderBottom:`1px solid ${e.bg.bgPaper}`,fontSize:"0.875rem",lineHeight:1,whiteSpace:"nowrap"},"& th":{backgroundColor:e.bg.app,borderBottom:`1px solid ${e.bg.bgPaper}`,color:e.textColors.textAccessTable,fontFamily:e.font.bold,fontSize:"0.875rem",lineHeight:1,padding:e.spacing(),textAlign:"left",whiteSpace:"nowrap",width:170},"& tr":{height:32},tableLayout:"fixed"})),Wt=C(b,{label:"StyledTableGrid"})(({theme:e})=>({"&.MuiGrid-item":{padding:0,paddingLeft:e.spacing()}})),zt=C($,{label:"StyledTableCell"})(({theme:e})=>({"& div":{fontSize:15},alignItems:"center",backgroundColor:e.bg.bgAccessRow,color:e.textColors.tableStatic,display:"flex",fontFamily:'"UbuntuMono", monospace, sans-serif',justifyContent:"space-between",padding:`${e.spacing(.5)} ${e.spacing(1)}`,position:"relative"})),Ht=C(Se,{label:"StyledCopyTooltip"})({"& svg":{height:"12px",opacity:0,width:"12px"}}),Ut=C("div",{label:"StyledGradientDiv"})(({theme:e})=>({"&:after":{backgroundImage:`linear-gradient(to right,  ${e.bg.bgAccessRowTransparentGradient}, ${e.bg.bgAccessRow});`,bottom:0,content:'""',height:"100%",position:"absolute",right:0,width:30},overflowX:"auto",overflowY:"hidden",paddingRight:15})),gn=C(ds,{label:"StyledTableRow"})({"&:hover .copy-tooltip > svg, & .copy-tooltip:focus > svg":{opacity:1}}),hn=e=>{var j;const n=as(),{account:t}=Is(),a=js("VPCs",!!n.vpc,(t==null?void 0:t.capabilities)??[]),{data:o}=en({},{},a),u=((o==null?void 0:o.data)??[]).find(g=>!!g.subnets.find(I=>I.linodes.some(f=>f.id===e))),{data:p}=Xs(e);let l;p==null||p.find(g=>{const I=g.interfaces.find(f=>f.vpc_id===(u==null?void 0:u.id));return I&&(l=I),I});const v=!!(l!=null&&l.primary&&!((j=l.ipv4)!=null&&j.nat_1_1));return{configInterfaceWithVPC:l,configs:p,isVPCOnlyLinode:v,showVPCs:a,vpcLinodeIsAssignedTo:u}},de=(e,n=!0)=>Pe([x,"linode",e,"ips"],()=>Ss(e),{enabled:n}),gs=()=>{const e=ee();return se(({address:n,rdns:t})=>ws(n,t),{onSuccess(){qe(e)}})},mn=(e,n)=>{const t=ee();return se(()=>Cs({address:n,linodeID:e}),{onSuccess(){t.invalidateQueries([x,"linode",e,"details"]),t.invalidateQueries([x,"linode",e,"ips"]),t.invalidateQueries([x,"paginated"]),t.invalidateQueries([x,"all"]),t.invalidateQueries([x,"infinite"]),t.invalidateQueries([x,"ips"])}})},xn=e=>{const n=ee();return se(()=>Rs({range:e}),{onSuccess(){qe(n),n.invalidateQueries([x,"paginated"]),n.invalidateQueries([x,"all"]),n.invalidateQueries([x,"infinite"]),n.invalidateQueries([x,"ips"]),n.invalidateQueries([x,"ipv6"])}})},vn=()=>{const e=ee();return se(Ls,{onSuccess(){qe(e),e.invalidateQueries([x,"paginated"]),e.invalidateQueries([x,"all"]),e.invalidateQueries([x,"infinite"])}})},bn=()=>{const e=ee();return se(Ds,{onSuccess(n,t){for(const{linode_id:a}of t.assignments)e.invalidateQueries([x,"linode",a,"details"]),e.invalidateQueries([x,"linode",a,"ips"]);e.invalidateQueries([x,"paginated"]),e.invalidateQueries([x,"all"]),e.invalidateQueries([x,"infinite"])}})},fn=e=>{const n=ee();return se(t=>Ts(e,t),{onSuccess(){n.invalidateQueries([x,"linode",e,"details"]),n.invalidateQueries([x,"linode",e,"ips"]),n.invalidateQueries([x,"paginated"]),n.invalidateQueries([x,"all"]),n.invalidateQueries([x,"infinite"]),n.invalidateQueries([x,"ips"])}})},yn=()=>{const e=ee();return se(As,{onSuccess(n,t){e.invalidateQueries([x,"ips"]),e.invalidateQueries([x,"ipv6"]),t.linode_id&&(e.invalidateQueries([x,"linode",t.linode_id,"details"]),e.invalidateQueries([x,"linode",t.linode_id,"ips"]),e.invalidateQueries([x,"paginated"]),e.invalidateQueries([x,"all"]),e.invalidateQueries([x,"infinite"]))}})},Oe=(e,n,t=!0)=>Pe([x,"ips",e,n],()=>ks(e,n),{enabled:t}),hs=(e,n,t=!0)=>Pe([x,"ipv6","ranges",e,n],()=>Bs(e,n),{enabled:t}),Pn=(e,n,t=!0)=>{const{data:a}=hs(e,n,t);return Pe([x,"ipv6","ranges","details",e,n],async()=>await Promise.all((a??[]).map(o=>Os(o.range))),{enabled:a!==void 0&&t})},qe=e=>{e.invalidateQueries({predicate:n=>Array.isArray(n.queryKey)?n.queryKey[0]===x&&n.queryKey[3]==="ips":!1})},In=[{label:"Public",value:"v4Public"},{label:"Private",value:"v4Private"}],jn=[{label:"/64",value:"64"},{label:"/56",value:"56"}],Sn={v4Private:s.jsx(s.Fragment,{children:"Add a private IP address to your Linode. Data sent explicitly to and from private IP addresses in the same data center does not incur transfer quota usage. To ensure that the private IP is properly configured once added, it’s best to reboot your Linode."}),v4Public:s.jsxs(s.Fragment,{children:["Public IP addresses, over and above the one included with each Linode, incur an additional monthly charge. If you need an additional Public IP Address you must request one. Please open a"," ",s.jsx(De,{to:"support/tickets",children:"Support Ticket"})," if you have not done so already."]})},wn={56:s.jsx(s.Fragment,{children:"/56 ranges are typically only required by specialized systems or networking applications."}),64:s.jsx(s.Fragment,{children:"/64 is the most common range provided to our customers and sufficient for most applications that require additional IPv6 addresses."})},Cn={v4Private:s.jsx(s.Fragment,{children:"This Linode already has a private IP address."}),v4Public:null},Rn=e=>{const{linodeId:n,onClose:t,open:a,readOnly:o}=e,r=ne(),{error:u,isLoading:p,mutateAsync:l,reset:v}=fn(n),{error:j,isLoading:g,mutateAsync:D,reset:I}=yn(),[f,w]=m.useState(null),[y,q]=m.useState(null),{data:W}=de(n,a);m.useEffect(()=>{a&&(w(null),q(null),v(),I())},[a]);const M=(L,A)=>{w(A)},T=(L,A)=>{q(A)},z=async()=>{await l({public:f==="v4Public",type:"ipv4"}),t()},F=async()=>{await D({linode_id:n,prefix_length:Number(y)}),t()},U=W!==void 0&&W.ipv4.private.length>0,k=f==="v4Private"&&U||!f||o,N=!y||o,E=k&&f?o?"You do not have permission to modify this Linode.":Cn[f]:null;return s.jsx(oe,{onClose:t,open:a,title:"Add an IP Address",children:s.jsxs(m.Fragment,{children:[s.jsx(c,{variant:"h2",children:"IPv4"}),!!u&&s.jsx(G,{spacingTop:8,text:u==null?void 0:u[0].reason,variant:"error"}),s.jsx(c,{sx:{marginTop:"1rem"},variant:"h3",children:"Select type"}),s.jsx(Fe,{"aria-label":"ip-option","data-qa-ip-options-radio-group":!0,name:"Select IPv4 type",onChange:M,sx:{marginTop:"0 !important"},value:f,children:In.map((L,A)=>s.jsx(Ne,{control:s.jsx(Me,{}),"data-qa-radio":L.label,label:L.label,value:L.value},A))}),f&&s.jsx(c,{sx:{marginTop:r.spacing(2)},variant:"body1",children:Sn[f]}),E?s.jsx(qs,{placement:"bottom-end",title:E,children:s.jsx("div",{style:{display:"inline"},children:s.jsx(_,{primaryButtonProps:{disabled:k,label:"Allocate",loading:p,onClick:z,sx:{marginBottom:8}}})})}):s.jsx(_,{primaryButtonProps:{disabled:k,label:"Allocate",loading:p,onClick:z,sx:{marginBottom:8}}}),s.jsx(c,{sx:{marginTop:r.spacing(4)},variant:"h2",children:"IPv6"}),!!j&&s.jsx(G,{spacingTop:8,text:j==null?void 0:j[0].reason,variant:"error"}),s.jsx(c,{sx:{marginTop:"1rem"},variant:"h3",children:"Select prefix"}),s.jsx(Fe,{"aria-label":"prefix-option","data-qa-ip-options-radio-group":!0,name:"Select prefix",onChange:T,sx:{marginTop:"0 !important"},value:y,children:jn.map((L,A)=>s.jsx(Ne,{control:s.jsx(Me,{}),"data-qa-radio":L.label,label:L.label,value:L.value},A))}),y&&s.jsx(c,{style:{marginBottom:"1rem"},variant:"body1",children:wn[y]}),s.jsxs(c,{children:["IPv6 addresses are allocated as ranges, which you can choose to distribute and further route yourself."," ",s.jsx(De,{to:"https://www.linode.com/docs/guides/an-overview-of-ipv6-on-linode/",children:"Learn more"}),"."]}),s.jsx(_,{primaryButtonProps:{disabled:N,label:"Allocate",loading:g,onClick:F,sx:{marginBottom:8}}})]})})},Ln=e=>{const{address:n,linodeId:t,onClose:a,open:o}=e,{enqueueSnackbar:r}=Ie(),{error:u,isLoading:p,mutateAsync:l}=mn(t,n),v=async()=>{await l(),r(`Successfully removed ${n}`,{variant:"success"}),a()};return s.jsx(is,{actions:s.jsx(_,{primaryButtonProps:{label:"Delete IP",loading:p,onClick:v},secondaryButtonProps:{label:"Cancel",onClick:a}}),error:u==null?void 0:u[0].reason,onClose:a,open:o,title:`Delete ${n}?`,children:s.jsx(c,{children:"Are you sure you want to delete this IP Address? This action cannot be undone."})})},Dn=e=>{const{onClose:n,open:t,range:a}=e,{enqueueSnackbar:o}=Ie(),{error:r,isLoading:u,mutateAsync:p}=xn(a.range),l=async()=>{await p(),o(`Successfully removed ${a.range}/${a.prefix}`,{variant:"success"}),n()};return s.jsx(is,{actions:s.jsx(_,{primaryButtonProps:{label:"Delete Range",loading:u,onClick:l},secondaryButtonProps:{label:"Cancel",onClick:n}}),error:r==null?void 0:r[0].reason,onClose:n,open:t,title:`Delete ${a.range}/${a.prefix}?`,children:s.jsx(c,{children:"Are you sure you want to delete this IP Range? This action cannot be undone."})})},Tn=e=>{const{ip:n,onClose:t,open:a}=e,{enqueueSnackbar:o}=Ie(),{error:r,isLoading:u,mutateAsync:p,reset:l}=gs(),v=cs({enableReinitialize:!0,initialValues:{rdns:n==null?void 0:n.rdns},async onSubmit(g){await p({address:(n==null?void 0:n.address)??"",rdns:g.rdns===""?null:g.rdns}),o(`Successfully updated RNS for ${n==null?void 0:n.address}`,{variant:"success"}),t()}});m.useEffect(()=>{a&&(l(),v.resetForm())},[a]);const j=Te(["rdns"],r);return s.jsx(oe,{onClose:t,open:a,title:"Edit Reverse DNS",children:s.jsxs("form",{onSubmit:v.handleSubmit,children:[!!j.none&&s.jsx(G,{variant:"error",children:j.none}),s.jsx(be,{"data-qa-domain-name":!0,errorText:j.rdns,hideLabel:!0,label:"Enter a domain name",name:"rdns",onChange:v.handleChange,placeholder:"Enter a domain name",value:v.values.rdns}),s.jsx(c,{variant:"body1",children:"Leave this field blank to reset RDNS"}),s.jsx(_,{primaryButtonProps:{"data-testid":"submit",label:"Save",loading:u,type:"submit"},secondaryButtonProps:{label:"cancel",onClick:t},style:{marginTop:16}})]})})};C(Se,{label:"StyledCopyTooltip ",shouldForwardProp:ts(["isHovered"])})(({isHovered:e})=>({"& svg":{height:"12px",width:"12px"},":focus":{opacity:1},marginLeft:4,opacity:e?1:0,top:1}));const An=C($,{label:"StyledActionTableCell"})(({theme:e})=>({"& a":{marginRight:e.spacing(1)},alignItems:"center",display:"flex",justifyContent:"flex-end",padding:0,paddingRight:"0px !important"})),kn=C(b,{label:"StyledWrapperGrid"})(({theme:e})=>({"&.MuiGrid-item":{padding:5},[e.breakpoints.down("sm")]:{marginLeft:`-${e.spacing(1.5)}`,marginTop:`-${e.spacing(1)}`}})),Bn=C(c,{label:"StyledTypography"})({lineHeight:"1.5rem",marginBottom:8,marginLeft:15,marginTop:8}),On=C(b,{label:"StyledRootGrid"})(({theme:e})=>({backgroundColor:e.color.white,margin:0,width:"100%"})),He=e=>{const n=ne(),t=Es(n.breakpoints.down("lg")),{ipAddress:a,ipType:o,isOnlyPublicIP:r,isVPCOnlyLinode:u,onEdit:p,onRemove:l,readOnly:v}=e,j=o!=="IPv4 – Private"&&o!=="IPv6 – Link Local"&&o!=="IPv4 – Reserved (public)"&&o!=="IPv4 – Reserved (private)",g=["IPv4 – Public","IPv4 – Private","IPv6 – Range"],D=(a==null?void 0:a.prefix)===116,I=v?"You don't have permissions to perform this action":void 0,f=r?"Linodes must have at least one public IP":void 0,w=[l&&a&&!D&&g.includes(o)?{disabled:v||r||u,onClick:()=>{l(a)},title:"Delete",tooltip:v?I:u?We:r?f:void 0}:null,p&&a&&j?{disabled:v||u,onClick:()=>{p(a)},title:"Edit RDNS",tooltip:v?I:u?We:void 0}:null].filter(Boolean);return Qs(w)?s.jsx(ye,{sx:{height:40}}):s.jsxs(s.Fragment,{children:[!t&&w.map(y=>s.jsx(tn,{actionText:y.title,disabled:y.disabled,onClick:y.onClick,tooltip:y.tooltip},y.title)),t&&s.jsx(nn,{actionsList:w,ariaLabel:`Action menu for IP Address ${e.ipAddress}`})]})},qn=e=>{const{_ip:n,_range:t,address:a,gateway:o,handleOpenEditRDNS:r,handleOpenEditRDNSForRange:u,handleOpenIPV6Details:p,isVPCOnlyLinode:l,linodeId:v,openRemoveIPDialog:j,openRemoveIPRangeDialog:g,rdns:D,readOnly:I,subnetMask:f,type:w}=e,{data:y}=de(v),q=(y==null?void 0:y.ipv4.public.length)===1&&w==="IPv4 – Public";return s.jsxs(gn,{"data-qa-ip":a,disabled:l,children:[s.jsxs($,{"data-qa-ip-address":!0,parentColumn:"Address",sx:{whiteSpace:"nowrap"},children:[s.jsx(Se,{copyableText:!0,disabled:l,text:a}),!l&&s.jsx(En,{text:a})]}),s.jsx($,{"data-qa-ip-address":!0,parentColumn:"Type",children:w}),s.jsx($,{parentColumn:"Default Gateway",children:o}),s.jsx($,{parentColumn:"Subnet Mask",children:f}),s.jsx($,{"data-qa-rdns":!0,parentColumn:"Reverse DNS",children:t?s.jsx(Qn,{linodeId:v,onViewDetails:()=>p(t),range:t}):D}),s.jsx(An,{"data-qa-action":!0,children:n?s.jsx(He,{ipAddress:n,ipType:w,isOnlyPublicIP:q,isVPCOnlyLinode:l,onEdit:r,onRemove:j,readOnly:I}):t?s.jsx(He,{ipAddress:t,ipType:w,isOnlyPublicIP:q,isVPCOnlyLinode:l,onEdit:()=>u(t),onRemove:g,readOnly:I}):null})]},`${a}-${w}`)},En=C(Se,{label:"StyledCopyToolTip"})(()=>({"& svg":{height:"12px",opacity:0,width:"12px"},marginLeft:4,top:1})),Qn=e=>{const{linodeId:n,onViewDetails:t,range:a}=e,o=ne(),{data:r}=le(n),{data:u,isLoading:p}=Oe({},{region:r==null?void 0:r.region},r!==void 0),l=Ee(a.range,a.prefix,u);return p?s.jsx(je,{mini:!0,noPadding:!0}):l.length===0?null:l.length===1?s.jsxs("span",{children:[s.jsx(c,{children:l[0].address}),s.jsx(c,{children:l[0].rdns})]}):s.jsx("button",{"aria-label":`View the ${l.length} RDNS Addresses`,onClick:t,children:s.jsxs(c,{sx:{"&:hover":{color:o.palette.primary.light},color:o.palette.primary.main},children:[l.length," Addresses2"]})})},Ee=(e,n,t=[])=>t.filter(a=>{if(!(!["ipv6/pool","ipv6/range"].includes(a.type)||a.rdns===null))try{const o=Ge.parse(a.address),r=Ge.parse(e);return o.match(r,n)}catch{return!1}}),$n=e=>{const{linodeId:n,onClose:t,open:a,range:o}=e,{enqueueSnackbar:r}=Ie(),{data:u}=le(n,a),{data:p}=Oe({},{region:u==null?void 0:u.region},o!==void 0&&u!==void 0&&a),l=o?Ee(o.range,o.prefix,p):[],{error:v,isLoading:j,mutateAsync:g,reset:D}=gs(),I=cs({enableReinitialize:!0,initialValues:{address:o==null?void 0:o.range,rdns:""},async onSubmit(y){await g({address:y.address??"",rdns:y.rdns===""?null:y.rdns}),r(`Successfully updated RNS for ${o==null?void 0:o.range}`,{variant:"success"}),t()}}),f=ne();m.useEffect(()=>{a&&(I.resetForm(),D())},[a]);const w=Te(["rdns"],v);return s.jsxs(oe,{onClose:t,open:a,title:"Edit Reverse DNS",children:[s.jsxs("form",{onSubmit:I.handleSubmit,children:[!!w.none&&s.jsx(G,{"data-qa-error":!0,style:{marginTop:16},variant:"error",children:w.none}),s.jsx(be,{"data-qa-address-name":!0,label:"Enter an IPv6 address",name:"address",onChange:I.handleChange,placeholder:"Enter an IPv6 address",value:I.values.address}),s.jsx(be,{"data-qa-domain-name":!0,errorText:w.rdns,label:"Enter a domain name",name:"rdns",onChange:I.handleChange,placeholder:"Enter a domain name",value:I.values.rdns}),s.jsx(c,{variant:"body1",children:"Leave this field blank to reset RDNS"}),s.jsx(_,{primaryButtonProps:{"data-testid":"submit",label:"Save",loading:j,type:"submit"},secondaryButtonProps:{"data-testid":"cancel",label:"Close",onClick:t},style:{marginTop:16}})]}),o&&l&&l.length>0&&s.jsxs("div",{style:{borderTop:`1px solid ${f.palette.divider}`,marginTop:f.spacing(2)},children:[s.jsx(c,{sx:{marginTop:f.spacing(2)},variant:"h3",children:"Existing Records"}),l.map(y=>s.jsxs("div",{style:{marginTop:f.spacing(2)},children:[s.jsx(c,{children:y.address}),s.jsx(c,{children:y.rdns||""})]},y.address))]})]})},Ue=(e,n)=>e.length===n.length&&e.every((t,a)=>t===n[a]),Nn=e=>{const n=ne(),t=as(),{linodeId:a,onClose:o,open:r,readOnly:u}=e,{data:p}=le(a),{data:l}=de(a,r),{data:v}=Pn({},{region:p==null?void 0:p.region},r),{mutateAsync:j}=vn(),g=v==null?void 0:v.reduce((i,d)=>(t.ipv6Sharing&&d.is_bgp&&d.linodes.includes(a)?i.sharedRanges.push(d):t.ipv6Sharing&&i.availableRanges.push(d),i),{availableRanges:[],sharedRanges:[]}),D=(g==null?void 0:g.sharedRanges)??[],I=(g==null?void 0:g.availableRanges)??[],f=[...(l==null?void 0:l.ipv4.shared.map(i=>i.address))??[],...D==null?void 0:D.map(i=>`${i.range}/${i.prefix}`)],w=(l==null?void 0:l.ipv4.public.map(i=>i.address))??[],y=_n(I),{data:q,isLoading:W}=os({page_size:$s},{region:p==null?void 0:p.region},r),M=(i,d)=>{const P=d.reduce((h,S)=>{var R;return S.id===i||(S.ipv4.forEach(O=>{h[O]=S.label}),t.ipv6Sharing&&((R=y==null?void 0:y[S.id])==null||R.forEach(O=>{h[O]=S.label,z({[O]:[...(T==null?void 0:T[O])??[],S.id]})}))),h},{});return f.forEach(h=>{P.hasOwnProperty(h)||(P[h]="")}),P};let T={};const z=i=>{T={...T,...i}},F=M(a,q??[]),[U,k]=m.useState(void 0),[N,E]=m.useState(void 0),[L,A]=m.useState(f),[Q,H]=m.useState(!1);m.useEffect(()=>{l&&v&&!Ue(f,L)&&(A(f),k(void 0))},[l,v]);const Y=(i,d)=>{A(P=>i>=P.length?[...P,d.value]:Ns(i,d.value,P))},ce=i=>{A(d=>an(i,1,d))},te=()=>{o(),window.setTimeout(()=>E(void 0),500)},K=i=>Object.keys(F).filter(d=>{const P=L.includes(d);return d===i||!P}),ue=()=>{const i={},d=us(L.reduce((R,O)=>{var Qe;if(O==null)return R;const ae=O.split("/")[0];if(((Qe=T==null?void 0:T[O])==null?void 0:Qe.length)===1){const ge=T[O][0];i.hasOwnProperty(ge)?i[ge]=[...i[ge],ae]:i[ge]=[ae]}return[...R,ae]},[]));let P;k(void 0);let h=!0;if(H(h),E(void 0),Ue(f,L)){k([{reason:"Please select an action."}]),H(!1);return}const S=[];t.ipv6Sharing&&Object.keys(i).forEach(R=>{S.push(j({ips:i[R],linode_id:parseInt(R,10)}).catch(O=>{const ae=Re(O,"Unable to complete request at this time.");P=ae,k(ae),h=!1,H(!1),E(void 0)}))}),Promise.all(S).then(()=>{!h||P||j({ips:d,linode_id:a}).then(R=>{k(void 0),H(!1),E("IP Sharing updated successfully")}).catch(R=>{const O=Re(R,"Unable to complete request at this time.");k(O),H(!1),E(void 0)})})},re=()=>{k(void 0),E(void 0),A(f)},Z=Object.keys(F).length===0,B=Te([],U).none;return s.jsxs(rs,{fullWidth:!0,onClose:te,open:r,title:"IP Sharing",children:[s.jsx(Mn,{loading:W,children:s.jsxs(s.Fragment,{children:[B&&s.jsx(b,{xs:12,children:s.jsx(G,{text:B,variant:"error"})}),N&&s.jsx(b,{xs:12,children:s.jsx(G,{text:N,variant:"success"})}),s.jsxs(b,{container:!0,children:[s.jsxs(b,{lg:8,sm:12,xl:6,children:[t.ipv6Sharing?s.jsx(G,{variant:"warning",children:s.jsxs(c,{sx:{fontSize:"0.875rem"},children:[s.jsx("strong",{children:"Warning:"})," Converting a statically routed IPv6 range to a shared range will break existing IPv6 connectivity unless each Linode that shares the range has BGP set up to advertise that range. Follow"," ",s.jsx(De,{to:"https://www.linode.com/docs/guides/ip-failover/",children:"this guide"})," ","to set up BGP on a Linode."]})}):null,s.jsx(c,{sx:{marginBottom:n.spacing(2)},children:"IP Sharing allows a Linode to share an IP address assignment (one or more additional IP addresses). This can be used to allow one Linode to begin serving requests should another become unresponsive. Only IPs in the same data center are offered for sharing."})]}),s.jsxs(b,{xs:12,children:[s.jsx(b,{container:!0,children:s.jsx(b,{sx:{[n.breakpoints.up("sm")]:{width:`calc(175px + ${n.spacing(2)})`},width:"100%"},children:s.jsx(c,{sx:{fontFamily:n.font.bold},children:"IP Addresses"})})}),Z?s.jsx(c,{sx:{color:n.color.grey1,marginTop:n.spacing(2)},children:"You have no other Linodes in this Linode’s data center with which to share IPs."}):s.jsxs(m.Fragment,{children:[w.map(i=>s.jsx(Fn,{ip:i},i)),L.map((i,d)=>s.jsx(Ve,{getRemainingChoices:K,handleDelete:ce,handleSelect:Y,idx:d,ip:i,labels:F,readOnly:!!u},`${i}-sharing-row-${d}`)),K("").length>0&&s.jsx(Ve,{getRemainingChoices:K,handleSelect:Y,idx:L.length,ip:"",labels:F,readOnly:!!u},"empty-sharing-row")]})]})]})]})}),s.jsx(_,{primaryButtonProps:{"data-testid":"submit",disabled:u||Z,label:"Save",loading:Q,onClick:ue},secondaryButtonProps:{"data-testid":"reset",disabled:Q||Z,label:"Reset Form",onClick:re}})]})},_n=e=>e.reduce((n,t)=>(n[t.linodes[0]]=[...(n==null?void 0:n[t.linodes[0]])??[],`${t.range}/${t.prefix}`],n),{}),Mn=e=>e.loading?s.jsx(je,{}):e.children,Fn=m.memo(e=>{const{ip:n}=e;return s.jsxs(b,{container:!0,spacing:2,children:[s.jsx(b,{xs:12,children:s.jsx(Ae,{spacingBottom:0})}),s.jsx(b,{xs:12,children:s.jsx(be,{sx:{marginTop:0,width:"100%"},disabled:!0,hideLabel:!0,label:"IP Address",value:n})})]},n)}),Ve=m.memo(e=>{const{getRemainingChoices:n,handleDelete:t,handleSelect:a,idx:o,ip:r,labels:u,readOnly:p}=e,l=ne(),v=n(r).map(g=>({label:`${g} ${u[g]!==void 0?u[g]:""}`,value:g})),j=v.find(g=>g.value===r);return s.jsxs(b,{container:!0,spacing:2,children:[s.jsx(b,{xs:12,children:s.jsx(Ae,{spacingBottom:0})}),s.jsx(b,{sm:10,xs:12,children:s.jsx(Gn,{textFieldProps:{dataAttrs:{"data-qa-share-ip":!0}},disabled:p,hideLabel:!0,inputId:`ip-select-${o}`,isClearable:!1,label:"Select an IP",onChange:g=>a(o,g),options:v,overflowPortal:!0,placeholder:"Select an IP",value:j})}),t?s.jsx(b,{sm:2,sx:{[l.breakpoints.down("sm")]:{width:"100%"}},children:s.jsx(Ce,{buttonType:"outlined","data-qa-remove-shared-ip":!0,disabled:p,onClick:()=>t(o),sx:{[l.breakpoints.down("sm")]:{margin:"-16px 0 0 -26px"}},children:"Remove"})}):null]},o)}),Gn=C(ve,{label:"StyledSelect"})({marginTop:0,width:"100%"}),me=(e,n)=>({mode:"none",sourceIP:e,sourceIPsLinodeID:n}),Ye=(e,n)=>(e==null?void 0:e.filter(t=>t.route_target===(n==null?void 0:n.substring(0,n.indexOf("/")))).map(t=>`${t.range}/${t.prefix}`))??[],Wn=e=>{const{linodeId:n,onClose:t,open:a,readOnly:o}=e,r=ne(),{mutateAsync:u}=bn(),{data:p}=le(n,a),{data:l}=de(n),v=(l==null?void 0:l.ipv4.public.map(i=>i.address))??[],j=(l==null?void 0:l.ipv4.private.map(i=>i.address))??[],g=[...v,...j],[D,I]=m.useState(g.reduce((i,d)=>({...i,[d]:me(d,n)}),{})),[f,w]=m.useState(void 0),[y,q]=m.useState(""),[W,M]=m.useState(!1),[T,z]=m.useState("");m.useEffect(()=>{w(void 0),q("")},[a]);const F=m.useRef(_s(500,!1,i=>{z(i)})).current,{data:U,error:k,isLoading:N}=os({},{label:{"+contains":T||void 0},region:p==null?void 0:p.region},a),{data:E,error:L,isLoading:A}=hs(),Q=(U??[]).filter(i=>i.id!==n),H=i=>d=>{const P=d.value,h=Q[0],S=ie(zn(i,P),he(()=>Yn(P),Un(i,R=>me(R.sourceIP,R.sourceIPsLinodeID))),he(pn(()=>Xe(P)||Vn(P),ie(Fs,ze(V.selectedLinodeID(i)))),Ze(i,h.id)),he(()=>Xe(P),ie(Ke(i,h.ipv4[0]),Je(i,()=>{const R=Ye(E,h.ipv6);return[...h.ipv4,...R]}))));I(R=>S(R))},Y=i=>d=>{const P=ie(Ze(i,d.value),he(ie(_e("swap"),ze(V.mode(i))),ie(Je(i,()=>{const h=Q.find(S=>S.id===Number(d.value));if(h){const S=Ye(E,h==null?void 0:h.ipv6);return[...h.ipv4,...S]}return[]}),Hn(i,()=>{const h=Q.find(S=>S.id===Number(d.value));if(h)return h.ipv4[0]}))));I(h=>P(h))},ce=i=>d=>{I(Ke(i,d.value))},te=(i,d,P)=>{const h=[{label:"Move To",value:"move"},{label:"Swap With",value:"swap"}];return s.jsxs(b,{container:!0,spacing:2,sx:{width:"100%"},children:[s.jsx(b,{sx:{alignItems:"center",display:"flex",[r.breakpoints.down("sm")]:{width:"100%"}},children:s.jsx(c,{sx:{marginTop:0,[r.breakpoints.up("sm")]:{width:175},width:"100%"},variant:"body1",children:i.sourceIP})}),s.jsx(we,{children:s.jsx(ve,{textFieldProps:{dataAttrs:{"data-qa-ip-transfer-action-menu":i.mode}},value:i.mode==="none"?null:h.find(S=>S.value===i.mode),disabled:o,hideLabel:!0,isClearable:!1,label:`Select Action for IP Address ${i.sourceIP}`,noMarginTop:!0,onChange:H(i.sourceIP),options:h,overflowPortal:!0,placeholder:"Select Action"})}),d&&d(i),P&&P(i)]},i.sourceIP)},K=({selectedLinodeID:i,sourceIP:d})=>{const P=Q.map(S=>({label:S.label,value:S.id})),h=P.find(S=>S.value===i);return s.jsx(we,{xs:12,children:s.jsx(ve,{textFieldProps:{dataAttrs:{"data-qa-linode-select":!0}},disabled:o||Q.length===1,errorText:k==null?void 0:k[0].reason,hideLabel:!0,isClearable:!1,isLoading:N||A,label:"Select Linode",noMarginTop:!0,onChange:Y(d),onInputChange:F,options:P,overflowPortal:!0,value:h})})},ue=({selectedIP:i,selectedLinodesIPs:d,sourceIP:P})=>{const h=d.map(R=>({label:R,value:R})),S=h.find(R=>R.value===i);return s.jsx(we,{xs:12,children:s.jsx(ve,{textFieldProps:{dataAttrs:{"data-qa-swap-ip-action-menu":!0}},disabled:o,hideLabel:!0,isClearable:!1,label:"Select IP Address",noMarginTop:!0,onChange:ce(P),options:h,overflowPortal:!0,value:S})})},re=Ms(g);m.useEffect(()=>{_e(re,g)||I(g.reduce((i,d)=>(i[d]=me(d,n),i),{}))},[g,n,re]);const Z=i=>Kn(i)?te(i):ms(i)?te(i,K):xs(i)?te(i,K,ue):null,pe=()=>{if(M(!0),w(void 0),q(""),!Object.values(D).find(d=>d.mode!=="none")){w([{reason:"Please select an action."}]),M(!1);return}u(Jn(D,(p==null?void 0:p.region)??"")).then(()=>{M(!1),w(void 0),q("IP transferred successfully.")}).catch(d=>{const P=Re(d,"Unable to transfer IP addresses at this time. Please try again later.");w(us(P)),M(!1)})},B=()=>{w(void 0),q(""),I(g.reduce((i,d)=>({...i,[d]:me(d,n)}),{}))};return s.jsxs(rs,{fullWidth:!0,onClose:t,open:a,title:"IP Transfer",children:[f&&s.jsx(b,{xs:12,children:f.map(({reason:i},d)=>s.jsx(G,{text:i,variant:"error"},d))}),y&&s.jsx(b,{xs:12,children:s.jsx(G,{text:y,variant:"success"})}),s.jsx(b,{lg:8,sm:12,xl:6,children:s.jsx(c,{sx:{marginBottom:r.spacing(2)},children:"If you have two Linodes in the same data center, you can use the IP transfer feature to switch their IP addresses. This could be useful in several situations. For example, if you’ve built a new server to replace an old one, you could swap IP addresses instead of updating the DNS records."})}),s.jsxs(b,{container:!0,spacing:2,xs:12,children:[!N&&!A&&L?s.jsx(G,{text:"There was an error loading IPv6 Ranges",variant:"error"}):null,(N||A)&&T===""?s.jsx("div",{style:{display:"flex",justifyContent:"center"},children:s.jsx(je,{mini:!0})}):s.jsxs(s.Fragment,{children:[s.jsxs(b,{container:!0,spacing:2,sx:{width:"100%"},children:[s.jsx(b,{sx:{[r.breakpoints.up("sm")]:{width:`calc(175px + ${r.spacing(2)})`},width:"100%"},"data-qa-transfer-ip-label":!0,children:s.jsx(c,{children:"IP Address"})}),s.jsx(b,{sx:{[r.breakpoints.down("sm")]:{display:"none"}},children:s.jsx(c,{children:"Actions"})})]}),s.jsx(b,{sx:{paddingTop:0},xs:12,children:s.jsx(Ae,{spacingBottom:0})}),Q.length===0&&T===""?s.jsx(c,{sx:{color:r.color.grey1,marginTop:r.spacing(2)},children:"You have no other linodes in this Linode’s data center with which to transfer IPs."}):s.jsx(b,{container:!0,spacing:2,sx:{width:"100%"},children:Object.values(D).map(Z)})]})]}),s.jsx(_,{primaryButtonProps:{"data-testid":"ip-transfer-save",disabled:o||Q.length===0,label:"Save",loading:W,onClick:pe},secondaryButtonProps:{"data-testid":"ip-transfer-reset",disabled:W||Q.length===0,label:"Reset Form",onClick:B}})]})},we=C(b,{label:"StyledAutoGrid"})(({theme:e})=>({minWidth:175,[e.breakpoints.up("sm")]:{flexBasis:"auto",maxWidth:"auto"}})),V={ip:e=>J([e]),mode:e=>J([e,"mode"]),selectedIP:e=>J([e,"selectedIP"]),selectedLinodeID:e=>J([e,"selectedLinodeID"]),selectedLinodesIPs:e=>J([e,"selectedLinodesIPs"]),sourceIP:e=>J([e,"sourceIP"]),sourceIPsLinodeID:e=>J([e,"sourceIPsLinodeID"])},zn=(e,n)=>Be(V.mode(e),n),Ke=(e,n)=>Be(V.selectedIP(e),n),Ze=(e,n)=>Be(V.selectedLinodeID(e),n),Je=(e,n)=>ke(V.selectedLinodesIPs(e),n),Hn=(e,n)=>ke(V.selectedIP(e),n),Un=(e,n)=>ke(V.ip(e),n),Vn=e=>e==="move",Xe=e=>e==="swap",Yn=e=>e==="none",Kn=e=>e.mode==="none",ms=e=>e.mode==="move",xs=e=>e.mode==="swap",Zn=(e,n)=>ms(n)?[...e,{address:n.sourceIP,linode_id:n.selectedLinodeID}]:xs(n)?[...e,{address:n.sourceIP,linode_id:n.selectedLinodeID},{address:n.selectedIP,linode_id:n.sourceIPsLinodeID}]:e,Jn=(e,n)=>({assignments:Object.values(e).reduce(Zn,[]),region:n}),Xn=e=>{const{ip:n}=e,{data:t}=ls(),a=t==null?void 0:t.find(o=>o.id===(n==null?void 0:n.region));return s.jsx(oe,{onClose:e.onClose,open:e.open,title:"Details for IP",children:n&&s.jsxs(m.Fragment,{children:[s.jsxs(X,{"data-qa-ip-address-heading":!0,children:[s.jsx(c,{variant:"h3",children:"Address"}),s.jsx(c,{"data-qa-ip-address":!0,variant:"body1",children:n.address})]}),s.jsxs(X,{"data-qa-gateway-heading":!0,children:[s.jsx(c,{variant:"h3",children:"Gateway"}),s.jsx(c,{"data-qa-gateway":!0,variant:"body1",children:n.gateway})]}),s.jsxs(X,{"data-qa-subnet-heading":!0,children:[s.jsx(c,{variant:"h3",children:"Subnet Mask"}),s.jsx(c,{"data-qa-subnet":!0,variant:"body1",children:n.subnet_mask})]}),s.jsxs(X,{"data-qa-type-heading":!0,children:[s.jsx(c,{variant:"h3",children:"Type"}),s.jsx(c,{"data-qa-type":!0,variant:"body1",children:n.type})]}),s.jsxs(X,{"data-qa-public-heading":!0,children:[s.jsx(c,{variant:"h3",children:"Public"}),s.jsx(c,{"data-qa-public":!0,variant:"body1",children:n.public?"Yes":"No"})]}),n.rdns&&s.jsxs(X,{"data-qa-rdns-heading":!0,children:[s.jsx(c,{variant:"h3",children:"RDNS"}),s.jsx(c,{"data-qa-rdns":!0,variant:"body1",children:n.rdns})]}),s.jsxs(X,{"data-qa-region-heading":!0,style:{border:0,paddingBottom:0},children:[s.jsx(c,{variant:"h3",children:"Region"}),s.jsx(c,{"data-qa-region":!0,variant:"body1",children:(a==null?void 0:a.label)??n.region})]}),s.jsx(_,{secondaryButtonProps:{"data-testid":"cancel",label:"Close",onClick:e.onClose}})]})})},X=C("div",{label:"StyledSectionDiv"})(({theme:e})=>({borderBottom:`1px solid ${e.palette.divider}`,marginBottom:e.spacing(2),paddingBottom:e.spacing(2)})),et=e=>{const{linodeId:n,onClose:t,open:a,selectedRange:o}=e,{data:r}=le(n,a),{data:u}=Oe({},{region:r==null?void 0:r.region},r!==void 0&&a),p=o?Ee(o.range,o.prefix,u):[];return s.jsx(oe,{onClose:t,open:a,title:"View Reverse DNS",children:s.jsx("div",{children:p.map(l=>s.jsxs(st,{children:[s.jsx(c,{children:l.address}),s.jsx(c,{children:l.rdns||""})]},l.address))})})},st=C("div",{label:"StyledDiv"})(({theme:e})=>({marginBottom:e.spacing(2)})),nt=e=>{const{range:n}=e,t=n&&n.region||"",{data:a}=ls(),o=a==null?void 0:a.find(r=>r.id===t);return s.jsx(oe,{onClose:e.onClose,open:e.open,title:"Details for IP Range",children:e.range&&s.jsxs(m.Fragment,{children:[s.jsxs(es,{children:[s.jsx(c,{variant:"h3",children:"IP Range"}),s.jsxs(c,{variant:"body1",children:[e.range.range," / ",e.range.prefix," routed to"," ",e.range.route_target]})]}),s.jsxs(es,{style:{border:0,paddingBottom:0},children:[s.jsx(c,{variant:"h3",children:"Region"}),s.jsx(c,{variant:"body1",children:(o==null?void 0:o.label)??t})]}),s.jsx(_,{secondaryButtonProps:{"data-testid":"cancel",label:"Close",onClick:e.onClose}})]})})},es=C("div",{label:"StyledDiv"})(({theme:e})=>({borderBottom:`1px solid ${e.palette.divider}`,marginBottom:e.spacing(2),paddingBottom:e.spacing(2)})),tt="ips",Vt=e=>{const{linodeID:n}=e,{data:t}=Gs(),{data:a,error:o,isLoading:r}=de(n),u=sn(t,n)==="read_only",{isVPCOnlyLinode:p}=hn(n),[l,v]=m.useState(),[j,g]=m.useState(),[D,I]=m.useState(!1),[f,w]=m.useState(!1),[y,q]=m.useState(!1),[W,M]=m.useState(!1),[T,z]=m.useState(!1),[F,U]=m.useState(!1),[k,N]=m.useState(!1),[E,L]=m.useState(!1),[A,Q]=m.useState(!1),[H,Y]=m.useState(!1),Z={handleOpenEditRDNS:B=>{v(B),z(!0)},handleOpenEditRDNSForRange:B=>{g(B),U(!0)},handleOpenIPV6Details:B=>{g(B),Q(!0)},openRemoveIPDialog:B=>{v(B),I(!0)},openRemoveIPRangeDialog:B=>{w(!0),g(B)}};if(r)return s.jsx(je,{});if(o)return s.jsx(Ws,{errorText:o==null?void 0:o[0].reason});if(!a)return null;const pe=()=>{const B=at(a);return s.jsxs("div",{style:{marginTop:20},children:[s.jsxs(On,{alignItems:"flex-end",container:!0,justifyContent:"space-between",spacing:1,children:[s.jsx(b,{className:"p0",children:s.jsx(Bn,{variant:"h3",children:"IP Addresses"})}),s.jsxs(kn,{children:[s.jsxs(zs,{smDown:!0,children:[s.jsx(Ce,{buttonType:"secondary",onClick:()=>N(!0),children:"IP Transfer"}),s.jsx(Ce,{buttonType:"secondary",onClick:()=>L(!0),style:{marginRight:16},children:"IP Sharing"})]}),s.jsx(Us,{label:"Add an IP Address",onClick:()=>Y(!0)})]})]}),s.jsx(Hs,{style:{padding:0},children:s.jsx(Vs,{data:B,order:"asc",orderBy:"type",children:({data:i,handleOrderChange:d,order:P,orderBy:h})=>s.jsxs(Ks,{"aria-label":"IPv4 Addresses",id:tt,children:[s.jsx(rn,{children:s.jsxs(ds,{children:[s.jsx($,{style:{width:"15%"},children:"Address"}),s.jsx(Js,{active:h==="type",direction:P,handleClick:d,label:"type",style:{width:"10%"},children:"Type"}),s.jsx($,{style:{width:"10%"},children:"Default Gateway"}),s.jsx($,{style:{width:"10%"},children:"Subnet Mask"}),s.jsx($,{style:{borderRight:"none",width:"20%"},children:"Reverse DNS"}),s.jsx($,{style:{borderLeft:"none",width:"20%"}})]})}),s.jsx(Zs,{children:i.map(S=>m.createElement(qn,{...S,...Z,isVPCOnlyLinode:p&&S.type==="IPv4 – Public",key:S.address,linodeId:n,readOnly:u}))})]})})})]})};return s.jsxs("div",{children:[pe(),s.jsx(Xn,{ip:l,onClose:()=>M(!1),open:W}),s.jsx(nt,{onClose:()=>q(!1),open:y,range:j}),s.jsx(Tn,{ip:l,onClose:()=>z(!1),open:T}),s.jsx($n,{linodeId:n,onClose:()=>U(!1),open:F,range:j}),s.jsx(et,{linodeId:n,onClose:()=>Q(!1),open:A,selectedRange:j}),s.jsx(Rn,{linodeId:n,onClose:()=>Y(!1),open:H,readOnly:u}),s.jsx(Wn,{linodeId:n,onClose:()=>N(!1),open:k,readOnly:u}),s.jsx(Nn,{linodeId:n,onClose:()=>L(!1),open:E,readOnly:u}),l&&s.jsx(Ln,{address:l.address,linodeId:n,onClose:()=>I(!1),open:D}),j&&s.jsx(Dn,{onClose:()=>w(!1),open:f,range:j})]})},at=e=>{if(!e)return[];const{ipv4:n,ipv6:t}=e,a=[...xe(n.public,"Public"),...xe(n.private,"Private"),...xe(n.reserved,"Reserved"),...xe(n.shared,"Shared")];return t!=null&&t.slaac&&a.push(Le(t.slaac,"SLAAC")),t!=null&&t.link_local&&a.push(Le(t==null?void 0:t.link_local,"Link Local")),a.push(...[...t?t.global:[]].map(o=>({_range:o,address:`${o.range}/${o.prefix}`,gateway:"",rdns:"",subnetMask:"",type:"IPv6 – Range"}))),a},xe=(e,n)=>e.map(t=>Le(t,n)),Le=(e,n)=>({_ip:e,address:e.address,gateway:e.gateway??"",rdns:e.rdns??"",subnetMask:e.subnet_mask??"",type:it(e,n)}),it=(e,n)=>{let t="";return t+=e.type==="ipv4"?"IPv4":"IPv6",t+=" – ",n==="Reserved"?t+=e.public?"Reserved (public)":"Reserved (private)":t+=n,t};export{Vt as L,Ot as S,Wt as a,Gt as b,gn as c,zt as d,Ut as e,Ht as f,Bt as g,Et as h,qt as i,tt as j,Qt as k,Mt as l,Nt as m,$t as n,Ft as o,At as p,kt as q,_t as s,hn as u};
