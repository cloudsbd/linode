import{aW as g,j as t,B as U,cb as u,s as C,c1 as b,r as j,T as c,cn as B,cP as E,g as G,co as y,mj as F}from"./index-Eksrs3uK.js";import{D as R}from"./Drawer-A9yKjC3Z.js";import{T as k,a as v,b as N,c as O}from"./TableRow-phXfWUGW.js";import{T as z}from"./TableRowEmpty-aXmC67-Z.js";import{w as m}from"./useClientLastUpdated-a0PNleVi.js";import{T as A}from"./TableHead-Si_pzkLK.js";import{a as V,g as W,c as H,k as P,l as K,m as q}from"./utilities-JekaXHyt.js";const J=e=>{const{lvPackage:n}=e,r=g();return t.jsxs(k,{ariaLabel:n.name,children:[t.jsx(v,{parentColumn:"Package",children:n.name}),t.jsxs(v,{parentColumn:"Installed Version / Latest Version",children:[t.jsx("div",{children:n.current}),t.jsx(U,{color:r.color.green,children:n.new})]})]})},de=m(e=>e.clientID)(e=>{const{clientLabel:n,isOpen:r,longviewClientData:o,onClose:s}=e,i=g(),a=u([],["Packages"],o);return t.jsx(R,{onClose:s,open:r,title:`${n}: Package Updates`,children:t.jsxs(N,{children:[t.jsx(A,{children:t.jsxs(k,{children:[t.jsx(v,{style:{width:"40%"},children:"Package"}),t.jsxs(v,{children:["Installed Version"," ","/"," ",t.jsx(U,{component:"span",color:i.color.green,children:"Latest Version"})]})]})}),t.jsx(O,{children:a.length>0?a.map((l,d)=>t.jsx(J,{lvPackage:l},`package-drawer-row-${d}`)):t.jsx(z,{colSpan:12})})]})})}),M=["width","height","innerTextFontSize"],Q=C("div",{shouldForwardProp:b(M)})(({height:e,innerTextFontSize:n,theme:r,width:o})=>({color:r.color.headline,fontSize:n||r.spacing(2.5),position:"absolute",textAlign:"center",top:`calc(${e}px + ${r.spacing(1.25)})`,width:o})),X=C("div",{shouldForwardProp:b(M)})(({height:e,theme:n,width:r})=>({color:n.palette.text.primary,fontSize:"1rem",position:"absolute",textAlign:"center",top:`calc(${e+30}px / 2)`,width:r})),Y=C("div",{shouldForwardProp:b(M)})(({height:e,theme:n,width:r})=>({height:`calc(${e}px + ${n.spacing(3.75)})`,position:"relative",width:r})),p=j.memo(e=>{const n=g(),r=e.width||300,o=e.height||300,s=e.max===0&&e.value===0?1:e.max-e.value<0?0:e.max-e.value,i=[{backgroundColor:[e.filledInColor||n.palette.primary.main,e.nonFilledInColor||n.color.grey2],borderWidth:0,data:[e.value,s],hoverBackgroundColor:[e.filledInColor||n.palette.primary.main,e.nonFilledInColor||n.color.grey2]}],a={animation:{animateRotate:!1,animateScale:!1},circumference:1.5*Math.PI,cutoutPercentage:70,events:[],legend:{display:!1},maintainAspectRatio:!1,responsive:!0,rotation:-1.25*Math.PI},l=j.useRef(null);return j.useEffect(()=>{l.current&&new V.Chart(l.current.getContext("2d"),{data:{datasets:i},options:a,type:"doughnut"})}),t.jsxs(Y,{"data-testid":"gauge-wrapper",height:o,width:r,children:[t.jsx("canvas",{height:o,ref:l}),e.innerText&&t.jsx(X,{"data-testid":"gauge-innertext",height:o,width:r,children:e.innerText}),e.subTitle&&t.jsx(Q,{"data-testid":"gauge-subtext",height:o,innerTextFontSize:e.innerTextFontSize,width:r,children:e.subTitle})]})}),w={height:110,width:"100%"},ue=e=>{const n=u(0,["SysInfo","cpu","cores"],e),r=S(e.CPU);return $(r,n)},ge=m(e=>e.clientID)(e=>{const{lastUpdatedError:n,longviewClientData:r,longviewClientDataError:o,longviewClientDataLoading:s}=e,i=g(),a=u(0,["SysInfo","cpu","cores"],r),l=S(r.CPU),d=$(l,a);return t.jsx(p,{...w,innerText:Z(d||0,s,!!o||!!n),subTitle:t.jsxs(t.Fragment,{children:[t.jsx(c,{children:t.jsx("strong",{children:"CPU"})}),!o&&!s&&t.jsx(c,{children:B("Core","Cores",a||0)})]}),filledInColor:i.graphs.blue,max:100*a,value:l})}),S=(e={})=>{let n=0;return Object.keys(e).forEach(r=>{const o=e[r];Object.keys(o).forEach(s=>{const i=u(0,[s,0,"y"],o);n+=i})}),n},$=(e,n)=>{if(n<0)return 0;const r=E(0,100*n)(e);return Math.round(r)},Z=(e,n,r)=>r?"Error":n?"Loading...":`${e}%`,_=e=>{var f;const{lastUpdatedError:n,longviewClientData:r,longviewClientDataError:o,longviewClientDataLoading:s}=e,i=g(),a=ee(((f=r==null?void 0:r.Network)==null?void 0:f.Interface)??{}),l=()=>{if(o||n)return{innerText:"Error",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Network"})})};if(s)return{innerText:"Loading...",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Network"})})};const x=a*8,h=W(x);return{innerText:`${Math.round(H(x,h))} ${h}/s`,subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Network"})})}},d=134217728;return t.jsx(p,{...w,filledInColor:i.graphs.green,max:d,value:a,...l()})},he=G(j.memo,m(e=>e.clientID))(_),ee=e=>Object.values(e).reduce((n,r)=>(typeof r=="object"&&(n+=Object.values(r).reduce((o,s)=>{var i;return o+=((i=s==null?void 0:s[0])==null?void 0:i.y)??0,o},0)),n),0),xe=e=>{const n=P(e.Disk);return n?n.total-n.free:0},me=m(e=>e.clientID)(e=>{const{lastUpdatedError:n,longviewClientData:r,longviewClientDataError:o,longviewClientDataLoading:s}=e,i=g(),a=P(r.Disk),l=a?a.total-a.free:0;return t.jsx(p,{...w,innerText:te(y(l).formatted,s,!!o||!!n),subTitle:t.jsxs(t.Fragment,{children:[t.jsx(c,{children:t.jsx("strong",{children:"Storage"})}),!o&&!s&&a&&t.jsx(c,{children:y(a.total).formatted})]}),filledInColor:i.graphs.orange,max:a?a.total:0,value:l})}),te=(e,n,r)=>r?"Error":n?"Loading...":e,fe=m(e=>e.clientID)(e=>{const{lastUpdatedError:n,longviewClientData:r,longviewClientDataError:o,longviewClientDataLoading:s}=e,i=g(),a=u(0,["Load",0,"y"],r),l=u(0,["SysInfo","cpu","cores"],r),d=()=>o||n?{innerText:"Error",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Load"})})}:s?{innerText:"Loading...",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Load"})})}:{innerText:`${(a||0).toFixed(2)}`,subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Load"})})};return t.jsx(p,{...w,filledInColor:i.graphs.yellow,max:l,value:a,...d()})}),je=m(e=>e.clientID)(e=>{const{lastUpdatedError:n,longviewClientData:r,longviewClientDataError:o,longviewClientDataLoading:s}=e,i=g(),a=u(0,["Memory","real","used",0,"y"],r),l=u(0,["Memory","real","free",0,"y"],r),d=u(0,["Memory","real","buffers",0,"y"],r),f=u(0,["Memory","real","cache",0,"y"],r),x=K(a,d,f),h=q(a,l),T=()=>{if(o||n)return{innerText:"Error",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"RAM"})})};if(s)return{innerText:"Loading",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"RAM"})})};const D=x*1024,I=y(D,{unit:D>1073741824?"GB":"MB"}),L=y(h*1024,{unit:"GB"});return{innerText:`${I.value} ${I.unit}`,subTitle:t.jsxs(j.Fragment,{children:[t.jsx(c,{children:t.jsx("strong",{children:"RAM"})}),t.jsx(c,{children:`${L.value} GB`})]})}};return t.jsx(p,{...w,filledInColor:i.graphs.purple,max:h,value:x,...T()})}),ye=m(e=>e.clientID)(e=>{const{lastUpdatedError:n,longviewClientData:r,longviewClientDataError:o,longviewClientDataLoading:s}=e,i=g(),a=u(0,["Memory","swap","free",0,"y"],r),l=u(0,["Memory","swap","used",0,"y"],r),d=l+a,f=()=>{if(o||n)return{innerText:"Error",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Swap"})})};if(s)return{innerText:"Loading",subTitle:t.jsx(c,{children:t.jsx("strong",{children:"Swap"})})};const x=l*1024,h=y(x,{unit:"MB"}),T=y(d*1024,{unit:"MB"});return{innerText:`${h.value} ${h.unit}`,subTitle:t.jsxs(j.Fragment,{children:[t.jsx(c,{children:t.jsx("strong",{children:"Swap"})}),t.jsx(c,{children:`${T.value} MB`})]})}};return t.jsx(p,{...w,filledInColor:i.graphs.red,max:d,value:l,...f()})}),pe=e=>{const n=F.fromObject({seconds:e}),r=Math.floor(n.as("days")),o=Math.floor(n.minus({days:r}).as("hours")),s=Math.floor(n.minus({days:r,hours:o}).as("minutes")),i=Math.floor(n.minus({days:r,hours:o,minutes:s}).as("seconds"));return r>0?`${r}d ${o}h ${s}m`:o>0?`${o}h ${s}m`:s>0?`${s}m ${i}s`:"< 1 minute"};export{ge as C,fe as L,he as N,je as R,ye as S,me as a,de as b,ee as c,ue as d,pe as f,xe as g};
