import{s as l,j as e,m as q,r as L,f5 as W,aW as $,u as z,b9 as A,cW as P,cp as y,B as j,H,f as R,T as t,V as E,$ as d,c3 as _}from"./index-Eksrs3uK.js";import{C as M}from"./CopyTooltip-mIyzAQ7E.js";import{D as F}from"./DateTimeDisplay-bXC9mIcz.js";const O=a=>{const{script:p}=a;return e.jsx(Q,{children:e.jsx(U,{children:e.jsxs("tbody",{"data-qa-script-code":!0,children:[p.split(`
`).map((m,o)=>e.jsxs("tr",{children:[e.jsx(b,{children:o+1}),e.jsx(S,{children:e.jsx(V,{"data-qa-script":!0,children:m})})]},"scriptCodeLine"+o)),e.jsxs("tr",{children:[e.jsx(b,{children:" "}),e.jsx(S,{})]})]})})})},Q=l("div",{label:"StyledContainer"})(({theme:a})=>({border:`1px solid ${a.color.grey2}`,maxWidth:"100%",overflow:"auto"})),U=l("table",{label:"StyledTable"})(({theme:a})=>({backgroundColor:a.color.white,borderCollapse:"collapse",tableLayout:"fixed",width:"100%"})),V=l("pre",{label:"StyledPre"})(({theme:a})=>({color:a.color.headline,fontSize:"1em",margin:0,whiteSpace:"pre-wrap",width:"100%"})),b=l("td",{label:"StyledNumberCell"})(({theme:a})=>({backgroundColor:a.color.grey2,color:a.color.headline,fontSize:14,paddingBottom:`calc(${a.spacing(1)} / 4)`,paddingLeft:a.spacing(.5),paddingRight:a.spacing(.5),paddingTop:`calc(${a.spacing(1)} / 4)`,textAlign:"center",userSelect:"none",width:35})),S=l("td",{label:"StyledCodeCell"})(({theme:a})=>({paddingLeft:a.spacing(1),paddingRight:a.spacing(1)})),Y=q()(a=>({author:{marginBottom:a.spacing(2),marginTop:a.spacing(2)},compatibleImages:{display:"block",marginTop:a.spacing(1)},copyIcon:{"& svg":{height:"1em",width:"1em"},color:a.palette.primary.main,display:"inline-block",position:"relative"},dateTimeDisplay:{display:"inline-block",fontSize:"1rem"},deploymentSection:{fontSize:"1rem",marginTop:a.spacing(1)},deployments:{marginTop:a.spacing(1)},description:{overflowWrap:"anywhere",whiteSpace:"pre-wrap",wordBreak:"normal"},descriptionText:{marginBottom:a.spacing(2)},editBtn:{minWidth:"fit-content"},headerLabel:{maxWidth:"calc(100% - 80px)"},heading:{marginBottom:a.spacing(1)},idSection:{fontSize:"1rem",marginTop:a.spacing(1)},root:{".detailsWrapper &":{padding:a.spacing(4)},backgroundColor:a.bg.bgPaper}})),X=L.memo(a=>{const{data:{deployments_active:p,deployments_total:m,description:o,id:g,images:f,label:u,script:v,updated:T,username:r},userCanModify:k}=a,{classes:s}=Y(),{profile:x}=W(),C=$(),N=z(),{data:I}=A({},{is_public:!0}),w=P(I??[]),c=f.reduce((i,n)=>{const h=w[n];return n?n==="any/all"?(i.available.push(e.jsx(y,{component:"span",label:"Any/All"},n)),i):(h?i.available.push(e.jsx(y,{component:"span",label:h.label},h.id)):i.deprecated.push(e.jsx(y,{component:"span",label:n},n)),i):i},{available:[],deprecated:[]}),B=new URLSearchParams({query:`username:${r}`}).toString(),D=(x==null?void 0:x.username)===r?"/stackscripts/account":`/stackscripts/community?${B}`;return e.jsxs("div",{className:s.root,children:[e.jsxs(j,{sx:{alignItems:"flex-start",display:"flex",justifyContent:"space-between"},children:[e.jsx(H,{className:s.headerLabel,"data-qa-stack-title":u,title:u}),k?e.jsx(R,{onClick:()=>{N.push(`/stackscripts/${g}/edit`)},buttonType:"secondary",className:s.editBtn,children:"Edit"}):null]}),e.jsxs(t,{className:s.author,"data-qa-stack-author":r,variant:"h2",children:["by ",e.jsx(E,{"data-qa-community-stack-link":!0,to:D,children:r})]}),e.jsxs("div",{className:s.deployments,"data-qa-stack-deployments":!0,children:[e.jsxs(t,{className:s.deploymentSection,children:[e.jsx("strong",{children:m})," deployments"]}),e.jsxs(t,{className:s.deploymentSection,children:[e.jsx("strong",{children:p})," still active"]}),e.jsxs(t,{className:s.deploymentSection,children:[e.jsx("strong",{children:"Last revision: "}),e.jsx(F,{className:s.dateTimeDisplay,value:T})]}),e.jsxs(t,{className:s.idSection,children:[e.jsx("strong",{children:"StackScript ID: "}),g,e.jsx(M,{className:s.copyIcon,text:g.toString()})]}),e.jsx(d,{spacingBottom:16,spacingTop:16})]}),o&&e.jsxs("div",{className:s.description,children:[e.jsx(t,{className:s.heading,variant:"h3",children:"Description"}),e.jsx(t,{className:s.descriptionText,"data-qa-stack-description":!0,children:o}),e.jsx(d,{spacingBottom:16,spacingTop:16})]}),e.jsxs("div",{children:[e.jsxs("div",{className:s.deploymentSection,"data-qa-compatible-distro":!0,style:{marginTop:0},children:[e.jsx(t,{className:s.heading,variant:"h3",children:"Compatible Images"}),c.available.length>0?c.available:e.jsx(t,{variant:"body1",children:"No compatible images found"}),c.deprecated.length>0?e.jsxs(e.Fragment,{children:[e.jsx(d,{spacingBottom:16,spacingTop:16}),e.jsxs(j,{alignItems:"center",className:s.heading,display:"flex",flexDirection:"row",children:[e.jsx(t,{variant:"h3",children:"Deprecated Images"}),e.jsx(_,{sxTooltipIcon:{marginLeft:C.spacing(),padding:0},status:"help",text:"You must update your StackScript to use a compatible Image to deploy it",tooltipPosition:"bottom"})]}),c.deprecated]}):null]}),e.jsx(d,{spacingBottom:16,spacingTop:16})]}),e.jsx(t,{className:s.heading,variant:"h3",children:"Script"}),e.jsx(O,{script:v})]})});export{X as S};
