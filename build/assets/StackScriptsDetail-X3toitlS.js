import{f5 as T,bp as w,b as A,u as B,e as D,r,jH as H,e9 as U,j as s,C as G,hh as I,ak as N,jI as O,jJ as R,an as _}from"./index-Eksrs3uK.js";import{L as F}from"./LandingHeader-JXAVBhqg.js";import{S as J}from"./StackScript-_ub41xk0.js";import"./CopyTooltip-mIyzAQ7E.js";import"./index-Y5esPPk-.js";import"./DateTimeDisplay-bXC9mIcz.js";const Y=()=>{const{_hasGrant:m,_isRestrictedUser:b,profile:a}=T(),{data:n}=w(),{stackScriptId:c}=A(),S=B(),h=D(),[k,i]=r.useState(""),[f,l]=r.useState(!0),[x,o]=r.useState(void 0),[t,d]=r.useState(void 0),j=a==null?void 0:a.username,L=b&&!m("add_linodes"),g=(a==null?void 0:a.restricted)??!1,C=(n==null?void 0:n.stackscript)??[],u=!!(t!=null&&t.mine&&H(g,C,+c));r.useEffect(()=>{U(+c).then(e=>{l(!1),d(e)}).catch(e=>{l(!1),o(e)})},[c]);const E=()=>{if(!t)return;const e=O(t.username,t.id,j);S.push(e)},v=e=>t===void 0?Promise.resolve():(o(void 0),R(t.id,{label:e}).then(()=>{i(e),d({...t,label:e})}).catch(p=>(i(e),o(_(p,"Error updating label","label")),Promise.reject(p)))),y=()=>{i(t==null?void 0:t.label),o(void 0)};if(f)return s.jsx(G,{});if(!t)return s.jsx(I,{});const M=N(["label"],x).label,P=k??t.label;return s.jsxs(s.Fragment,{children:[s.jsx(F,{breadcrumbProps:{crumbOverrides:[{label:"StackScripts",linkTo:t.mine?"/stackscripts/account":"/stackscripts/community",position:1}],labelOptions:{noCap:!0},onEditHandlers:u?{editableTextTitle:P,errorText:M,onCancel:y,onEdit:v}:void 0,pathname:h.pathname},createButtonText:"Deploy New Linode",disabledCreateButton:L,docsLabel:"Docs",docsLink:"https://www.linode.com/docs/platform/stackscripts",onButtonClick:E,title:t.label}),s.jsx("div",{className:"detailsWrapper",children:s.jsx(J,{data:t,userCanModify:u})})]})};export{Y as StackScriptsDetail,Y as default};
