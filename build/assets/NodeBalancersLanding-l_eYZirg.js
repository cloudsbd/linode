import{aW as S,bD as k,u as w,j as e,W as h,jc as L,V as f,ex as P,r as x,s as I,eN as v,Q as D,iF as A,T as $,a1 as y,jG as M,E as z,C as E,dk as F}from"./index-Eksrs3uK.js";import{L as R}from"./LandingHeader-JXAVBhqg.js";import{P as H}from"./PaginationFooter-NHWf7fW2.js";import{T as N,a,b as O,c as Q}from"./TableRow-phXfWUGW.js";import{T as B}from"./TableSortCell-hcsagFzN.js";import{u as _}from"./useOrder-rsUMHEuj.js";import{u as U}from"./usePagination-Sxr0Tlb7.js";import{N as W}from"./NodeBalancerDeleteDialog-vGZOjk5D.js";import{I as q}from"./IPAddress-ZmG9OcMn.js";import{R as G}from"./RegionIndicator-N3gnZFRh.js";import{A as K}from"./ActionMenu-4CPisA_2.js";import{I as V}from"./InlineMenuAction-d5mRENST.js";import{S as J}from"./Skeleton-iwmO4Yae.js";import{T as X}from"./TableHead-Si_pzkLK.js";import"./OrderBy-H-bWJCPy.js";import"./splitAt-pbTnq2Oi.js";import"./TypeToConfirmDialog-9yjZCCL0.js";import"./TypeToConfirm-koQ3u5up.js";import"./CopyTooltip-mIyzAQ7E.js";import"./index-Y5esPPk-.js";import"./ShowMore-4P5e_z46.js";import"./PublicIpsUnassignedTooltip-A07mEsGp.js";import"./ipUtils-P4y3JNCT.js";import"./ipaddr-jlottelM.js";const Y=l=>{const t=S(),p=k(t.breakpoints.down("lg")),d=w(),{label:m,nodeBalancerId:r,toggleDialog:u}=l,s=[{onClick:()=>{d.push(`/nodebalancers/${r}/configurations`)},title:"Configurations"},{onClick:()=>{d.push(`/nodebalancers/${r}/settings`)},title:"Settings"},{onClick:()=>{u(r,m)},title:"Delete"}];return e.jsxs(e.Fragment,{children:[!p&&s.map(i=>e.jsx(V,{actionText:i.title,onClick:i.onClick},i.title)),e.jsx(h,{lgUp:!0,children:e.jsx(K,{actionsList:s,ariaLabel:`Action menu for NodeBalancer ${r}`})})]})},Z=l=>{const{id:t,ipv4:p,label:d,onDelete:m,region:r,transfer:u}=l,{data:s}=L(t),i=(s==null?void 0:s.reduce((n,o)=>o.nodes_status.up+n,0))??0,g=(s==null?void 0:s.reduce((n,o)=>o.nodes_status.down+n,0))??0;return e.jsxs(N,{ariaLabel:d,children:[e.jsx(a,{children:e.jsx(f,{tabIndex:0,to:`/nodebalancers/${t}`,children:d})}),e.jsx(h,{smDown:!0,children:e.jsxs(a,{noWrap:!0,children:[e.jsxs("span",{children:[i," up"]})," - ",e.jsxs("span",{children:[g," down"]})]})}),e.jsxs(h,{mdDown:!0,children:[e.jsx(a,{children:P(u.total)}),e.jsxs(a,{children:[s?null:e.jsx(J,{}),(s==null?void 0:s.length)===0&&"None",s==null?void 0:s.map(({id:n,port:o},j)=>e.jsxs(x.Fragment,{children:[e.jsx(f,{to:`/nodebalancers/${t}/configurations/${n}`,children:o}),j<s.length-1?", ":""]},n))]})]}),e.jsx(a,{children:e.jsx(q,{ips:[p],isHovered:!0,showMore:!0})}),e.jsx(h,{smDown:!0,children:e.jsx(a,{"data-qa-region":!0,children:e.jsx(G,{region:r})})}),e.jsx(a,{actionCell:!0,children:e.jsx(Y,{label:d,nodeBalancerId:t,toggleDialog:m})})]},t)},ee=()=>{const l=w();return e.jsxs(x.Fragment,{children:[e.jsx(D,{segment:"NodeBalancers"}),e.jsx(se,{buttonProps:[{children:"Create NodeBalancer",onClick:()=>l.push("/nodebalancers/create")}],icon:A,isEntity:!0,showTransferDisplay:!0,title:"NodeBalancers",children:e.jsxs($,{variant:"subtitle1",children:[e.jsx(y,{to:"https://www.linode.com/docs/platform/nodebalancer/getting-started-with-nodebalancers/",children:"Learn how to use NodeBalancers with your Linode"})," or ",e.jsx(y,{to:"https://www.linode.com/docs/",children:"visit our guides and tutorials."})]})})]})},se=I(v,{label:"StyledPlaceholder"})(({theme:l})=>({padding:`${l.spacing(10)} 0 0 0 !important`})),C="nodebalancers",Te=()=>{const[l,t]=x.useState(!1),[p,d]=x.useState(-1),m=w(),r=U(1,C),{handleOrderChange:u,order:s,orderBy:i}=_({order:"asc",orderBy:"label"},C),g={"+order":s,"+order_by":i},{data:n,error:o,isLoading:j}=M({page:r.page,page_size:r.pageSize},g),b=n==null?void 0:n.data.find(c=>c.id===p),T=c=>{d(c),t(!0)};return o?e.jsx(z,{errorText:(o==null?void 0:o[0].reason)??"Unable to load your NodeBalancers"}):j?e.jsx(E,{}):(n==null?void 0:n.results)===0?e.jsx(ee,{}):e.jsxs(e.Fragment,{children:[e.jsx(D,{segment:"NodeBalancers"}),e.jsx(R,{docsLink:"https://www.linode.com/docs/platform/nodebalancer/getting-started-with-nodebalancers/",entity:"NodeBalancer",onButtonClick:()=>m.push("/nodebalancers/create"),title:"NodeBalancers"}),e.jsxs(O,{children:[e.jsx(X,{children:e.jsxs(N,{children:[e.jsx(B,{active:i==="label",direction:s,handleClick:u,label:"label",children:"Label"}),e.jsx(h,{smDown:!0,children:e.jsx(a,{children:"Backend Status"})}),e.jsxs(h,{mdDown:!0,children:[e.jsx(a,{children:"Transferred"}),e.jsx(a,{children:"Ports"})]}),e.jsx(a,{children:"IP Address"}),e.jsx(h,{smDown:!0,children:e.jsx(B,{active:i==="region",direction:s,handleClick:u,label:"region",children:"Region"})}),e.jsx(a,{})]})}),e.jsx(Q,{children:n==null?void 0:n.data.map(c=>e.jsx(Z,{onDelete:()=>T(c.id),...c},c.id))})]}),e.jsx(H,{count:(n==null?void 0:n.results)??0,eventCategory:"NodeBalancers Table",handlePageChange:r.handlePageChange,handleSizeChange:r.handlePageSizeChange,page:r.page,pageSize:r.pageSize}),e.jsx(F,{spacingTop:18}),e.jsx(W,{id:p,label:(b==null?void 0:b.label)??"",onClose:()=>t(!1),open:l})]})};export{Te as NodeBalancersLanding,Te as default};
