import{g as l,r as m,l as c,h as x,i as g,k,w as S}from"./index-Eksrs3uK.js";class f extends m.Component{checkNonce(s){const{history:t}=this.props,e=c.nonce.get();s&&e===s||(c.nonce.set(""),t.push("/"))}componentDidMount(){const{history:s,location:t}=this.props;if(!t.hash||t.hash.length<2)return s.push("/");const e=x(t.hash.substr(1)),{access_token:n,expires_in:h,scope:i,state:p,token_type:u}=e;if(!n)return s.push("/");const a=t.hash.indexOf("returnTo"),d=(a?t.hash.substr(a+9):null)??"/";this.checkNonce(p);const o=new Date;o.setTime(o.getTime()+ +h*1e3),this.props.dispatchStartSession(n,u,i,o.toString()),s.push(d)}render(){return null}}const P=r=>({dispatchStartSession:(s,t,e,n)=>r(k({expires:n,scopes:e,token:`${t.charAt(0).toUpperCase()}${t.substr(1)} ${s}`}))}),T=g(void 0,P),D=l(T,S)(f);export{f as OAuthCallbackPage,D as default};
