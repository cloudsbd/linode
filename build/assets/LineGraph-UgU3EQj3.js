import{J as l,j as a,B as V,s as u,f as Z,c1 as X,cl as Y,aW as ee,bD as te,r as w,T as R}from"./index-Eksrs3uK.js";import{C as ae,a as D}from"./utilities-JekaXHyt.js";import{b as oe,c as re,a as M,T as v}from"./TableRow-phXfWUGW.js";import{v as ne}from"./visuallyHidden-DVicuktI.js";import{T as se}from"./TableHead-Si_pzkLK.js";/*!
 * chartjs-adapter-luxon v0.2.2
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT license
 */const ie={datetime:l.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:l.TIME_WITH_SECONDS,minute:l.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};ae._adapters._date.override({_id:"luxon",_create:function(e){return l.fromMillis(e,this.options)},formats:function(){return ie},parse:function(e,o){const r=this.options;if(e===null||typeof e>"u")return null;const t=typeof e;return t==="number"?e=this._create(e):t==="string"?typeof o=="string"?e=l.fromFormat(e,o,r):e=l.fromISO(e,r):t==="object"&&!(e instanceof l)?e=l.fromObject(e):e instanceof Date&&(e=l.fromJSDate(e,r)),e.isValid?e.valueOf():null},format:function(e,o){const r=this._create(e);return typeof o=="string"?r.toFormat(o,this.options):r.toLocaleString(o)},add:function(e,o,r){const t={};return t[r]=o,this._create(e).plus(t).valueOf()},diff:function(e,o,r){return this._create(e).diff(this._create(o)).as(r).valueOf()},startOf:function(e,o,r){if(o==="isoWeek"){r=Math.trunc(Math.min(Math.max(0,r),6));const t=this._create(e);return t.minus({days:(t.weekday<r?7:0)+t.weekday-r}).startOf("day").valueOf()}return o?this._create(e).startOf(o).valueOf():e},endOf:function(e,o){return this._create(e).endOf(o).valueOf()}});const le=()=>{D.defaults.global.defaultFontFamily='"LatoWeb", sans-serif',D.defaults.global.defaultFontStyle="700",D.defaults.global.defaultFontSize=13},de=(e,o=2)=>{const r=10**o;return Math.round(e*r)/r},ce=e=>{var i,h;const{accessibleUnit:o,ariaLabel:r,chartInstance:t,hiddenDatasets:p}=e;if(!((h=(i=t==null?void 0:t.config)==null?void 0:i.data)!=null&&h.datasets))return null;const{datasets:b}=t.config.data,C=b.map((x,y)=>{const{data:L,label:c}=x,k=p.includes(y),_=a.jsxs("tr",{children:[a.jsx("th",{children:"Time"}),a.jsx("th",{children:c})]}),m=L&&L.map((H,g)=>{const{t:S,y:j}=H;return a.jsxs("tr",{children:[a.jsx("td",{children:S?l.fromMillis(Number(S)).toLocaleString(l.DATETIME_SHORT):"timestamp unavailable"}),a.jsxs("td",{children:[j!==void 0?Number(j).toFixed(2):"value unavailable",j!==void 0&&o]})]},`accessible-graph-data-body-row-${g}`)});return!k&&a.jsxs("table",{summary:`This table contains the data for the ${r&&c?r+` (${c})`:"graph below"}`,children:[a.jsx("thead",{children:_}),a.jsx("tbody",{children:m})]},`accessible-graph-data-table-${y}`)});return a.jsx(V,{sx:ne,children:C})},ue=u("div")(()=>({display:"flex",flex:1,flexDirection:"column-reverse",width:"100%"})),fe=u("div",{label:"StyledContainer"})(({theme:e})=>({borderTop:`1px solid ${e.borderColors.divider}`,fontSize:"0.875rem",marginLeft:e.spacing(4),marginRight:0,marginTop:e.spacing(.5),paddingTop:e.spacing(.5)})),pe=u("div",{label:"StyledCanvasContainer"})({position:"relative",width:"100%"}),be=u(oe,{label:"StyledTable"})(({theme:e})=>({"& .MuiTableCell-root":{backgroundColor:e.bg.offWhite,border:"none",height:"auto",padding:e.spacing(.5),tableLayout:"fixed"},"& .MuiTableRow-root":{border:0},maxWidth:"600px",[e.breakpoints.down("lg")]:{width:"100%"},[e.breakpoints.down("md")]:{"& .MuiTable-root":{display:"flex"},"& .MuiTableRow-root":{display:"flex",flexBasis:"100%",flexDirection:"column"},maxWidth:"100%"},width:"85%"})),he=u(re,{label:"StyledTableBody"})(({theme:e})=>({[e.breakpoints.down("md")]:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"}})),F=u(M,{label:"StyledTableCell"})(({theme:e})=>({"&:first-of-type":{[e.breakpoints.down("md")]:{marginLeft:"-45px"}},[e.breakpoints.down("md")]:{justifyContent:"normal",minHeight:"auto"}})),me=u(se,{label:"StyledTableHead"})(({theme:e})=>({[e.breakpoints.down("md")]:{"& .MuiTableRow-root":{"&:last-of-type":{marginBottom:0},display:"flex",flexDirection:"column",marginBottom:e.spacing(5.25),marginRight:e.spacing(2),marginTop:e.spacing(5.25)},display:"block"}})),xe=u(Z,{label:"StyledButton"})(({theme:e})=>({"&:focus":{outline:`1px dotted ${e.color.grey3}`},"&:hover":{backgroundColor:"transparent",color:e.color.headline},color:e.color.headline,fontFamily:e.font.normal,fontSize:"0.75rem",justifyContent:"flex-start",margin:0,marginLeft:-2,padding:0})),z=u("span",{label:"StyledButtonElement",shouldForwardProp:X(["hidden","sx"])})(({...e})=>({...e.hidden&&{textDecoration:"line-through"}}));le();const ye={borderJoinStyle:"miter",borderWidth:1,lineTension:0,pointHitRadius:10,pointRadius:0},ge=e=>e>=1e6?e/1e6+"M":e>=1e3?e/1e3+"K":e,De=e=>{const o=ee(),r=te(o.breakpoints.down("md")),t=w.useRef(null),p=w.useRef(null),[b,C]=w.useState(!1),[i,h]=w.useState([]),{accessibleDataTable:x,ariaLabel:y,chartHeight:L,data:c,formatData:k,formatTooltip:_,legendRows:m,nativeLegend:H,rowHeaders:g,showToday:S,suggestedMax:j,tabIndex:$,timezone:I,unit:A}=e,B=g||["Max","Avg","Last"],q=[{afterDatasetsDraw:()=>{b||C(!0)}}],P=s=>{i.includes(s)?h(i.filter(n=>n!==s)):h([...i,s])},N=(s,n,f)=>({animation:{duration:0},legend:{display:n,position:n?"bottom":void 0},maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{adapters:{date:{zone:I}},gridLines:{display:!1},ticks:{fontColor:o.textColors.tableHeader,fontSize:12,fontStyle:"normal"},time:{displayFormats:S?{hour:"HH:00",minute:"HH:mm"}:{hour:"LLL dd",minute:"LLL dd"},stepSize:S?3:5},type:"time"}],yAxes:[{afterFit(d){d.width=35},gridLines:{borderDash:[3,6],drawTicks:!1,zeroLineBorderDashOffset:2,zeroLineWidth:1},ticks:{beginAtZero:!0,callback(d,O){return ge(d)},fontColor:o.textColors.tableHeader,fontSize:12,fontStyle:"normal",maxTicksLimit:8,padding:10,suggestedMax:s??void 0}}]},tooltips:{backgroundColor:"#fbfbfb",bodyFontColor:"#32363C",borderColor:"#999",borderWidth:.5,callbacks:{label:Ce(c,_,f)},caretPadding:10,cornerRadius:0,displayColors:!1,intersect:!1,mode:"index",position:"nearest",titleFontColor:"#606469",xPadding:8,yPadding:10}}),J=()=>c.map((s,n)=>{const f=s.data.reduce((T,d)=>(T.push({t:d[0],y:k?k(d[1]):d[1]}),T),[]);return{backgroundColor:s.backgroundColor,borderColor:s.borderColor,data:f,fill:s.fill,hidden:i.includes(n),label:s.label,...ye}});w.useEffect(()=>{t.current&&(p.current&&p.current.destroy(),p.current=new D.Chart(t.current.getContext("2d"),{data:{datasets:J()},options:N(j,H,A),plugins:q,type:"line"}))});const E={fontSize:"0.75rem"},W={...E,color:o.textColors.tableHeader},U={[o.breakpoints.up("md")]:{width:"38%"}};return a.jsxs(ue,{"data-testid":"linegraph-wrapper",tabIndex:$??0,children:[b&&m&&a.jsx(fe,{children:a.jsxs(be,{"aria-label":`Controls for ${y||"Stats and metrics"}`,noBorder:!0,children:[a.jsx(me,{children:r?c.map(s=>a.jsx(v,{children:B.map((n,f)=>a.jsx(M,{"data-qa-header-cell":!0,children:a.jsx(R,{sx:W,variant:"body1",children:n})},f))},s.label)):a.jsxs(v,{children:[a.jsx(M,{sx:{height:"26px !important"}}),B.map((s,n)=>a.jsx(M,{"data-qa-header-cell":!0,children:a.jsx(R,{sx:W,variant:"body1",children:s})},n))]})}),a.jsx(he,{children:m==null?void 0:m.map((s,n)=>{const f=c[n].backgroundColor,T=c[n].label,d=i.includes(n),{data:O,format:G}=m[n];return a.jsxs(v,{children:[a.jsx(F,{noWrap:!0,sx:U,children:a.jsxs(xe,{"aria-label":`Toggle ${T} visibility`,"data-qa-legend-title":!0,onClick:()=>P(n),children:[a.jsx(z,{sx:{background:f,borderColor:f,borderStyle:"solid",borderWidth:"1px",height:"18px",marginRight:o.spacing(1),width:"18px"},hidden:d}),a.jsx(z,{hidden:d,children:T})]})}),O&&Te(O).map((Q,K)=>a.jsx(F,{parentColumn:g?g[n]:void 0,"data-qa-body-cell":!0,children:a.jsx(R,{sx:{...E,color:o.color.black},variant:"body1",children:G(Q)})},K))]},n)})})]})}),a.jsx(pe,{children:a.jsx("canvas",{"aria-label":y||"Stats and metrics",height:L||300,ref:t,role:"img"})}),(x==null?void 0:x.unit)&&a.jsx(ce,{accessibleUnit:x.unit,ariaLabel:y,chartInstance:p.current,hiddenDatasets:i})]})},Te=e=>[e.max,e.average,e.last],Ce=Y((e,o,r,t,p)=>{const b=t!=null&&t.datasetIndex?e[t==null?void 0:t.datasetIndex]:e[0],C=b.label,i=t!=null&&t.index&&b.data[t==null?void 0:t.index][1]||0,h=o?o(i):de(i);return`${C}: ${h}${r||""}`});export{De as L,de as r,le as s};
