import{ih as hn,ii as Cn,s as C,B as O,T as y,bB as re,bI as _e,bJ as pn,ao as ye,cx as Se,av as ve,r as g,ij as fn,ik as An,j as i,bN as yn,f as H,il as Sn,im as ke,a1 as $,aW as Ue,io as pe,ad as G,ip as vn,af as J,ag as X,au as En,ax as Tn,iq as bn,aw as xn,ir as In,eb as Nn,C as Ee,q as Fe,aa as Ge,G as He,$ as F,is as Rn,m as Ln,it as wn,iu as Bn,cG as On,cm as Pn,ak as Mn,iv as Dn,an as Ve,d0 as jn,cH as _n,iw as kn,E as Un,Q as Fn}from"./index-Eksrs3uK.js";import{u as fe}from"./formik.esm-Kap5lsIh.js";import{L as oe}from"./LinkButton-O1af9aD7.js";import{D as Le}from"./DateTimeDisplay-bXC9mIcz.js";import{I as Gn}from"./InlineMenuAction-d5mRENST.js";import{P as Hn}from"./PaginationFooter-NHWf7fW2.js";import{b as Vn,T as we,a as Q,c as Qn}from"./TableRow-phXfWUGW.js";import{T as Kn}from"./TableRowEmpty-aXmC67-Z.js";import{T as Yn}from"./TableRowError-8gKmGX7P.js";import{T as $n}from"./TableRowLoading-iP7zIRHG.js";import{T as ge}from"./TableSortCell-hcsagFzN.js";import{u as Wn}from"./useOrder-rsUMHEuj.js";import{u as qn}from"./usePagination-Sxr0Tlb7.js";import{T as zn}from"./TableHead-Si_pzkLK.js";import{g as Zn}from"./getAPIErrorFor-OfQrArkQ.js";import{s as Jn}from"./scrollErrorIntoView-6n4Cku1Y.js";import{C as Xn}from"./CopyableTextField-i2WTy2Xt.js";import{F as et}from"./FormControl-CNHz4Ctl.js";import{T as nt}from"./Toggle-AbahDP9J.js";import"./Skeleton-iwmO4Yae.js";import"./OrderBy-H-bWJCPy.js";import"./splitAt-pbTnq2Oi.js";import"./CopyTooltip-mIyzAQ7E.js";import"./index-Y5esPPk-.js";function Qe(){return hn(Cn,arguments)}const tt=C(O,{label:"StyledCodeSentMessageBox"})(({theme:e})=>({marginTop:e.spacing(1.5)})),ot=C(y,{label:"StyledPhoneNumberTitle"})(({theme:e})=>({fontSize:".875rem",marginTop:e.spacing(1.5)})),at=C(O,{label:"StyledButtonContainer"})(({theme:e})=>({gap:e.spacing(),[e.breakpoints.down("md")]:{marginTop:e.spacing(2)}})),it=C(O,{label:"StyledInputContainer"})(({isPhoneInputFocused:e,theme:n})=>({border:n.name==="light"?"1px solid #ccc":"1px solid #222",transition:"border-color 225ms ease-in-out",width:"fit-content",...e&&(n.name==="light"?{borderColor:"#3683dc",boxShadow:"0 0 2px 1px #e1edfa"}:{borderColor:"#3683dc",boxShadow:"0 0 2px 1px #222"})})),rt=C(re,{label:"StyledPhoneNumberInput"})(()=>({"&.Mui-focused":{borderColor:"unset",boxShadow:"none"},"&:focus":{borderColor:"unset",boxShadow:"unset"},border:"unset",minWidth:"300px"})),st=C(_e,{label:"StyledSelect"})(({theme:e})=>({"& .MuiInputBase-input .react-select__indicators svg":{color:`${e.palette.primary.main} !important`,opacity:"1 !important"},"&.Mui-focused":{borderColor:"unset",boxShadow:"none"},"&:focus":{borderColor:"unset",boxShadow:"unset"},border:"unset",height:"34px",width:"70px !important"})),dt=C(y,{label:"StyledLabel"})(({theme:e})=>({color:e.name==="light"?"#555":"#c9cacb",fontSize:".875rem",lineHeight:"1",marginBottom:"8px",marginTop:e.spacing(2),padding:0})),lt=C(pn,{label:"StyledFormHelperText"})(({theme:e})=>({alignItems:"center",color:e.color.red,display:"flex",left:5,top:42,width:"100%"})),me=[{code:"AD",dialingCode:"+376",name:"ANDORRA"},{code:"AE",dialingCode:"+971",name:"UNITED ARAB EMIRATES"},{code:"AF",dialingCode:"+93",name:"AFGHANISTAN"},{code:"AG",dialingCode:"+1",name:"ANTIGUA AND BARBUDA"},{code:"AI",dialingCode:"+1",name:"ANGUILLA"},{code:"AL",dialingCode:"+355",name:"ALBANIA"},{code:"AM",dialingCode:"+374",name:"ARMENIA"},{code:"AO",dialingCode:"+244",name:"ANGOLA"},{code:"AQ",dialingCode:"+672",name:"ANTARCTICA"},{code:"AR",dialingCode:"+54",name:"ARGENTINA"},{code:"AS",dialingCode:"+1",name:"AMERICAN SAMOA"},{code:"AT",dialingCode:"+43",name:"AUSTRIA"},{code:"AU",dialingCode:"+61",name:"AUSTRALIA"},{code:"AW",dialingCode:"+297",name:"ARUBA"},{code:"AX",dialingCode:"+358",name:"ALAND ISLANDS"},{code:"AZ",dialingCode:"+994",name:"AZERBAIJAN"},{code:"BA",dialingCode:"+387",name:"BOSNIA AND HERZEGOVINA"},{code:"BB",dialingCode:"+1",name:"BARBADOS"},{code:"BD",dialingCode:"+880",name:"BANGLADESH"},{code:"BE",dialingCode:"+32",name:"BELGIUM"},{code:"BF",dialingCode:"+226",name:"BURKINA FASO"},{code:"BG",dialingCode:"+359",name:"BULGARIA"},{code:"BH",dialingCode:"+973",name:"BAHRAIN"},{code:"BI",dialingCode:"+257",name:"BURUNDI"},{code:"BJ",dialingCode:"+229",name:"BENIN"},{code:"BL",dialingCode:"+590",name:"SAINT BARTHELEMY"},{code:"BM",dialingCode:"+1",name:"BERMUDA"},{code:"BN",dialingCode:"+673",name:"BRUNEI DARUSSALAM"},{code:"BO",dialingCode:"+591",name:"BOLIVIA"},{code:"BQ",dialingCode:"+599",name:"CARIBBEAN NETHERLANDS (BONAIRE)"},{code:"BR",dialingCode:"+55",name:"BRAZIL"},{code:"BS",dialingCode:"+1",name:"BAHAMAS"},{code:"BT",dialingCode:"+975",name:"BHUTAN"},{code:"BV",dialingCode:"+47",name:"BOUVET ISLAND"},{code:"BW",dialingCode:"+267",name:"BOTSWANA"},{code:"BY",dialingCode:"+375",name:"BELARUS"},{code:"BZ",dialingCode:"+501",name:"BELIZE"},{code:"CA",dialingCode:"+1",name:"CANADA"},{code:"CC",dialingCode:"+61",name:"COCOS (KEELING) ISLANDS"},{code:"CD",dialingCode:"+243",name:"CONGO, THE DEMOCRATIC REPUBLIC OF THE"},{code:"CF",dialingCode:"+236",name:"CENTRAL AFRICAN REPUBLIC"},{code:"CG",dialingCode:"+242",name:"CONGO, REPUBLIC OF THE"},{code:"CH",dialingCode:"+41",name:"SWITZERLAND"},{code:"CI",dialingCode:"+225",name:"COTE D'IVOIRE"},{code:"CK",dialingCode:"+682",name:"COOK ISLANDS"},{code:"CL",dialingCode:"+56",name:"CHILE"},{code:"CM",dialingCode:"+237",name:"CAMEROON"},{code:"CN",dialingCode:"+86",name:"CHINA"},{code:"CO",dialingCode:"+57",name:"COLOMBIA"},{code:"CR",dialingCode:"+506",name:"COSTA RICA"},{code:"CU",dialingCode:"+53",name:"CUBA"},{code:"CV",dialingCode:"+238",name:"CAPE VERDE"},{code:"CW",dialingCode:"+599",name:"CURACAO"},{code:"CX",dialingCode:"+61",name:"CHRISTMAS ISLAND"},{code:"CY",dialingCode:"+357",name:"CYPRUS"},{code:"CZ",dialingCode:"+420",name:"CZECH REPUBLIC"},{code:"DE",dialingCode:"+49",name:"GERMANY"},{code:"DJ",dialingCode:"+253",name:"DJIBOUTI"},{code:"DK",dialingCode:"+45",name:"DENMARK"},{code:"DM",dialingCode:"+1",name:"DOMINICA"},{code:"DO",dialingCode:"+1",name:"DOMINICAN REPUBLIC"},{code:"DX",dialingCode:"",name:"CARIBBEAN NETHERLANDS (SINT EUSTATIUS AND SABA)"},{code:"DZ",dialingCode:"+213",name:"ALGERIA"},{code:"EC",dialingCode:"+593",name:"ECUADOR"},{code:"EE",dialingCode:"+372",name:"ESTONIA"},{code:"EG",dialingCode:"+20",name:"EGYPT"},{code:"EH",dialingCode:"+212",name:"WESTERN SAHARA"},{code:"ER",dialingCode:"+291",name:"ERITREA"},{code:"ES",dialingCode:"+34",name:"SPAIN"},{code:"ET",dialingCode:"+251",name:"ETHIOPIA"},{code:"FI",dialingCode:"+358",name:"FINLAND"},{code:"FJ",dialingCode:"+679",name:"FIJI"},{code:"FK",dialingCode:"+500",name:"FALKLAND ISLANDS (MALVINAS)"},{code:"FM",dialingCode:"+691",name:"MICRONESIA (FEDERATED STATES OF)"},{code:"FO",dialingCode:"+298",name:"FAROE ISLANDS"},{code:"FR",dialingCode:"+33",name:"FRANCE"},{code:"GA",dialingCode:"+241",name:"GABON"},{code:"GB",dialingCode:"+44",name:"UNITED KINGDOM"},{code:"GD",dialingCode:"+1",name:"GRENADA"},{code:"GE",dialingCode:"+995",name:"GEORGIA"},{code:"GF",dialingCode:"+594",name:"FRENCH GUIANA"},{code:"GG",dialingCode:"+44",name:"GUERNSEY"},{code:"GH",dialingCode:"+233",name:"GHANA"},{code:"GI",dialingCode:"+350",name:"GIBRALTAR"},{code:"GL",dialingCode:"+299",name:"GREENLAND"},{code:"GM",dialingCode:"+220",name:"GAMBIA"},{code:"GN",dialingCode:"+224",name:"GUINEA"},{code:"GP",dialingCode:"+590",name:"GUADELOUPE"},{code:"GQ",dialingCode:"+240",name:"EQUATORIAL GUINEA"},{code:"GR",dialingCode:"+30",name:"GREECE"},{code:"GS",dialingCode:"+500",name:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"},{code:"GT",dialingCode:"+502",name:"GUATEMALA"},{code:"GU",dialingCode:"+1",name:"GUAM"},{code:"GW",dialingCode:"+245",name:"GUINEA-BISSAU"},{code:"GY",dialingCode:"+592",name:"GUYANA"},{code:"HK",dialingCode:"+852",name:"HONG KONG"},{code:"HM",dialingCode:"+672",name:"HEARD ISLAND AND MCDONALD ISLANDS"},{code:"HN",dialingCode:"+504",name:"HONDURAS"},{code:"HR",dialingCode:"+385",name:"CROATIA"},{code:"HT",dialingCode:"+509",name:"HAITI"},{code:"HU",dialingCode:"+36",name:"HUNGARY"},{code:"IC",dialingCode:"+34",name:"CANARY ISLANDS"},{code:"ID",dialingCode:"+62",name:"INDONESIA"},{code:"IE",dialingCode:"+353",name:"IRELAND"},{code:"IL",dialingCode:"+972",name:"ISRAEL"},{code:"IM",dialingCode:"+44",name:"ISLE OF MAN"},{code:"IN",dialingCode:"+91",name:"INDIA"},{code:"IO",dialingCode:"+246",name:"BRITISH INDIAN OCEAN TERRITORY"},{code:"IQ",dialingCode:"+964",name:"IRAQ"},{code:"IR",dialingCode:"+98",name:"IRAN, ISLAMIC REPUBLIC OF"},{code:"IS",dialingCode:"+354",name:"ICELAND"},{code:"IT",dialingCode:"+39",name:"ITALY"},{code:"JE",dialingCode:"+44",name:"JERSEY"},{code:"JM",dialingCode:"+1",name:"JAMAICA"},{code:"JO",dialingCode:"+962",name:"JORDAN"},{code:"JP",dialingCode:"+81",name:"JAPAN"},{code:"KE",dialingCode:"+254",name:"KENYA"},{code:"KG",dialingCode:"+996",name:"KYRGYZSTAN"},{code:"KH",dialingCode:"+855",name:"CAMBODIA"},{code:"KI",dialingCode:"+686",name:"KIRIBATI"},{code:"KM",dialingCode:"+269",name:"COMOROS"},{code:"KN",dialingCode:"+1",name:"SAINT KITTS AND NEVIS"},{code:"KP",dialingCode:"+850",name:"KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF"},{code:"KR",dialingCode:"+82",name:"KOREA, REPUBLIC OF"},{code:"KW",dialingCode:"+965",name:"KUWAIT"},{code:"KY",dialingCode:"+1",name:"CAYMAN ISLANDS"},{code:"KZ",dialingCode:"+7",name:"KAZAKHSTAN"},{code:"LA",dialingCode:"+856",name:"LAO PEOPLE'S DEMOCRATIC REPUBLIC"},{code:"LB",dialingCode:"+961",name:"LEBANON"},{code:"LC",dialingCode:"+1",name:"SAINT LUCIA"},{code:"LI",dialingCode:"+423",name:"LIECHTENSTEIN"},{code:"LK",dialingCode:"+94",name:"SRI LANKA"},{code:"LL",dialingCode:"",name:"LAKE LUGANO, TERRITORIAL WATERS OF"},{code:"LO",dialingCode:"",name:"LIVIGNO"},{code:"LR",dialingCode:"+231",name:"LIBERIA"},{code:"LS",dialingCode:"+266",name:"LESOTHO"},{code:"LT",dialingCode:"+370",name:"LITHUANIA"},{code:"LU",dialingCode:"+352",name:"LUXEMBOURG"},{code:"LV",dialingCode:"+371",name:"LATVIA"},{code:"LY",dialingCode:"+218",name:"LIBYAN ARAB JAMAHIRIYA"},{code:"MA",dialingCode:"+212",name:"MOROCCO"},{code:"MC",dialingCode:"+377",name:"MONACO"},{code:"MD",dialingCode:"+373",name:"MOLDOVA, REPUBLIC OF"},{code:"ME",dialingCode:"+382",name:"MONTENEGRO"},{code:"MF",dialingCode:"+590",name:"SAINT MARTIN"},{code:"MG",dialingCode:"+261",name:"MADAGASCAR"},{code:"MH",dialingCode:"+692",name:"MARSHALL ISLANDS (THE)"},{code:"MK",dialingCode:"+389",name:"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"},{code:"ML",dialingCode:"+223",name:"MALI"},{code:"MM",dialingCode:"+95",name:"MYANMAR"},{code:"MN",dialingCode:"+976",name:"MONGOLIA"},{code:"MO",dialingCode:"+853",name:"MACAU"},{code:"MP",dialingCode:"+1",name:"NORTHERN MARIANA ISLANDS (THE)"},{code:"MQ",dialingCode:"+596",name:"MARTINIQUE"},{code:"MR",dialingCode:"+222",name:"MAURITANIA"},{code:"MS",dialingCode:"+1",name:"MONTSERRAT"},{code:"MT",dialingCode:"+356",name:"MALTA"},{code:"MU",dialingCode:"+230",name:"MAURITIUS"},{code:"MV",dialingCode:"+960",name:"MALDIVES"},{code:"MW",dialingCode:"+265",name:"MALAWI"},{code:"MX",dialingCode:"+52",name:"MEXICO"},{code:"MY",dialingCode:"+60",name:"MALAYSIA"},{code:"MZ",dialingCode:"+258",name:"MOZAMBIQUE"},{code:"NA",dialingCode:"+264",name:"NAMIBIA"},{code:"NC",dialingCode:"+687",name:"NEW CALEDONIA"},{code:"NE",dialingCode:"+227",name:"NIGER"},{code:"NF",dialingCode:"+672",name:"NORFOLK ISLAND"},{code:"NG",dialingCode:"+234",name:"NIGERIA"},{code:"NI",dialingCode:"+505",name:"NICARAGUA"},{code:"NL",dialingCode:"+31",name:"NETHERLANDS"},{code:"NO",dialingCode:"+47",name:"NORWAY"},{code:"NP",dialingCode:"+977",name:"NEPAL"},{code:"NR",dialingCode:"+674",name:"NAURU"},{code:"NU",dialingCode:"+683",name:"NIUE"},{code:"NZ",dialingCode:"+64",name:"NEW ZEALAND"},{code:"OM",dialingCode:"+968",name:"OMAN"},{code:"PA",dialingCode:"+507",name:"PANAMA"},{code:"PE",dialingCode:"+51",name:"PERU"},{code:"PF",dialingCode:"+689",name:"FRENCH POLYNESIA"},{code:"PG",dialingCode:"+675",name:"PAPUA NEW GUINEA"},{code:"PH",dialingCode:"+63",name:"PHILIPPINES"},{code:"PK",dialingCode:"+92",name:"PAKISTAN"},{code:"PL",dialingCode:"+48",name:"POLAND"},{code:"PM",dialingCode:"+508",name:"SAINT PIERRE AND MIQUELON"},{code:"PN",dialingCode:"+870",name:"PITCAIRN ISLANDS"},{code:"PR",dialingCode:"+1",name:"PUERTO RICO"},{code:"PS",dialingCode:"+970",name:"PALESTINIAN TERRITORY, OCCUPIED"},{code:"PT",dialingCode:"+351",name:"PORTUGAL"},{code:"PW",dialingCode:"+680",name:"PALAU"},{code:"PY",dialingCode:"+595",name:"PARAGUAY"},{code:"QA",dialingCode:"+974",name:"QATAR"},{code:"RE",dialingCode:"+262",name:"REUNION"},{code:"RO",dialingCode:"+40",name:"ROMANIA"},{code:"RS",dialingCode:"+381",name:"SERBIA"},{code:"RU",dialingCode:"+7",name:"RUSSIAN FEDERATION"},{code:"RW",dialingCode:"+250",name:"RWANDA"},{code:"SA",dialingCode:"+966",name:"SAUDI ARABIA"},{code:"SB",dialingCode:"+677",name:"SOLOMON ISLANDS"},{code:"SC",dialingCode:"+248",name:"SEYCHELLES"},{code:"SD",dialingCode:"+249",name:"SUDAN"},{code:"SE",dialingCode:"+46",name:"SWEDEN"},{code:"SG",dialingCode:"+65",name:"SINGAPORE"},{code:"SH",dialingCode:"+290",name:"SAINT HELENA"},{code:"SI",dialingCode:"+386",name:"SLOVENIA"},{code:"SJ",dialingCode:"+47",name:"SVALBARD AND JAN MAYEN"},{code:"SK",dialingCode:"+421",name:"SLOVAKIA"},{code:"SL",dialingCode:"+232",name:"SIERRA LEONE"},{code:"SM",dialingCode:"+378",name:"SAN MARINO"},{code:"SN",dialingCode:"+221",name:"SENEGAL"},{code:"SO",dialingCode:"+252",name:"SOMALIA"},{code:"SR",dialingCode:"+597",name:"SURINAME"},{code:"SS",dialingCode:"+211",name:"SOUTH SUDAN"},{code:"ST",dialingCode:"+239",name:"SAO TOME AND PRINCIPE"},{code:"SV",dialingCode:"+503",name:"EL SALVADOR"},{code:"SX",dialingCode:"+599",name:"SINT MAARTEN"},{code:"SY",dialingCode:"+963",name:"SYRIAN ARAB REPUBLIC"},{code:"SZ",dialingCode:"+268",name:"SWAZILAND"},{code:"TC",dialingCode:"+1",name:"TURKS AND CAICOS ISLANDS"},{code:"TD",dialingCode:"+235",name:"CHAD"},{code:"TF",dialingCode:"+262",name:"FRENCH SOUTHERN TERRITORIES"},{code:"TG",dialingCode:"+228",name:"TOGO"},{code:"TH",dialingCode:"+66",name:"THAILAND"},{code:"TJ",dialingCode:"+992",name:"TAJIKISTAN"},{code:"TK",dialingCode:"+690",name:"TOKELAU"},{code:"TL",dialingCode:"+670",name:"TIMOR-LESTE"},{code:"TM",dialingCode:"+993",name:"TURKMENISTAN"},{code:"TN",dialingCode:"+216",name:"TUNISIA"},{code:"TO",dialingCode:"+676",name:"TONGA"},{code:"TR",dialingCode:"+90",name:"TURKEY"},{code:"TT",dialingCode:"+1",name:"TRINIDAD AND TOBAGO"},{code:"TV",dialingCode:"+688",name:"TUVALU"},{code:"TW",dialingCode:"+886",name:"TAIWAN"},{code:"TZ",dialingCode:"+255",name:"TANZANIA, UNITED REPUBLIC OF"},{code:"UA",dialingCode:"+380",name:"UKRAINE"},{code:"UG",dialingCode:"+256",name:"UGANDA"},{code:"UM",dialingCode:"+1",name:"UNITED STATES MINOR OUTLYING ISLANDS (THE)"},{code:"US",dialingCode:"+1",name:"UNITED STATES OF AMERICA"},{code:"UY",dialingCode:"+598",name:"URUGUAY"},{code:"UZ",dialingCode:"+998",name:"UZBEKISTAN"},{code:"VA",dialingCode:"+379",name:"HOLY SEE (VATICAN CITY STATE)"},{code:"VC",dialingCode:"+1",name:"SAINT VINCENT AND THE GRENADINES"},{code:"VE",dialingCode:"+58",name:"VENEZUELA"},{code:"VG",dialingCode:"+1",name:"VIRGIN ISLANDS, BRITISH"},{code:"VI",dialingCode:"+1",name:"VIRGIN ISLANDS (U.S.)"},{code:"VN",dialingCode:"+84",name:"VIETNAM"},{code:"VU",dialingCode:"+678",name:"VANUATU"},{code:"WF",dialingCode:"+681",name:"WALLIS AND FUTUNA"},{code:"WS",dialingCode:"+685",name:"SAMOA"},{code:"XI",dialingCode:"+44",name:"UNITED KINGDOM (NORTHERN IRELAND)"},{code:"YE",dialingCode:"+967",name:"YEMEN"},{code:"YT",dialingCode:"+262",name:"MAYOTTE"},{code:"ZA",dialingCode:"+27",name:"SOUTH AFRICA"},{code:"ZM",dialingCode:"+260",name:"ZAMBIA"},{code:"ZW",dialingCode:"+263",name:"ZIMBABWE"}],Be=e=>{if(!e)return e;const n=127397;return e=="XI"?"🇬🇧":e=="LO"?"🇮🇹":e=="LL"?"🇨🇭":e=="DX"?"🇧🇶":String.fromCodePoint(e.charCodeAt(0)+n)+String.fromCodePoint(e.charCodeAt(1)+n)},ct=e=>e.split(" ").map(n=>n[0].toUpperCase()+n.substring(1).toLowerCase()).join(" "),Ke=e=>{try{return Qe(e).formatInternational()}catch{return e}},ut=()=>{var ce;const{data:e}=ye(),{enqueueSnackbar:n}=Se(),o=ve(),t=!!(e!=null&&e.verified_phone_number),[a,r]=g.useState(t),[d,s]=g.useState(!1);g.useEffect(()=>{a!==t&&r(t)},[t,e]);const{data:u,error:c,isLoading:l,mutateAsync:m,mutateAsync:S,reset:h}=fn(),{error:p,mutateAsync:f,reset:x}=An(),A=u!==void 0,N=async b=>(x(),await S(b)),v=async b=>{await f(b);const ne=me.find(ue=>ue.code===T.values.iso_code);ne?Sn({verified_phone_number:`${ne.dialingCode}${T.values.phone_number}`},o):o.invalidateQueries(ke),E(),r(!0),n("Successfully verified phone number",{variant:"success"})},T=fe({initialValues:{iso_code:"US",phone_number:""},onSubmit:N}),P=fe({initialValues:{otp_code:""},onSubmit:v}),E=()=>{h(),T.resetForm(),P.resetForm()},I=()=>{t&&r(!0),E()},R=()=>{r(!1)},de=()=>{E()},le=()=>{m(T.values).then(()=>{n("Successfully resent verification code",{variant:"success"})}).catch(b=>n((b==null?void 0:b[0].reason)??"Unable to resend verification code"))},ee={menu:()=>({marginLeft:"-1px !important",marginTop:"0px !important",width:"500px"}),singleValue:b=>({...b,fontSize:"20px",textAlign:"center"})},q=me.find(b=>b.code===T.values.iso_code),z=A?P.isSubmitting:T.isSubmitting;return i.jsxs(i.Fragment,{children:[!a&&A?i.jsxs(tt,{children:[i.jsxs(y,{children:["SMS verification code was sent to"," ",(ce=Qe(T.values.phone_number,T.values.iso_code))==null?void 0:ce.formatInternational()]}),i.jsx(y,{children:i.jsx(oe,{onClick:de,children:"Enter a different phone number"})})]}):null,i.jsx(O,{children:i.jsxs("form",{onSubmit:A?P.handleSubmit:T.handleSubmit,children:[a?i.jsxs(i.Fragment,{children:[i.jsx(ot,{variant:"h3",children:"Phone Number"}),i.jsxs(O,{alignItems:"center",display:"flex",style:{gap:10},children:[i.jsx(y,{children:e!=null&&e.verified_phone_number?Ke(e.verified_phone_number):"No Phone Number"}),i.jsx(oe,{style:{bottom:-.5,fontSize:"0.85rem",position:"relative"},onClick:R,children:"Edit"})]})]}):A?i.jsx(re,{helperText:i.jsx(oe,{isDisabled:l,isLoading:l,onClick:le,children:"Resend verification code"}),errorText:p==null?void 0:p[0].reason,id:"otp_code",label:"Verification Code",name:"otp_code",onChange:P.handleChange,type:"text",value:P.values.otp_code}):i.jsxs(i.Fragment,{children:[i.jsx(dt,{children:"Phone Number"}),i.jsxs(it,{display:"flex",isPhoneInputFocused:d,children:[i.jsx(st,{isOptionSelected:b=>T.values.iso_code===b.value,onChange:b=>T.setFieldValue("iso_code",b.value),options:me.map(b=>({label:`${ct(b.name)} ${b.dialingCode} ${Be(b.code)}`,value:b.code})),value:{label:Be(T.values.iso_code),value:T.values.iso_code},hideLabel:!0,id:"iso_code",isClearable:!1,label:"ISO Code",menuPlacement:"bottom",name:"iso_code",noMarginTop:!0,onBlur:()=>s(!1),onFocus:()=>s(!0),styles:ee}),i.jsx(rt,{InputProps:{startAdornment:q?i.jsx(yn,{position:"end",children:q.dialingCode}):void 0},hideLabel:!0,id:"phone_number",label:"Phone Number",name:"phone_number",onBlur:()=>s(!1),onChange:T.handleChange,onFocus:()=>s(!0),type:"tel",value:T.values.phone_number})]}),c?i.jsx(lt,{role:"alert",children:c[0].reason}):null]}),i.jsxs(at,{display:"flex",justifyContent:"flex-end",children:[A||t&&!a?i.jsx(H,{buttonType:"secondary",disabled:z,onClick:I,children:"Cancel"}):null,i.jsx(H,{buttonType:"primary",disabled:a,loading:z,type:"submit",children:A?"Verify Phone Number":"Send Verification Code"})]})]})})]})},gt=e=>{const n=Ue(),{username:o}=e;return i.jsxs(O,{sx:{marginBottom:n.spacing(4)},children:[i.jsx(y,{variant:"h3",children:"Password Reset"}),i.jsx(mt,{variant:"body1",children:"If you’ve forgotten your password or would like to change it, we’ll send you an e-mail with instructions."}),i.jsx(ht,{to:`${pe}/forgot/password?username=${o}`,children:"Reset Password"})]})},mt=C(y,{label:"StyledCopy"})(({theme:e})=>({lineHeight:"20px",marginBottom:e.spacing(),marginTop:e.spacing()})),ht=C($,{label:"StyledLink"})(({theme:e})=>({fontSize:"0.875rem",marginTop:e.spacing()})),Ct=()=>{const{enqueueSnackbar:e}=Se(),{data:n}=ye(),{error:o,isLoading:t,mutateAsync:a,reset:r}=vn(),d=!!(n!=null&&n.verified_phone_number),[s,u]=g.useState(!1),c=()=>{u(!0)},l=()=>{u(!1),o&&r()},m=()=>{a().then(()=>{l(),e("Successfully opted out of SMS messaging",{variant:"success"})})};return i.jsxs(i.Fragment,{children:[i.jsx(At,{hasVerifiedPhoneNumber:d,spacingBottom:16,spacingLeft:1,spacingTop:12,variant:d?"success":"warning",children:i.jsx(y,{sx:{fontSize:"0.875rem !important"},children:i.jsx("b",{children:d?"You have opted in to SMS messaging.":"You are opted out of SMS messaging."})})}),i.jsx(ft,{children:"An authentication code is sent via SMS as part of the phone verification process. Messages are not sent for any other reason. SMS authentication is optional and provides an important degree of account security. You may opt out at any time and your verified phone number will be deleted."}),d?i.jsx(O,{display:"flex",justifyContent:"flex-end",children:i.jsx(pt,{buttonType:"primary",onClick:c,children:"Opt Out"})}):null,i.jsxs(J,{actions:()=>i.jsx(X,{primaryButtonProps:{label:"Opt Out",loading:t,onClick:m},secondaryButtonProps:{label:"Cancel",onClick:l}}),error:o==null?void 0:o[0].reason,onClose:l,open:s,title:"Opt out of SMS messaging for phone verification",children:[i.jsxs(y,{children:["Opting out of SMS messaging will reduce security and limit the ways you can securely access your account."," ",i.jsx($,{to:"https://www.linode.com/docs/guides/linode-manager-security-controls/",children:"Learn more about security options."})]}),i.jsxs(G,{spacingBottom:0,spacingTop:16,sx:{fontSize:"0.875rem !important"},variant:"error",children:[i.jsx("b",{children:"Warning:"})," As part of this action, your verified phone number"," ",n!=null&&n.verified_phone_number?Ke(n.verified_phone_number):"No Phone Number"," ","will be deleted."]})]})]})},pt=C(H,{label:"StyledButton"})(({theme:e})=>({marginTop:e.spacing(),width:"150px"})),ft=C(y,{label:"StyledCopy"})(()=>({lineHeight:"20px",maxWidth:960})),At=C(G,{label:"StyledNotice"})(({hasVerifiedPhoneNumber:e,theme:n})=>({borderLeft:e?`5px solid ${n.color.green}`:`5px solid ${n.color.yellow}`})),Ye="securityQuestions",$e=()=>En(Ye,bn,{...Tn.oneTimeFetch}),yt=()=>{const e=ve();return xn(n=>In(n),{onSuccess:n=>{e.setQueryData(Ye,o=>{if(o===void 0)return;const t=o.security_questions.map(a=>({...a,response:null}));for(let a=0;a<n.security_questions.length;a++){const r=o.security_questions.findIndex(d=>d.id===n.security_questions[a].question_id);t[r].response=n.security_questions[a].response}for(let a=0;a<n.security_questions.length;a++){const r=t.findIndex(d=>d.id===n.security_questions[a].question_id);St(t,r,a)}return{security_questions:t}})}})};function St(e,n,o){const t=e[n];e.splice(n,1),e.splice(o,0,t)}const vt=e=>{const{handleChange:n,index:o,isReadOnly:t,questionResponse:a}=e,r=`Answer ${o+1}`,d=`security_questions[${o}].response`;return t?null:i.jsx(re,{label:r,name:d,onChange:n,placeholder:"Type your answer",value:(a==null?void 0:a.response)??""})},Et=e=>{const{index:n,isReadOnly:o,onClickEdit:t,options:a,questionResponse:r,setFieldValue:d}=e,s=r?{label:r.question,value:r.id}:void 0,u=`security_questions[${n}].id`,c=`Question ${n+1}`,l=m=>{d(`security_questions[${n}]`,{id:m.value,question:m.label,response:""})};return o?i.jsxs(i.Fragment,{children:[i.jsx(Nn,{children:c}),i.jsxs(y,{style:{fontSize:"0.875rem"},variant:"body1",children:[r==null?void 0:r.question,i.jsx(oe,{onClick:t,style:{marginLeft:10},children:"Edit"})]})]}):i.jsx(_e,{defaultValue:s,isClearable:!1,label:c,name:u,onChange:l,options:a,placeholder:"Select a question"})},he=e=>{const{edit:n,handleChange:o,onEdit:t,options:a,questionResponse:r,setFieldValue:d,...s}=e;return i.jsxs(Tt,{children:[i.jsx(bt,{edit:n,children:i.jsx(Et,{isReadOnly:!n,onClickEdit:t,options:a,questionResponse:r,setFieldValue:d,...s})}),i.jsx(xt,{children:i.jsx(vt,{handleChange:o,isReadOnly:!n,questionResponse:r,...s})})]})},Tt=C(O,{label:"StyledRootContainer"})(({theme:e})=>({"& > div":{flexGrow:1,width:"100%"},display:"flex",flexBasis:"flex-start",minHeight:"74px",[e.breakpoints.down("md")]:{flexDirection:"column"},[e.breakpoints.up("md")]:{flexDirection:"row"}})),bt=C(O,{label:"StyledQuestionContainer",shouldForwardProp:e=>e!=="edit"})(({edit:e,theme:n})=>({display:"flex",flexDirection:"column",flexShrink:1.5,paddingTop:e?0:n.spacing(2)})),xt=C(O,{label:"StyledQuestionContainer"})(({theme:e})=>({paddingLeft:e.spacing(5.75),[e.breakpoints.down("md")]:{paddingLeft:0}})),It=(e=[])=>e.map(n=>({label:n.question,value:n.id})),Nt=e=>e!==void 0?e.security_questions.filter(n=>n.response!==null):[],Rt=()=>{const{data:e,isLoading:n}=$e(),{isLoading:o,mutateAsync:t}=yt(),{enqueueSnackbar:a}=Se(),r=Nt(e),d=(e==null?void 0:e.security_questions.filter(E=>E.response).length)===3,s=It((e==null?void 0:e.security_questions)??[]),c={enableReinitialize:!0,initialValues:{security_questions:r},onSubmit:async E=>{try{const I=d?"updated":"added";await t({security_questions:E.security_questions.map(R=>({question_id:R.id,response:R.response}))}),a(`Successfully ${I} your security questions`,{variant:"success"}),h()}catch(I){a(I[0].reason,{variant:"error"})}}},[l,m]=g.useState(d?[!1,!1,!1]:[!0,!0,!0]);g.useEffect(()=>{d!==l.includes(!d)&&m(d?[!1,!1,!1]:[!0,!0,!0])},[d]);const S=E=>{m(I=>{const R=[...I];return R[E]=!0,R})},h=()=>{A(),m([!1,!1,!1])},{dirty:p,handleChange:f,handleSubmit:x,resetForm:A,setFieldValue:N,values:v}=fe(c),T=!p||v.security_questions.length===0||v.security_questions.some(E=>!(E!=null&&E.response)),P={handleChange:f,setFieldValue:N};return n?i.jsx(Ee,{}):i.jsxs(O,{children:[i.jsx(y,{variant:"h3",children:"Security Questions"}),i.jsxs(Lt,{variant:"body1",children:["Security questions enable you to regain access to your Cloud Manager user account in certain situations, such as when 2FA is enabled and you no longer have access to the token or recovery codes. Answers to security questions should not be easily guessed or discoverable through research."," ",i.jsx($,{to:"https://www.linode.com/docs/guides/user-security-controls#security-questions",children:"Learn more about security options."})]}),i.jsxs(wt,{onSubmit:x,children:[i.jsx(he,{options:s.filter(E=>{var I,R;return E.value!==((I=v.security_questions[1])==null?void 0:I.id)&&E.value!==((R=v.security_questions[2])==null?void 0:R.id)}),edit:l[0],index:0,onEdit:()=>S(0),questionResponse:v.security_questions[0],...P}),i.jsx(he,{options:s.filter(E=>{var I,R;return E.value!==((I=v.security_questions[0])==null?void 0:I.id)&&E.value!==((R=v.security_questions[2])==null?void 0:R.id)}),edit:l[1],index:1,onEdit:()=>S(1),questionResponse:v.security_questions[1],...P}),i.jsx(he,{options:s.filter(E=>{var I,R;return E.value!==((I=v.security_questions[0])==null?void 0:I.id)&&E.value!==((R=v.security_questions[1])==null?void 0:R.id)}),edit:l[2],index:2,onEdit:()=>S(2),questionResponse:v.security_questions[2],...P}),i.jsxs(Bt,{display:"flex",justifyContent:"flex-end",children:[d&&l.includes(!0)?i.jsx(H,{buttonType:"secondary",onClick:h,children:"Cancel"}):null,i.jsx(H,{buttonType:"primary",disabled:T,loading:o,type:"submit",children:`${d?"Update":"Add"} Security Questions`})]})]})]})},Lt=C(y,{label:"StyledCopy"})(({theme:e})=>({lineHeight:"20px",marginBottom:e.spacing(),marginTop:e.spacing(),maxWidth:960})),wt=C("form",{label:"StyledForm"})(()=>({display:"flex",flexDirection:"column",width:"100%"})),Bt=C(O,{label:"StyledButtonContainer"})(({theme:e})=>({gap:e.spacing(),marginTop:e.spacing(2),[e.breakpoints.down("md")]:{marginTop:e.spacing(2)}})),Ot=e=>g.createElement("svg",{width:"26px",height:"26px",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...e},g.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},g.createElement("g",{id:"TFA-\\u2013-Google-selected-state_blue",transform:"translate(-752.000000, -373.000000)",stroke:"#4D91E0"},g.createElement("g",{id:"Group-14",transform:"translate(752.000000, 373.000000)"},g.createElement("circle",{id:"Oval",cx:13,cy:13,r:12.5}),g.createElement("polyline",{id:"Path",strokeWidth:2.5,points:"6.01669312 14.4675751 10.907074 19.0117264 20.3579407 8.12538147"}))))),We=e=>g.createElement("svg",{width:"100px",height:"108px",viewBox:"0 0 100 108",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...e},g.createElement("title",null,"Shape"),g.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},g.createElement("g",{id:"akamai-logo-rgb",transform:"translate(0.600000, 0.700000)",fill:"#009CDE",fillRule:"nonzero"},g.createElement("path",{d:"M54.5,104.8 C57,105.6 56.9,107.2 54.1,107.2 C24.3,107.2 0,83.2 0,53.6 C0,24 24.2,0 54.1,0 C56.9,0 57.5,1.5 55.2,2.2 C32.8,8.6 16.4,29.2 16.4,53.6 C16.4,77.7 32.4,98.1 54.5,104.8 M26.6,66.1 C26.5,64.7 26.4,63.2 26.4,61.7 C26.4,38.2 45.5,19.1 69,19.1 C91.2,19.1 97.9,29 98.7,28.4 C99.6,27.7 90.6,8 64.5,8 C41,8 21.9,27.1 21.9,50.6 C21.9,56 22.9,61.2 24.8,66 C25.6,68 26.8,68.1 26.6,66.1 M44.5,35.4 C55.6,30.6 69.5,30.4 83.1,35.2 C92.3,38.4 97.6,43 98,42.8 C98.7,42.5 92.7,32.9 81.7,28.7 C68.4,23.7 54.2,26.3 43.8,34.5 C42.7,35.4 43.1,36 44.5,35.4",id:"Shape"})))),Pt=e=>g.createElement("svg",{id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 32.6 31.8",style:{enableBackground:"new 0 0 32.6 31.8"},xmlSpace:"preserve",...e},g.createElement("style",{type:"text/css"},`
	.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#191717;}
`),g.createElement("path",{className:"st0",d:"M16.3,0C7.3,0,0,7.3,0,16.3c0,7.2,4.7,13.3,11.1,15.5c0.8,0.1,1.1-0.4,1.1-0.8c0-0.4,0-1.4,0-2.8 c-4.5,1-5.5-2.2-5.5-2.2c-0.7-1.9-1.8-2.4-1.8-2.4c-1.5-1,0.1-1,0.1-1c1.6,0.1,2.5,1.7,2.5,1.7c1.5,2.5,3.8,1.8,4.7,1.4 c0.1-1.1,0.6-1.8,1-2.2c-3.6-0.4-7.4-1.8-7.4-8.1c0-1.8,0.6-3.2,1.7-4.4C7.4,10.7,6.8,9,7.7,6.8c0,0,1.4-0.4,4.5,1.7 c1.3-0.4,2.7-0.5,4.1-0.5c1.4,0,2.8,0.2,4.1,0.5c3.1-2.1,4.5-1.7,4.5-1.7c0.9,2.2,0.3,3.9,0.2,4.3c1,1.1,1.7,2.6,1.7,4.4 c0,6.3-3.8,7.6-7.4,8c0.6,0.5,1.1,1.5,1.1,3c0,2.2,0,3.9,0,4.5c0,0.4,0.3,0.9,1.1,0.8c6.5-2.2,11.1-8.3,11.1-15.5 C32.6,7.3,25.3,0,16.3,0z"})),Mt=e=>g.createElement("svg",{width:"535px",height:"546px",viewBox:"0 0 535 546",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...e},g.createElement("title",null,"GoogleG"),g.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},g.createElement("g",{id:"Google__G__Logo",fillRule:"nonzero"},g.createElement("path",{d:"M534.5,279.4 C534.5,260.9 533,242.3 529.8,224.1 L273.1,224.1 L273.1,328.9 L420.1,328.9 C414,362.7 394.4,392.6 365.7,411.6 L365.7,479.6 L453.4,479.6 C504.9,432.2 534.5,362.2 534.5,279.4 Z",id:"Path",fill:"#4285F4"}),g.createElement("path",{d:"M273.1,545.3 C346.5,545.3 408.4,521.2 453.5,479.6 L365.8,411.6 C341.4,428.2 309.9,437.6 273.2,437.6 C202.2,437.6 142,389.7 120.4,325.3 L29.9,325.3 L29.9,395.4 C76.1,487.3 170.2,545.3 273.1,545.3 Z",id:"Path",fill:"#34A853"}),g.createElement("path",{d:"M120.3,325.3 C108.9,291.5 108.9,254.9 120.3,221.1 L120.3,151 L29.9,151 C-8.7,227.9 -8.7,318.5 29.9,395.4 L120.3,325.3 L120.3,325.3 Z",id:"Path",fill:"#FBBC04"}),g.createElement("path",{d:"M273.1,108.7 C311.9,108.1 349.4,122.7 377.5,149.5 L455.2,71.8 C406,25.6 340.7,0.2 273.1,1 C170.2,1 76.1,59 29.9,151 L120.3,221.1 C141.8,156.6 202.1,108.7 273.1,108.7 Z",id:"Path",fill:"#EA4335"})))),Dt=e=>{var u;const n=Fe(),{currentProvider:o,newProvider:t,onClose:a,open:r}=e,s=((u=(n.tpaProviders??[]).find(c=>c.name===t))==null?void 0:u.displayName)??"Linode";return i.jsx(kt,{actions:()=>_t(a,t),onClose:a,open:r,title:`Change login method to ${s}?`,children:i.jsxs(y,{sx:{lineHeight:"1.25rem"},variant:"body1",children:["This will disable your login via"," ",o.displayName==="Linode"?"username and password":o.displayName,"."]})})},jt=e=>e==="password"?window.open(`${pe}/tpa/disable`,"_blank","noopener noreferrer"):window.open(`${pe}/tpa/enable/${e}`,"_blank","noopener noreferrer"),_t=(e,n)=>i.jsx(X,{primaryButtonProps:{"aria-describedby":"external-site","data-testid":"confirm-login-change",label:"Change login",onClick:()=>{e(),jt(n)}},secondaryButtonProps:{"data-testid":"confirm-cancel",label:"Cancel",onClick:e},className:"p0"}),kt=C(J,{label:"StyledConfirmationDialog"})(()=>({"& .dialog-content":{paddingBottom:0,paddingTop:0}})),Ut=C(Ge,{label:"StyledRootContainer"})(({theme:e})=>({marginBottom:e.spacing(3),padding:e.spacing(3),paddingTop:17})),Ce=C(y,{label:"StyledCopy"})(({theme:e})=>({lineHeight:"1.25rem",marginBottom:e.spacing(2),marginTop:e.spacing(),maxWidth:960})),Ft=C(He,{label:"StyledProvidersListGrid"})(({theme:e})=>({"& .MuiGrid-item":{[e.breakpoints.down("sm")]:{flexBasis:"100%",maxWidth:"100%"},[e.breakpoints.down(1100)]:{flexBasis:"50%",maxWidth:"50%"}},marginBottom:0,[e.breakpoints.down("sm")]:{marginTop:e.spacing()},width:"calc(100% + 24px)"})),Gt=C(H,{label:"StyledButton",shouldForwardProp:e=>e!=="isButtonEnabled"})(({isButtonEnabled:e,theme:n})=>({"& > span":{color:n.color.headline,display:"inline-block",width:"100%"},"&:hover":{backgroundColor:n.color.grey6},backgroundColor:n.name==="light"?"#f5f6f7":"#444",borderRadius:1,marginTop:n.spacing(),minHeight:70,paddingLeft:`calc(${n.spacing(3)} - 4px)`,paddingRight:`calc(${n.spacing(3)} - 4px)`,[n.breakpoints.down("md")]:{marginLeft:0},[n.breakpoints.down("sm")]:{marginLeft:0,marginTop:0},width:"calc(100% - 8px)",...e&&{border:`1px solid ${n.palette.primary.main} !important`}})),Ht=C("span",{label:"StyledEnabledText"})(({theme:e})=>({fontFamily:e.font.normal,marginLeft:4})),Vt=C(G,{label:"StyledNotice"})(({theme:e})=>({fontFamily:e.font.bold,fontSize:"0.875rem"})),Qt={github:Pt,google:Mt,password:We},Oe={displayName:"Cloud Manager",href:"",icon:We,name:"password"},Kt=e=>{var S;const n=Ue(),t=Fe().tpaProviders??[],a=[{...Oe},...t],r=t.find(h=>h.name===e.authType)??Oe,d=e.authType!=="password",[s,u]=g.useState(!1),[c,l]=g.useState((S=t[0])==null?void 0:S.name),m=h=>{l(h),u(!0)};return i.jsxs(i.Fragment,{children:[i.jsxs(Ut,{children:[i.jsx(y,{variant:"h3",children:"Login Method"}),i.jsxs(Ce,{children:["You can use your Cloud Manager credentials or another provider such as Google or GitHub to log in to your Cloud Manager account. More information is available in"," ",i.jsx($,{to:"https://www.linode.com/docs/guides/third-party-authentication/",children:"How to Enable Third Party Authentication on Your User Account"}),". We strongly recommend setting up Two-Factor Authentication (2FA)."]}),i.jsx(Ft,{container:!0,spacing:2,children:a.map(h=>{const p=Qt[h.name],f=e.authType===h.name;return i.jsx(He,{md:4,sm:6,xs:12,children:i.jsx(Gt,{onClick:()=>{m(h.name)},"data-testid":`Button-${h.displayName}`,disabled:f,isButtonEnabled:f,children:i.jsxs(O,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",sx:{width:"100%"},children:[i.jsxs(O,{alignItems:"center",display:"flex",flexDirection:"row",flexGrow:1,children:[i.jsx(p,{style:{color:"#939598",height:32,marginRight:n.spacing(2),width:32}}),h.displayName,f?i.jsx(Ht,{"data-testid":`Enabled-${h.displayName}`,children:"(Enabled)"}):null]}),f?i.jsx(Ot,{}):null]})})},h.displayName)})}),d?i.jsxs("div",{"data-testid":`Notice-${r.displayName}`,children:[i.jsx(F,{spacingBottom:16,spacingTop:24}),i.jsxs(y,{variant:"h3",children:[r.displayName," Authentication"]}),i.jsxs(Vt,{spacingBottom:16,spacingTop:16,variant:"warning",children:["Your login credentials are currently managed via"," ",r.displayName,"."]}),i.jsxs(Ce,{variant:"body1",children:["If you need to reset your password or set up Two-Factor Authentication (2FA), please visit the"," ",i.jsx($,{external:!0,to:r.href,children:`${r.displayName} website`}),"."]}),i.jsxs(Ce,{style:{marginBottom:8},variant:"body1",children:["To disable ",r.displayName," authentication and log in using your Cloud Manager credentials, click the Cloud Manager button above. We’ll send you an e-mail with instructions on how to reset your password."]})]}):null]}),i.jsx(Dt,{currentProvider:r,newProvider:c,onClose:()=>u(!1),open:s})]})},Yt=e=>{const{deviceId:n,onClose:o,open:t}=e,{error:a,isLoading:r,mutateAsync:d}=Rn(n),s=()=>{d().then(()=>{o()})};return i.jsx(J,{actions:i.jsx(X,{primaryButtonProps:{label:"Revoke Device",loading:r,onClick:s},secondaryButtonProps:{label:"Cancel",onClick:o}}),error:a==null?void 0:a[0].reason,onClose:o,open:t,title:"Revoke Device",children:i.jsx(y,{children:"Are you sure you want to remove this device from your list of trusted devices?"})})},$t=Ln()(e=>({copy:{lineHeight:"20px",marginBottom:e.spacing(2),marginTop:e.spacing()},dates:{minWidth:150}})),Pe="trusted-devices",Wt=()=>{const[e,n]=g.useState(!1),[o,t]=g.useState(0),{classes:a}=$t(),r=qn(1,Pe),{handleOrderChange:d,order:s,orderBy:u}=Wn({order:"asc",orderBy:"expiry"},Pe),{data:c,error:l,isLoading:m}=wn({page:r.page,page_size:r.pageSize},{"+order":s,"+order_by":u}),S=p=>{t(p),n(!0)},h=()=>m?i.jsx($n,{columns:5}):l?i.jsx(Yn,{colSpan:6,message:"There was an issue loading your trusted devices."}):(c==null?void 0:c.results)===0?i.jsx(Kn,{colSpan:6}):c==null?void 0:c.data.map(p=>i.jsxs(we,{ariaLabel:`Device ${p.id}`,children:[i.jsx(Q,{children:p.user_agent}),i.jsx(Q,{children:p.last_remote_addr}),i.jsx(Q,{children:i.jsx(Le,{value:p.last_authenticated})}),i.jsx(Q,{children:i.jsx(Le,{value:p.expiry})}),i.jsx(Q,{className:"p0",children:i.jsx(Gn,{actionText:"Revoke",onClick:()=>S(p.id)})})]},p.id));return i.jsxs(i.Fragment,{children:[i.jsx(y,{variant:"h3",children:"Trusted Devices"}),i.jsx(y,{className:a.copy,"data-qa-copy":!0,variant:"body1",children:'To add a trusted device, check the box "Trust this device for 30 days" at login.'}),i.jsxs(Vn,{children:[i.jsx(zn,{children:i.jsxs(we,{children:[i.jsx(Q,{children:"Device"}),i.jsx(ge,{active:u==="last_remote_addr",className:a.dates,direction:s,handleClick:d,label:"last_remote_addr",children:"Last IP"}),i.jsx(ge,{active:u==="last_authenticated",className:a.dates,direction:s,handleClick:d,label:"last_authenticated",children:"Last Used"}),i.jsx(ge,{active:u==="expiry",className:a.dates,direction:s,handleClick:d,label:"expiry",children:"Expires"}),i.jsx(Q,{})]})}),i.jsx(Qn,{children:h()}),i.jsx(Hn,{count:(c==null?void 0:c.results)??0,eventCategory:"Trusted Devices Panel",handlePageChange:r.handlePageChange,handleSizeChange:r.handlePageSizeChange,page:r.page,pageSize:r.pageSize})]}),i.jsx(Yt,{deviceId:o,onClose:()=>n(!1),open:e})]})},qt=e=>{const{onClose:n,onSuccess:o,open:t}=e,{error:a,isLoading:r,mutateAsync:d,reset:s}=Bn(),u=async()=>{await d(),n(),o()};g.useEffect(()=>{t&&s()},[t]);const c=i.jsx(X,{primaryButtonProps:{"data-testid":"submit",label:"Disable Two-factor Authentication",loading:r,onClick:u},secondaryButtonProps:{"data-testid":"cancel",label:"Cancel",onClick:n}});return i.jsx(J,{actions:c,error:a==null?void 0:a[0].reason,onClose:n,open:t,title:"Disable Two-Factor Authentication",children:i.jsx(y,{children:"Are you sure you want to disable two-factor authentication?"})})},zt=g.memo(e=>{const{error:n,handleChange:o,onCancel:t,onSubmit:a,submitting:r,token:d,twoFactorConfirmed:s}=e;return i.jsxs(g.Fragment,{children:[i.jsx(y,{"data-qa-copy":!0,variant:"body1",children:"Please enter the token generated by your 2FA app:"}),i.jsx(re,{"data-qa-confirm-token":!0,errorText:n,label:"Token",onChange:o,value:d}),s&&i.jsx(Zt,{text:"Confirming a new key will invalidate codes generated from any previous key.",spacingBottom:8,spacingTop:16,variant:"warning"}),i.jsxs(O,{display:"flex",justifyContent:"flex-end",style:{gap:16},children:[i.jsx(H,{buttonType:"secondary","data-qa-cancel":!0,onClick:t,children:"Cancel"}),i.jsx(H,{buttonType:"primary","data-qa-submit":!0,loading:r,onClick:a,children:"Confirm Token"})]})]})}),Zt=C(G,{label:"StyledWarningNotice"})(({theme:e})=>({marginLeft:"0 !important",marginTop:e.spacing(2)}));var qe={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Jt=qe;function ze(e){this.mode=Jt.MODE_8BIT_BYTE,this.data=e}ze.prototype={getLength:function(e){return this.data.length},write:function(e){for(var n=0;n<this.data.length;n++)e.put(this.data.charCodeAt(n),8)}};var Xt=ze,Ze={L:1,M:0,Q:3,H:2},te=Ze;function _(e,n){this.totalCount=e,this.dataCount=n}_.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];_.getRSBlocks=function(e,n){var o=_.getRsBlockTable(e,n);if(o==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+n);for(var t=o.length/3,a=new Array,r=0;r<t;r++)for(var d=o[r*3+0],s=o[r*3+1],u=o[r*3+2],c=0;c<d;c++)a.push(new _(s,u));return a};_.getRsBlockTable=function(e,n){switch(n){case te.L:return _.RS_BLOCK_TABLE[(e-1)*4+0];case te.M:return _.RS_BLOCK_TABLE[(e-1)*4+1];case te.Q:return _.RS_BLOCK_TABLE[(e-1)*4+2];case te.H:return _.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var eo=_;function Je(){this.buffer=new Array,this.length=0}Je.prototype={get:function(e){var n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)==1},put:function(e,n){for(var o=0;o<n;o++)this.putBit((e>>>n-o-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var no=Je,j={glog:function(e){if(e<1)throw new Error("glog("+e+")");return j.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return j.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var w=0;w<8;w++)j.EXP_TABLE[w]=1<<w;for(var w=8;w<256;w++)j.EXP_TABLE[w]=j.EXP_TABLE[w-4]^j.EXP_TABLE[w-5]^j.EXP_TABLE[w-6]^j.EXP_TABLE[w-8];for(var w=0;w<255;w++)j.LOG_TABLE[j.EXP_TABLE[w]]=w;var Xe=j,K=Xe;function ae(e,n){if(e.length==null)throw new Error(e.length+"/"+n);for(var o=0;o<e.length&&e[o]==0;)o++;this.num=new Array(e.length-o+n);for(var t=0;t<e.length-o;t++)this.num[t]=e[t+o]}ae.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var n=new Array(this.getLength()+e.getLength()-1),o=0;o<this.getLength();o++)for(var t=0;t<e.getLength();t++)n[o+t]^=K.gexp(K.glog(this.get(o))+K.glog(e.get(t)));return new ae(n,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var n=K.glog(this.get(0))-K.glog(e.get(0)),o=new Array(this.getLength()),t=0;t<this.getLength();t++)o[t]=this.get(t);for(var t=0;t<e.getLength();t++)o[t]^=K.gexp(K.glog(e.get(t))+n);return new ae(o,0).mod(e)}};var en=ae,D=qe,Me=en,to=Xe,U={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},L={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var n=e<<10;L.getBCHDigit(n)-L.getBCHDigit(L.G15)>=0;)n^=L.G15<<L.getBCHDigit(n)-L.getBCHDigit(L.G15);return(e<<10|n)^L.G15_MASK},getBCHTypeNumber:function(e){for(var n=e<<12;L.getBCHDigit(n)-L.getBCHDigit(L.G18)>=0;)n^=L.G18<<L.getBCHDigit(n)-L.getBCHDigit(L.G18);return e<<12|n},getBCHDigit:function(e){for(var n=0;e!=0;)n++,e>>>=1;return n},getPatternPosition:function(e){return L.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,n,o){switch(e){case U.PATTERN000:return(n+o)%2==0;case U.PATTERN001:return n%2==0;case U.PATTERN010:return o%3==0;case U.PATTERN011:return(n+o)%3==0;case U.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case U.PATTERN101:return n*o%2+n*o%3==0;case U.PATTERN110:return(n*o%2+n*o%3)%2==0;case U.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var n=new Me([1],0),o=0;o<e;o++)n=n.multiply(new Me([1,to.gexp(o)],0));return n},getLengthInBits:function(e,n){if(1<=n&&n<10)switch(e){case D.MODE_NUMBER:return 10;case D.MODE_ALPHA_NUM:return 9;case D.MODE_8BIT_BYTE:return 8;case D.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(n<27)switch(e){case D.MODE_NUMBER:return 12;case D.MODE_ALPHA_NUM:return 11;case D.MODE_8BIT_BYTE:return 16;case D.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(n<41)switch(e){case D.MODE_NUMBER:return 14;case D.MODE_ALPHA_NUM:return 13;case D.MODE_8BIT_BYTE:return 16;case D.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+n)},getLostPoint:function(e){for(var n=e.getModuleCount(),o=0,t=0;t<n;t++)for(var a=0;a<n;a++){for(var r=0,d=e.isDark(t,a),s=-1;s<=1;s++)if(!(t+s<0||n<=t+s))for(var u=-1;u<=1;u++)a+u<0||n<=a+u||s==0&&u==0||d==e.isDark(t+s,a+u)&&r++;r>5&&(o+=3+r-5)}for(var t=0;t<n-1;t++)for(var a=0;a<n-1;a++){var c=0;e.isDark(t,a)&&c++,e.isDark(t+1,a)&&c++,e.isDark(t,a+1)&&c++,e.isDark(t+1,a+1)&&c++,(c==0||c==4)&&(o+=3)}for(var t=0;t<n;t++)for(var a=0;a<n-6;a++)e.isDark(t,a)&&!e.isDark(t,a+1)&&e.isDark(t,a+2)&&e.isDark(t,a+3)&&e.isDark(t,a+4)&&!e.isDark(t,a+5)&&e.isDark(t,a+6)&&(o+=40);for(var a=0;a<n;a++)for(var t=0;t<n-6;t++)e.isDark(t,a)&&!e.isDark(t+1,a)&&e.isDark(t+2,a)&&e.isDark(t+3,a)&&e.isDark(t+4,a)&&!e.isDark(t+5,a)&&e.isDark(t+6,a)&&(o+=40);for(var l=0,a=0;a<n;a++)for(var t=0;t<n;t++)e.isDark(t,a)&&l++;var m=Math.abs(100*l/n/n-50)/5;return o+=m*10,o}},oo=L,ao=Xt,nn=eo,tn=no,V=oo,io=en;function k(e,n){this.typeNumber=e,this.errorCorrectLevel=n,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var M=k.prototype;M.addData=function(e){var n=new ao(e);this.dataList.push(n),this.dataCache=null};M.isDark=function(e,n){if(e<0||this.moduleCount<=e||n<0||this.moduleCount<=n)throw new Error(e+","+n);return this.modules[e][n]};M.getModuleCount=function(){return this.moduleCount};M.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var n=nn.getRSBlocks(e,this.errorCorrectLevel),o=new tn,t=0,a=0;a<n.length;a++)t+=n[a].dataCount;for(var a=0;a<this.dataList.length;a++){var r=this.dataList[a];o.put(r.mode,4),o.put(r.getLength(),V.getLengthInBits(r.mode,e)),r.write(o)}if(o.getLengthInBits()<=t*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};M.makeImpl=function(e,n){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[o][t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=k.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)};M.setupPositionProbePattern=function(e,n){for(var o=-1;o<=7;o++)if(!(e+o<=-1||this.moduleCount<=e+o))for(var t=-1;t<=7;t++)n+t<=-1||this.moduleCount<=n+t||(0<=o&&o<=6&&(t==0||t==6)||0<=t&&t<=6&&(o==0||o==6)||2<=o&&o<=4&&2<=t&&t<=4?this.modules[e+o][n+t]=!0:this.modules[e+o][n+t]=!1)};M.getBestMaskPattern=function(){for(var e=0,n=0,o=0;o<8;o++){this.makeImpl(!0,o);var t=V.getLostPoint(this);(o==0||e>t)&&(e=t,n=o)}return n};M.createMovieClip=function(e,n,o){var t=e.createEmptyMovieClip(n,o),a=1;this.make();for(var r=0;r<this.modules.length;r++)for(var d=r*a,s=0;s<this.modules[r].length;s++){var u=s*a,c=this.modules[r][s];c&&(t.beginFill(0,100),t.moveTo(u,d),t.lineTo(u+a,d),t.lineTo(u+a,d+a),t.lineTo(u,d+a),t.endFill())}return t};M.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var n=8;n<this.moduleCount-8;n++)this.modules[6][n]==null&&(this.modules[6][n]=n%2==0)};M.setupPositionAdjustPattern=function(){for(var e=V.getPatternPosition(this.typeNumber),n=0;n<e.length;n++)for(var o=0;o<e.length;o++){var t=e[n],a=e[o];if(this.modules[t][a]==null)for(var r=-2;r<=2;r++)for(var d=-2;d<=2;d++)r==-2||r==2||d==-2||d==2||r==0&&d==0?this.modules[t+r][a+d]=!0:this.modules[t+r][a+d]=!1}};M.setupTypeNumber=function(e){for(var n=V.getBCHTypeNumber(this.typeNumber),o=0;o<18;o++){var t=!e&&(n>>o&1)==1;this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=t}for(var o=0;o<18;o++){var t=!e&&(n>>o&1)==1;this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=t}};M.setupTypeInfo=function(e,n){for(var o=this.errorCorrectLevel<<3|n,t=V.getBCHTypeInfo(o),a=0;a<15;a++){var r=!e&&(t>>a&1)==1;a<6?this.modules[a][8]=r:a<8?this.modules[a+1][8]=r:this.modules[this.moduleCount-15+a][8]=r}for(var a=0;a<15;a++){var r=!e&&(t>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=r:a<9?this.modules[8][15-a-1+1]=r:this.modules[8][15-a-1]=r}this.modules[this.moduleCount-8][8]=!e};M.mapData=function(e,n){for(var o=-1,t=this.moduleCount-1,a=7,r=0,d=this.moduleCount-1;d>0;d-=2)for(d==6&&d--;;){for(var s=0;s<2;s++)if(this.modules[t][d-s]==null){var u=!1;r<e.length&&(u=(e[r]>>>a&1)==1);var c=V.getMask(n,t,d-s);c&&(u=!u),this.modules[t][d-s]=u,a--,a==-1&&(r++,a=7)}if(t+=o,t<0||this.moduleCount<=t){t-=o,o=-o;break}}};k.PAD0=236;k.PAD1=17;k.createData=function(e,n,o){for(var t=nn.getRSBlocks(e,n),a=new tn,r=0;r<o.length;r++){var d=o[r];a.put(d.mode,4),a.put(d.getLength(),V.getLengthInBits(d.mode,e)),d.write(a)}for(var s=0,r=0;r<t.length;r++)s+=t[r].dataCount;if(a.getLengthInBits()>s*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+s*8+")");for(a.getLengthInBits()+4<=s*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=s*8||(a.put(k.PAD0,8),a.getLengthInBits()>=s*8));)a.put(k.PAD1,8);return k.createBytes(a,t)};k.createBytes=function(e,n){for(var o=0,t=0,a=0,r=new Array(n.length),d=new Array(n.length),s=0;s<n.length;s++){var u=n[s].dataCount,c=n[s].totalCount-u;t=Math.max(t,u),a=Math.max(a,c),r[s]=new Array(u);for(var l=0;l<r[s].length;l++)r[s][l]=255&e.buffer[l+o];o+=u;var m=V.getErrorCorrectPolynomial(c),S=new io(r[s],m.getLength()-1),h=S.mod(m);d[s]=new Array(m.getLength()-1);for(var l=0;l<d[s].length;l++){var p=l+h.getLength()-d[s].length;d[s][l]=p>=0?h.get(p):0}}for(var f=0,l=0;l<n.length;l++)f+=n[l].totalCount;for(var x=new Array(f),A=0,l=0;l<t;l++)for(var s=0;s<n.length;s++)l<r[s].length&&(x[A++]=r[s][l]);for(var l=0;l<a;l++)for(var s=0;s<n.length;s++)l<d[s].length&&(x[A++]=d[s][l]);return x};var ro=k;function ie(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ie=function(o){return typeof o}:ie=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ie(e)}function W(){return W=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},W.apply(this,arguments)}function Te(e,n){if(e==null)return{};var o={},t=Object.keys(e),a,r;for(r=0;r<t.length;r++)a=t[r],!(n.indexOf(a)>=0)&&(o[a]=e[a]);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(r=0;r<d.length;r++)a=d[r],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function on(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function De(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function an(e,n,o){return n&&De(e.prototype,n),o&&De(e,o),e}function Ae(e,n){if(n&&(ie(n)==="object"||typeof n=="function"))return n;if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function so(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Y=g,Z=On,sn=ro,dn=Ze;function lo(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1}function ln(e){for(var n="",o=0;o<e.length;o++){var t=e.charCodeAt(o);t<128?n+=String.fromCharCode(t):t<2048?(n+=String.fromCharCode(192|t>>6),n+=String.fromCharCode(128|t&63)):t<55296||t>=57344?(n+=String.fromCharCode(224|t>>12),n+=String.fromCharCode(128|t>>6&63),n+=String.fromCharCode(128|t&63)):(o++,t=65536+((t&1023)<<10|e.charCodeAt(o)&1023),n+=String.fromCharCode(240|t>>18),n+=String.fromCharCode(128|t>>12&63),n+=String.fromCharCode(128|t>>6&63),n+=String.fromCharCode(128|t&63))}return n}var be={size:128,level:"L",bgColor:"#FFFFFF",fgColor:"#000000"},cn={value:Z.string.isRequired,size:Z.number,level:Z.oneOf(["L","M","Q","H"]),bgColor:Z.string,fgColor:Z.string},se=function(e){rn(n,e);function n(){var o,t,a;on(this,n);for(var r=arguments.length,d=new Array(r),s=0;s<r;s++)d[s]=arguments[s];return Ae(a,(t=a=Ae(this,(o=n.__proto__||Object.getPrototypeOf(n)).call.apply(o,[this].concat(d))),Object.defineProperty(so(a),"_canvas",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),t))}return an(n,[{key:"shouldComponentUpdate",value:function(t){var a=this;return Object.keys(n.propTypes).some(function(r){return a.props[r]!==t[r]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var t=this.props,a=t.value,r=t.size,d=t.level,s=t.bgColor,u=t.fgColor,c=new sn(-1,dn[d]);if(c.addData(ln(a)),c.make(),this._canvas!=null){var l=this._canvas,m=l.getContext("2d");if(!m)return;var S=c.modules;if(S===null)return;var h=r/S.length,p=r/S.length,f=(window.devicePixelRatio||1)/lo(m);l.height=l.width=r*f,m.scale(f,f),S.forEach(function(x,A){x.forEach(function(N,v){m&&(m.fillStyle=N?u:s);var T=Math.ceil((v+1)*h)-Math.floor(v*h),P=Math.ceil((A+1)*p)-Math.floor(A*p);m&&m.fillRect(Math.round(v*h),Math.round(A*p),T,P)})})}}},{key:"render",value:function(){var t=this,a=this.props;a.value;var r=a.size;a.level,a.bgColor,a.fgColor;var d=a.style,s=Te(a,["value","size","level","bgColor","fgColor","style"]),u=W({height:r,width:r},d);return Y.createElement("canvas",W({style:u,height:r,width:r,ref:function(l){return t._canvas=l}},s))}}]),n}(Y.Component);Object.defineProperty(se,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:be});Object.defineProperty(se,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:cn});var xe=function(e){rn(n,e);function n(){return on(this,n),Ae(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return an(n,[{key:"shouldComponentUpdate",value:function(t){var a=this;return Object.keys(se.propTypes).some(function(r){return a.props[r]!==t[r]})}},{key:"render",value:function(){var t=this.props,a=t.value,r=t.size,d=t.level,s=t.bgColor,u=t.fgColor,c=Te(t,["value","size","level","bgColor","fgColor"]),l=new sn(-1,dn[d]);l.addData(ln(a)),l.make();var m=l.modules;if(m!==null){var S=[];return m.forEach(function(h,p){var f=null;h.forEach(function(x,A){if(!x&&f!==null){S.push("M".concat(f," ").concat(p,"h").concat(A-f,"v1H").concat(f,"z")),f=null;return}if(A===h.length-1){if(!x)return;f===null?S.push("M".concat(A,",").concat(p," h1v1H").concat(A,"z")):S.push("M".concat(f,",").concat(p," h").concat(A+1-f,"v1H").concat(f,"z"));return}x&&f===null&&(f=A)})}),Y.createElement("svg",W({shapeRendering:"crispEdges",height:r,width:r,viewBox:"0 0 ".concat(m.length," ").concat(m.length)},c),Y.createElement("path",{fill:s,d:"M0,0 h".concat(m.length,"v").concat(m.length,"H0z")}),Y.createElement("path",{fill:u,d:S.join("")}))}}}]),n}(Y.Component);Object.defineProperty(xe,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:be});Object.defineProperty(xe,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:cn});var un=function(n){var o=n.renderAs,t=Te(n,["renderAs"]),a=o==="svg"?xe:se;return Y.createElement(a,t)};un.defaultProps=W({renderAs:"canvas"},be);var co=un;const uo=Pn(co),go=e=>{const{secret:n,secretLink:o}=e;return i.jsxs(g.Fragment,{children:[i.jsx(je,{"data-qa-copy":!0,variant:"h3",children:"Scan this QR code to add your Cloud Manager account to your 2FA app:"}),i.jsx(mo,{children:i.jsx(uo,{"data-qa-qr-code":!0,level:"H",size:200,value:o})}),i.jsx(je,{"data-qa-copy":!0,variant:"h3",children:"If your 2FA app does not have a scanner, you can use this secret key:"}),i.jsx(Xn,{hideLabel:!0,label:"Secret Key",value:n})]})},je=C(y,{label:"StyledInstructions"})(({theme:e})=>({marginTop:e.spacing(2)})),mo=C("div",{label:"StyledQRCodeContainer"})(({theme:e})=>({border:"5px solid #fff",display:"inline-block",margin:`${e.spacing(2)} 0`})),ho=e=>{const[n,o]=g.useState(void 0),[t,a]=g.useState(!1),[r,d]=g.useState(""),s=()=>{const{secret:A,username:N}=e,v="Linode";return`otpauth://totp/${v}%3A${N}?secret=${A}&issuer=${v}`},u=A=>{d(A.target.value)},c=()=>{const A=r.replace(/ /g,"");a(!0),Dn(A).then(N=>{o(void 0),a(!1),d(""),e.onSuccess(N.scratch),e.toggleDialog()}).catch(N=>{let v=Ve(N,"Could not confirm code.","tfa_code");v=v.filter(T=>T.reason!=="Invalid token. Two-factor auth not enabled. Please try again."),o(v),a(!1),d(""),Jn()})},{loading:l,secret:m,twoFactorConfirmed:S}=e,h=s(),p=Mn(["tfa_code"],n),f=p.tfa_code,x=p.none;return i.jsxs(g.Fragment,{children:[x&&i.jsx(G,{text:x,variant:"error"}),l?i.jsx(Ee,{}):i.jsx(go,{secret:m,secretLink:h}),i.jsx(F,{spacingBottom:20,spacingTop:44}),i.jsx(zt,{error:f,handleChange:u,onCancel:e.onCancel,onSubmit:c,submitting:t,token:r,twoFactorConfirmed:S})]})},Co=e=>{const{onClose:n,open:o,scratchCode:t}=e;return i.jsxs(J,{actions:i.jsx(X,{secondaryButtonProps:{"data-testid":"submit",label:"Got it",onClick:n}}),onClose:n,open:o,title:"Scratch Code",children:[i.jsx(y,{children:`This scratch code can be used in place of two-factor authentication in the event
          you cannot access your two-factor authentication device. It is limited to a one-time
          use. Be sure to make a note of it and keep it secure, as this is the only time it
          will appear:`}),i.jsx(y,{style:{marginTop:"16px"},variant:"h5",children:t})]})},po=C("div",{label:"StyledRootContainer"})(({theme:e,...n})=>({...n.disabled&&{"& *":{color:e.color.disabledText}}})),fo=C("div",{label:"StyledCTAWrapper"})(({theme:e})=>({alignItems:"center",display:"flex",flexFlow:"row nowrap",justifyContent:"left",marginBottom:e.spacing(3),marginTop:e.spacing(3)})),Ao=C(y,{label:"StyledCopy"})(({theme:e})=>({lineHeight:"20px",marginBottom:e.spacing(),marginTop:e.spacing(),maxWidth:960})),yo=e=>{const{disabled:n,twoFactorEnabled:o}=e,t=a=>{const{onChange:r,twoFactorConfirmed:d}=e,s=a.currentTarget.checked;!s&&d?e.toggleDisableDialog():r(s)};return i.jsx(et,{fullWidth:!0,style:{marginTop:0},children:i.jsx(jn,{control:i.jsx(nt,{checked:o,"data-qa-toggle-tfa":o,disabled:n,onChange:t}),label:o?"Enabled":"Disabled"})})},So=e=>{const n="To use two-factor authentication you must set up your security questions listed below.",{disabled:o,twoFactor:t,username:a}=e,r=ve(),[d,s]=g.useState(void 0),[u,c]=g.useState(!1),[l,m]=g.useState(""),[S,h]=g.useState(!1),[p,f]=g.useState(void 0),[x,A]=g.useState(t),[N,v]=g.useState(t),[T,P]=g.useState(""),{data:E}=$e(),I=(E==null?void 0:E.security_questions.filter(B=>B.response).length)===3;g.useEffect(()=>{v(t)},[t]);const R=B=>{r.invalidateQueries(ke),f("Two-factor authentication has been enabled."),h(!1),A(!0),v(!0),P(B)},de=()=>{s(void 0),f("Two-factor authentication has been disabled."),A(!1),v(!1)},le=()=>{N?q():z(!1)},ee=()=>I?(c(!0),kn().then(B=>{m(B.secret),c(!1),s(void 0)}).catch(B=>(s(Ve(B,"There was an error retrieving your secret key. Please try again.")),c(!1),Promise.reject("Error")))):(s([{reason:`You must add Security Questions to your profile in order to ${t?"reset":"enable"} Two-Factor Authentication`}]),Promise.reject("Error")),q=()=>S?h(!S):ee().then(B=>h(!S)).catch(B=>B),z=B=>{if(s(void 0),f(void 0),B)return ee().then(Re=>{A(!0),c(!1),h(!0)}).catch(Re=>Re);A(!1)},b=Zn({},d)("none"),[ne,ue]=g.useState(!1),[gn,mn]=g.useState(!1),Ie=()=>{ue(B=>!B)},Ne=()=>{mn(B=>!B)};return i.jsxs(g.Fragment,{children:[i.jsxs(po,{...e,children:[i.jsx(y,{"data-qa-title":!0,variant:"h3",children:"Two-Factor Authentication (2FA)"}),p&&i.jsx(G,{spacingBottom:16,spacingTop:16,text:p,variant:"success"}),b&&i.jsx(G,{spacingBottom:16,spacingTop:16,text:b,variant:"error"}),i.jsx(Ao,{"data-qa-copy":!0,variant:"body1",children:"Two-factor authentication increases the security of your Cloud Manager account by requiring two different forms of authentication to log in: your Cloud Manager account password and an authorized security token generated by another platform."}),I&&!t||t?typeof N<"u"&&i.jsx(yo,{disabled:o,onChange:z,toggleDisableDialog:Ie,twoFactorConfirmed:N,twoFactorEnabled:x||!1}):i.jsx(G,{style:{marginTop:"8px"},text:n,typeProps:{style:{fontSize:"0.875rem"}},variant:"warning"}),x&&i.jsx(fo,{children:i.jsx(_n,{"data-qa-hide-show-code":!0,onClick:q,children:S?"Hide QR Code":N?"Reset two-factor authentication":"Show QR Code"})}),x&&S&&a&&N!==void 0&&i.jsx(ho,{loading:u,onCancel:le,onSuccess:R,secret:l,toggleDialog:Ne,twoFactorConfirmed:N,username:a})]}),i.jsx(Co,{onClose:Ne,open:gn,scratchCode:T}),i.jsx(qt,{onClose:Ie,onSuccess:de,open:ne})]})},Wo=()=>{const{data:e,error:n,isLoading:o}=ye(),t=(e==null?void 0:e.authentication_type)??"password",a=!!(e!=null&&e.two_factor_auth),r=e==null?void 0:e.username,d=t!=="password";return n?i.jsx(Un,{errorText:"Unable to load your profile"}):o?i.jsx(Ee,{}):i.jsxs(i.Fragment,{children:[i.jsx(Fn,{segment:"Login & Authentication"}),i.jsx(Kt,{authType:t}),i.jsxs(vo,{children:[i.jsx(Eo,{variant:"h3",children:"Security Settings"}),i.jsx(F,{spacingBottom:16,spacingTop:24}),d?null:i.jsxs(i.Fragment,{children:[i.jsx(gt,{username:r}),i.jsx(F,{spacingBottom:16,spacingTop:22}),i.jsx(So,{twoFactor:a,username:r}),i.jsx(F,{spacingBottom:16,spacingTop:22})]}),i.jsx(Rt,{}),i.jsx(F,{spacingBottom:16,spacingTop:22}),i.jsx(y,{variant:"h3",children:"Phone Verification"}),i.jsxs(To,{variant:"body1",children:["A verified phone number provides our team with a secure method of verifying your identity as the owner of your Cloud Manager user account. This phone number is only ever used to send an SMS message with a verification code. Standard carrier messaging fees may apply. By clicking Send Verification Code you are opting in to receive SMS messages. You may opt out at any time."," ",i.jsx($,{to:"https://www.linode.com/docs/guides/user-security-controls#phone-verification",children:"Learn more about security options."})]}),i.jsx(ut,{}),i.jsx(F,{spacingBottom:16,spacingTop:22}),i.jsx(y,{variant:"h3",children:"SMS Messaging"}),i.jsx(Ct,{}),d?null:i.jsxs(i.Fragment,{children:[i.jsx(F,{spacingBottom:16,spacingTop:22}),i.jsx(Wt,{})]})]})]})},vo=C(Ge,{label:"StyledRootContainer"})(({theme:e})=>({marginBottom:e.spacing(3),padding:e.spacing(3),paddingTop:17})),Eo=C(y,{label:"StyledSecuritySettingsCopy"})(({theme:e})=>({marginBottom:e.spacing(2)})),To=C(y,{label:"StyledMainCopy"})(({theme:e})=>({lineHeight:"20px",marginTop:e.spacing(),maxWidth:960}));export{Wo as AuthenticationSettings,To as StyledMainCopy,vo as StyledRootContainer,Eo as StyledSecuritySettingsCopy};
