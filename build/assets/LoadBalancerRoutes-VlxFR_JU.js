import{j as o,ad as j,bB as h,d0 as b,bJ as f,aq as g,ag as R,b as y,r as x,a0 as F,bN as v,a4 as T,bC as P,f as I}from"./index-Eksrs3uK.js";import{u as w}from"./formik.esm-Kap5lsIh.js";import{D as B}from"./Drawer-A9yKjC3Z.js";import{F as k}from"./FormLabel-2wEwBKx7.js";import{R as C}from"./Radio-HudVgwMW.js";import{R as E}from"./RadioGroup-zpRjMzXK.js";import{a as S,R as L}from"./RoutesTable-3ruUrzE5.js";import{g as A}from"./formikErrorUtils-jhqfCjwU.js";import{s as D}from"./scrollErrorIntoView-6n4Cku1Y.js";import"./ActionMenu-4CPisA_2.js";import"./CollapsibleTable-0WYTbtYD.js";import"./TableRow-phXfWUGW.js";import"./TableHead-Si_pzkLK.js";import"./InlineMenuAction-d5mRENST.js";import"./PaginationFooter-NHWf7fW2.js";import"./TableRowEmpty-aXmC67-Z.js";import"./TableSortCell-hcsagFzN.js";import"./useOrder-rsUMHEuj.js";import"./OrderBy-H-bWJCPy.js";import"./splitAt-pbTnq2Oi.js";import"./usePagination-Sxr0Tlb7.js";import"./loadbalancers-xfUXrZkQ.js";import"./drag-indicator-1t7mhJe7.js";import"./TextTooltip-SPU6hUyt.js";import"./utils-d72dx4mb.js";import"./Autocomplete-XvrzKoAo.js";import"./LinkButton-O1af9aD7.js";import"./Toggle-AbahDP9J.js";import"./serviceTargets-sfLGvdjG.js";import"./ListItem-joIHQeyv.js";const q={label:"",protocol:"http",rules:[]},H=l=>{var d;const{loadbalancerId:n,onClose:s,open:e}=l,{error:t,mutateAsync:i,reset:m}=S(n),r=w({initialValues:q,async onSubmit(a){try{await i(a),p()}catch(c){D(),r.setErrors(A(c))}}}),p=()=>{r.resetForm(),m(),s()},u=(d=t==null?void 0:t.find(a=>!a.field))==null?void 0:d.reason;return o.jsx(B,{onClose:p,open:e,title:"Create Route",children:o.jsxs("form",{onSubmit:r.handleSubmit,children:[u&&o.jsx(j,{spacingBottom:0,text:u,variant:"error"}),o.jsx(h,{errorText:r.touched.label?r.errors.label:void 0,label:"Route Label",name:"label",onChange:r.handleChange,value:r.values.label}),o.jsxs(E,{onChange:(a,c)=>r.setFieldValue("protocol",c),value:r.values.protocol,children:[o.jsx(k,{sx:a=>({marginTop:a.spacing(1)}),children:"Protocol"}),o.jsx(b,{control:o.jsx(C,{}),"data-qa-radio":"HTTP",label:"HTTP",value:"http"}),o.jsx(b,{control:o.jsx(C,{}),"data-qa-radio":"TCP",label:"TCP",value:"tcp"}),o.jsx(f,{error:!0,children:r.touched.protocol&&typeof r.errors.protocol=="string"?g(r.errors.protocol):void 0})]}),o.jsx(R,{primaryButtonProps:{label:"Create Route",loading:r.isSubmitting,type:"submit"},secondaryButtonProps:{label:"Cancel",onClick:p}})]})})},xo=()=>{const{loadbalancerId:l}=y(),[n,s]=x.useState(!1),[e,t]=x.useState(),i=e?{label:{"+contains":e}}:{};return o.jsxs(o.Fragment,{children:[o.jsxs(F,{alignItems:"flex-end",direction:"row",flexWrap:"wrap",gap:2,justifyContent:"space-between",mb:2,mt:1.5,children:[o.jsx(h,{InputProps:{endAdornment:e&&o.jsx(v,{position:"end",children:o.jsx(T,{"aria-label":"Clear",onClick:()=>t(""),size:"small",sx:{padding:"unset"},children:o.jsx(P,{sx:{color:"#aaa !important"}})})})},hideLabel:!0,label:"Filter",onChange:m=>t(m.target.value),placeholder:"Filter",style:{minWidth:"320px"},value:e}),o.jsx(I,{buttonType:"primary",onClick:()=>s(!0),children:"Create Route"})]}),o.jsx(L,{filter:i}),o.jsx(H,{loadbalancerId:Number(l),onClose:()=>s(!1),open:n})]})};export{xo as LoadBalancerRoutes};
