import{s as n,f as ue,T as x,j as s,b0 as ge,V as me,W as $,r,ab as H,G as d,aq as pe,b1 as be,H as he,b2 as ye,b3 as xe,b4 as je,b5 as Se,b6 as fe,b7 as Le,b8 as Te,b9 as P,N as Ee,ba as we,bb as Ce,bc as ve,bd as ke,be as Re,bf as Ie,bg as Be,bh as Ae,bi as qe,aj as ze,bj as De,bk as Ne,ad as w,C as Qe,g as He,an as Pe,bl as Oe}from"./index-Eksrs3uK.js";import{s as G}from"./splitAt-pbTnq2Oi.js";import{a as p,T as M,b as $e,c as Ge}from"./TableRow-phXfWUGW.js";import{D as Me}from"./DateTimeDisplay-bXC9mIcz.js";import{S as Ve}from"./ShowMore-4P5e_z46.js";import{R as Fe}from"./RegionIndicator-N3gnZFRh.js";import{T as Ke}from"./TableHead-Si_pzkLK.js";const _e=n(ue,{label:"StyledButton"})(({theme:e})=>({marginTop:e.spacing(),width:"10%"})),We=n(x,{label:"StyledTypography"})(({theme:e})=>({marginBottom:e.spacing(),[e.breakpoints.down("md")]:{marginLeft:e.spacing()}})),Ue=e=>{const{tags:t}=e,u=m=>m.map(y=>s.jsx(ge,{colorVariant:"lightBlue",component:"button",label:y},y)),g=m=>s.jsx(Ve,{ariaItemType:"tags",items:m,render:u});if(!t)return null;const[a,h]=G(3,t);return s.jsxs(s.Fragment,{children:[u(a),!!h.length&&g(h)]})},Ye=n(p,{label:"StyledCreatedTableCell"})(({theme:e})=>({[e.breakpoints.up("md")]:{width:"20%"},width:"100%"})),Je=n(p,{label:"StyledLabelTableCell"})(({theme:e})=>({"& a":{display:"inline-block"},[e.breakpoints.up("md")]:{width:"35%"},width:"60%"})),Xe=n(p,{label:"StyledRegionTableCell"})(({theme:e})=>({[e.breakpoints.up("md")]:{width:"15%"},width:"100%"})),Ze=n(p,{label:"StyledTagTableCell"})(({theme:e})=>({[e.breakpoints.up("md")]:{width:"30%"},width:"100%"})),e0=n(M,{label:"StyledTableRow"})(({theme:e})=>({"& td":{paddingBottom:4,paddingTop:4},paddingBottom:"2px",paddingTop:0,transition:e.transitions.create(["background-color"]),width:"100%"})),s0=n(me,{label:"StyledLink"})(({theme:e})=>({color:e.textColors.linkActiveLight,display:"block",fontFamily:e.font.bold,fontSize:".875rem",lineHeight:"1.125rem"})),O=e=>{const{result:t}=e;return s.jsxs(e0,{ariaLabel:t.label,"data-qa-result-row":t.label,children:[s.jsxs(Je,{children:[s.jsx(s0,{title:t.label,to:t.data.path,children:t.label}),s.jsx(x,{fontSize:"0.80rem",variant:"body1",children:t.data.description})]}),s.jsx(Xe,{children:t.data.region&&s.jsx(Fe,{region:t.data.region})}),s.jsxs($,{mdDown:!0,children:[s.jsx(Ye,{children:t.data.created&&s.jsx(x,{children:s.jsx(Me,{value:t.data.created})})}),s.jsx(Ze,{children:s.jsx(Ue,{"data-testid":"result-tags",tags:t.data.tags})})]})]})},t0=e=>{const{entity:t,groupSize:u,results:g}=e,[a,h]=r.useState(!1),m=()=>{h(b=>!b)};if(H(g))return null;const[y,l]=g.length>u?G(u,g):[g,[]];return s.jsxs(d,{children:[s.jsx(We,{"data-qa-entity-header":t,variant:"h2",children:pe(t)}),s.jsxs($e,{"aria-label":"Search Results",children:[s.jsx(Ke,{children:s.jsxs(M,{children:[s.jsx(p,{children:"Label"}),s.jsx(p,{children:"Region"}),s.jsxs($,{mdDown:!0,children:[s.jsx(p,{children:"Created"}),s.jsx(p,{children:"Tags"})]})]})}),s.jsxs(Ge,{children:[y.map((b,j)=>s.jsx(O,{"data-qa-result-row-component":!0,result:b},j)),a&&l.map((b,j)=>s.jsx(O,{"data-qa-result-row-component":!0,result:b},j))]})]}),!H(l)&&s.jsx(_e,{buttonType:"primary","data-qa-show-more-toggle":!0,onClick:m,children:a?"Show Less":"Show All"})]})},a0=e=>r.createElement("svg",{height:"512pt",viewBox:"-64 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("g",{fillRule:"evenodd",fill:"currentColor"},r.createElement("path",{d:"m10 401.996094c5.523438 0 10-4.476563 10-10v-371.996094h344.445312v20.003906c0 5.519532 4.476563 10 10 10 5.523438 0 10-4.480468 10-10v-30.003906c0-5.523438-4.476562-10-10-10h-364.445312c-5.523438 0-10 4.476562-10 10v381.996094c0 5.523437 4.476562 10 10 10zm0 0"}),r.createElement("path",{d:"m374.445312 110.003906c-5.523437 0-10 4.476563-10 10v267.976563h-94.019531c-5.523437 0-10 4.476562-10 10v94.019531h-240.425781v-20.003906c0-5.519532-4.476562-10-10-10s-10 4.480468-10 10v30.003906c0 5.523438 4.476562 10 10 10h260.425781c.050781 0 .101563-.007812.15625-.007812.273438-.003907.546875-.015626.820313-.039063.167968-.015625.332031-.050781.496094-.074219.15625-.023437.316406-.039062.46875-.070312.167968-.03125.332031-.082032.5-.121094.148437-.039062.300781-.070312.449218-.113281.15625-.046875.304688-.109375.457032-.164063.15625-.054687.3125-.101562.464843-.164062.136719-.058594.269531-.128906.402344-.191406.164063-.074219.328125-.144532.484375-.226563.125-.066406.246094-.144531.367188-.21875.160156-.09375.320312-.179687.472656-.285156.144531-.09375.277344-.203125.414062-.304688.128906-.09375.257813-.179687.378906-.28125.257813-.207031.503907-.429687.738282-.667969l104.019531-104.019531c.316406-.316406.601563-.65625.867187-1.007812.070313-.085938.136719-.175781.199219-.265625.25-.355469.488281-.714844.691407-1.097656.011718-.023438.019531-.046876.03125-.070313.1875-.363281.351562-.738281.492187-1.121094.039063-.101562.078125-.207031.113281-.3125.136719-.40625.257813-.816406.34375-1.238281 0-.007812 0-.015625.003906-.027344.078126-.410156.125-.832031.152344-1.253906.011719-.113281.015625-.226562.019532-.339844.003906-.113281.015624-.222656.015624-.335937v-277.976563c0-5.523437-4.476562-10-10-10zm-94.019531 367.855469v-69.878906h69.875zm0 0"}),r.createElement("path",{d:"m94.222656 308.785156c25.007813-20.148437 60.726563-31.707031 98-31.707031 37.273438 0 72.992188 11.558594 98 31.707031 1.847656 1.492188 4.066406 2.214844 6.269532 2.214844 2.917968 0 5.816406-1.273438 7.792968-3.726562 3.464844-4.300782 2.785156-10.597657-1.515625-14.0625-28.496093-22.960938-68.792969-36.132813-110.546875-36.132813s-82.050781 13.171875-110.546875 36.132813c-4.304687 3.464843-4.980469 9.761718-1.515625 14.0625 3.464844 4.296874 9.761719 4.980468 14.0625 1.511718zm0 0"}),r.createElement("path",{d:"m303.566406 107.925781c-3.902344-3.90625-10.234375-3.90625-14.140625 0l-22.597656 22.597657-22.601563-22.597657c-3.902343-3.90625-10.234374-3.90625-14.140624 0-3.90625 3.902344-3.90625 10.234375 0 14.140625l22.597656 22.597656-22.597656 22.601563c-3.90625 3.902344-3.90625 10.234375 0 14.140625 3.902343 3.90625 10.234374 3.90625 14.140624 0l22.601563-22.597656 22.597656 22.597656c1.953125 1.953125 4.511719 2.929688 7.070313 2.929688s5.117187-.976563 7.070312-2.929688c3.90625-3.90625 3.90625-10.238281 0-14.140625l-22.597656-22.601563 22.597656-22.597656c3.90625-3.90625 3.90625-10.238281 0-14.140625zm0 0"}),r.createElement("path",{d:"m80.878906 181.40625c3.902344 3.902344 10.234375 3.902344 14.140625-.003906l22.597657-22.597656 22.597656 22.597656c1.953125 1.953125 4.511718 2.929687 7.070312 2.929687s5.121094-.976562 7.070313-2.929687c3.90625-3.902344 3.90625-10.234375.003906-14.140625l-22.597656-22.597657 22.597656-22.601562c3.902344-3.902344 3.902344-10.234375-.003906-14.140625-3.902344-3.902344-10.234375-3.90625-14.140625 0l-22.597656 22.597656-22.597657-22.597656c-3.90625-3.90625-10.238281-3.90625-14.140625 0-3.90625 3.90625-3.90625 10.238281 0 14.140625l22.597656 22.601562-22.597656 22.597657c-3.90625 3.90625-3.90625 10.238281 0 14.144531zm0 0"}),r.createElement("path",{d:"m10 441.996094c5.507812 0 10-4.488282 10-10 0-5.507813-4.492188-10-10-10s-10 4.492187-10 10c0 5.511718 4.492188 10 10 10zm0 0"}),r.createElement("path",{d:"m374.445312 70.003906c-5.507812 0-10 4.488282-10 10 0 5.507813 4.492188 10 10 10 5.507813 0 10-4.492187 10-10 0-5.511718-4.492187-10-10-10zm0 0"}))),r0=n(be,{label:"StyledStack"})(({theme:e})=>({alignItems:"center",padding:`${e.spacing(10)} ${e.spacing(4)}`,[e.breakpoints.down("md")]:{padding:e.spacing(4)}})),n0=n(d,{label:"StyledGrid"})(({theme:e})=>({alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",padding:`${e.spacing(10)} ${e.spacing(4)}`})),l0=n(a0,{label:"StyledError"})(({theme:e})=>({color:e.palette.text.primary,height:60,marginBottom:e.spacing(4),width:60})),o0=n(he,{label:"StyledH1Header"})(({theme:e})=>({marginBottom:e.spacing(),[e.breakpoints.down("md")]:{marginLeft:e.spacing()}})),i0=n(d,{label:"StyledRootGrid"})({padding:0,width:"calc(100% + 16px)"}),c0={buckets:"Buckets",domains:"Domains",images:"Images",kubernetesClusters:"Kubernetes",linodes:"Linodes",nodebalancers:"NodeBalancers",volumes:"Volumes"},d0=e=>{e=e.split("");for(let t=0;t<e.length;t+=2)e[t]=s.jsx("span",{children:e[t]},t);return e},u0=e=>{const{entities:t,search:u,searchResultsByEntity:g}=e,a=ye(),{data:h,error:m,isLoading:y}=xe(!a),{data:l,error:b,isLoading:j}=je(h,!a),{data:C,error:V,isLoading:F}=Se(!a),{data:v,error:K,isLoading:_}=fe(!a),{data:k,error:W,isLoading:U}=Le(!a),{data:R,error:Y,isLoading:J}=Te({},{},!a),{data:I,error:X,isLoading:Z}=P({},{is_public:!1},!a),{data:ee}=P({},{is_public:!0},!a),{data:L,error:se,isLoading:te}=Ee({},{},!a),{data:B}=we(),ae=Ce((L??[]).map(o=>o.type).filter(ve)),re=ke(ae),ne=(L??[]).map(o=>{const i=Re(o,ee??[]);return Ie(o,re,i)}),[le,oe]=r.useState({}),[A,q]=r.useState(null),[ie,T]=r.useState(!1);let c="",z=!1;try{c=Be(e.location.search,"query")}catch{z=!0}const{searchAPI:ce}=Ae(!qe(c)),D=r.useRef(ze(500,!1,o=>{T(!0),ce(o).then(i=>{oe(i.searchResultsByEntity),T(!1),q(null)}).catch(i=>{q(Pe(i,"Error loading search results")[0].reason),T(!1)})})).current;r.useEffect(()=>{a?D(c):u(c,(l==null?void 0:l.buckets)??[],C??[],R??[],v??[],I??[],B??[],ne??[],k??[])},[c,t,u,a,D,l,C,R,v,I,B,k,L]);const de=()=>{const i=[[se,"Linodes"],[b,"Buckets"],[V,"Domains"],[Y,"Volumes"],[X,"Images"],[W,"NodeBalancers"],[K,"Kubernetes"],[m,"Object Storage"],[l&&l.errors.length>0&&!m,`Object Storage in ${l==null?void 0:l.errors.map(S=>S.cluster.region).join(", ")}`]].filter(S=>S[0]);return i.length>0?`Could not retrieve search results for: ${i.map(S=>S[1]).join(", ")}`:!1},E=a?le:g,N=De(E,Ne),f=te||j||y||F||J||_||Z||U,Q=de();return s.jsxs(i0,{container:!0,direction:"column",spacing:2,children:[s.jsx(d,{children:!N&&!f&&s.jsx(o0,{title:`Search Results ${c&&`for "${c}"`}`})}),Q&&s.jsx(d,{children:s.jsx(w,{text:Q,variant:"error"})}),A&&s.jsx(d,{children:s.jsx(w,{text:A,variant:"error"})}),z&&s.jsx(d,{children:s.jsx(w,{text:"Invalid query",variant:"error"})}),(f||ie)&&s.jsx(d,{"data-qa-search-loading":!0,"data-testid":"loading",children:s.jsx(Qe,{})}),N&&!f&&s.jsx(n0,{"data-qa-empty-state":!0,children:s.jsxs(r0,{children:[s.jsx(l0,{}),s.jsx(x,{style:{marginBottom:16},children:"You searched for ..."}),s.jsx(x,{className:"resultq",children:c&&d0(c)}),s.jsx(x,{className:"nothing",style:{marginTop:56},children:"Sorry, no results for this one"})]})}),!f&&s.jsx(d,{sx:{padding:0},children:Object.keys(E).map((o,i)=>s.jsx(t0,{entity:c0[o],groupSize:100,results:E[o]},i))})]})},j0=He(Oe())(u0);export{u0 as SearchLanding,j0 as default};
