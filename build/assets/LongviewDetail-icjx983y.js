import{r as d,c4 as ye,c5 as we,jL as Ce,ab as ke,j as t,bI as ve,s as N,T as R,G as P,aa as W,m as Te,$ as Se,E as ee,d7 as ge,cb as X,aW as z,co as $,jW as Y,ad as J,a1 as te,Q,B as q,C as pe,eN as Le,bB as Pe,jX as De,jY as Ae,g as Re,_ as se,ao as Me,hh as Ie,K as Ne,bq as _e}from"./index-Eksrs3uK.js";import{L as $e}from"./LandingHeader-JXAVBhqg.js";import{S as G}from"./SafeTabPanel-S0Pp8CVT.js";import{T as Ee}from"./TabLinkList-BrXtJznm.js";import{a as Ge,T as qe}from"./TabList-4PWL4GSj.js";import{w as Ue}from"./longview.container-N5k_O7w1.js";import{g as Oe,w as Be,u as ze,a as le}from"./useClientLastUpdated-a0PNleVi.js";import{u as ce}from"./useAPIRequest-UcK5fafY.js";import{L as Fe,r as We}from"./LineGraph-UgU3EQj3.js";import{s as Qe,d as E,g as he,f as re,c as me,e as Ke,h as H}from"./utilities-JekaXHyt.js";import{l as Ve}from"./over-27tc0FF7.js";import{s as He}from"./set-2Chj4B2I.js";import{s as Xe}from"./sortBy-avzW26A0.js";import{O as Ye}from"./OrderBy-H-bWJCPy.js";import{b as Je,T as xe,c as Ze,a as O}from"./TableRow-phXfWUGW.js";import{T as et}from"./TableRowEmpty-aXmC67-Z.js";import{T as tt}from"./TableRowError-8gKmGX7P.js";import{T as st}from"./TableRowLoading-iP7zIRHG.js";import{T as B}from"./TableSortCell-hcsagFzN.js";import{u as rt}from"./useWindowDimensions-Dnr94FWA.js";import{T as at}from"./TableHead-Si_pzkLK.js";const K=(s,e)=>e-s<60*60*25,U=(s,e,r,n)=>{const c=d.useRef(0),o=d.useRef(!0),[h,l]=d.useState({}),[i,a]=d.useState(!1),[u,g]=d.useState(),p=(m=!0)=>{if(o.current&&!(!r||!n||!e))return m&&(a(!0),l({})),Oe(e,{end:n,fields:s,start:r}).then(b=>{o.current&&(a(!1),g(void 0),l(b.DATA))}).catch(b=>{var j,x;o.current&&(a(!1),g(((x=(j=b.NOTIFICATIONS)==null?void 0:j[0])==null?void 0:x.TEXT)??"Unable to retrieve data."))})};return d.useEffect(()=>{if(e)return c.current=window.setInterval(()=>{document.visibilityState==="visible"&&p(!1)},1e4),()=>{o.current=!1,clearInterval(c.current)}},[e]),{data:h,error:u,loading:i,request:p}},ae=d.memo(s=>{const{defaultValue:e,handleStatsChange:r,...n}=s,{data:c,refetch:o}=ye(),{mutateAsync:h}=we(),[l,i]=d.useState(!1);d.useEffect(()=>{Ce().then(b=>{i(!ke(b))}).catch()},[]);const[a,u]=d.useState((c==null?void 0:c.longviewTimeRange)||e||"Past 30 Minutes"),g=Date.now()/1e3;d.useEffect(()=>{r&&r(Math.round(de(a,g,new Date().getFullYear())),Math.round(g))},[]);const p=nt(l,`${new Date().getFullYear()}`),m=b=>{u(b.value),o().then(({data:j})=>j??Promise.reject()).then(j=>{h({...j,longviewTimeRange:b.value})}).catch(),r&&r(Math.round(de(b.value,g,new Date().getFullYear())),Math.round(g))};return t.jsx(ve,{...n,isClearable:!1,isSearchable:!1,onChange:m,options:p,small:!0,value:p.find(b=>b.label===a)||p[0]})}),nt=(s,e)=>{const r=[{label:"Past 30 Minutes",value:"Past 30 Minutes"},{label:"Past 12 Hours",value:"Past 12 Hours"}];return s?[...r,{label:"Past 24 Hours",value:"Past 24 Hours"},{label:"Past 7 Days",value:"Past 7 Days"},{label:"Past 30 Days",value:"Past 30 Days"},{label:"Past Year",value:"Past Year"},{label:`${e}`,value:`${e}`}]:r},de=(s,e,r)=>{switch(s){case"Past 30 Minutes":return e-30*60;case"Past 12 Hours":return e-12*60*60;case"Past 24 Hours":return e-24*60*60;case"Past 7 Days":return e-7*24*60*60;case"Past 30 Days":return e-30*24*60*60;case"Past Year":return e-365*24*60*60;default:return new Date(`Jan 1 ${r}`).getTime()/1e3}},Z=N(ae,{label:"StyledTimeRangeSelect"})({width:250}),ne=N(R,{label:"StyledTypography"})(({theme:s})=>({[s.breakpoints.down("lg")]:{marginLeft:s.spacing(),marginRight:s.spacing()}})),D=N(P,{label:"StyledItemGrid"})({boxSizing:"border-box",margin:"0"}),I=N(P,{label:"StyledSmallGraphGrid"})(({theme:s})=>({boxSizing:"border-box",margin:"0",marginTop:`calc(${s.spacing(6)} + 3px)`,[s.breakpoints.down("md")]:{marginTop:s.spacing(3.25)}})),oe=N(W,{label:"StyledRootPaper"})(({theme:s})=>({padding:`${s.spacing(3.25)} ${s.spacing(3.25)} ${s.spacing(5.5)}`})),ot=Te()(s=>({message:{left:"50%",position:"absolute",top:"45%",transform:"translate(-50%, -50%)"},title:{"& > span":{color:s.palette.text.primary},color:s.color.headline,fontFamily:s.font.bold,fontSize:"1rem"}})),T=d.memo(s=>{const{classes:e}=ot(),{ariaLabel:r,error:n,loading:c,subtitle:o,title:h,...l}=s,i=n?void 0:c?"Loading data...":it(s.data)?"No data to display":void 0;return t.jsxs(d.Fragment,{children:[t.jsxs(R,{className:e.title,variant:"body1",children:[h,o&&t.jsxs(d.Fragment,{children:[" ",t.jsxs("span",{children:["(",o,")"]})]})]}),t.jsx(Se,{spacingBottom:16,spacingTop:16}),t.jsxs("div",{style:{position:"relative"},children:[n?t.jsx("div",{style:{height:s.chartHeight||"300px"},children:t.jsx(ee,{errorText:n})}):t.jsx(Fe,{...l,ariaLabel:r}),i&&t.jsx("div",{className:e.message,children:i})]})]})}),it=s=>s.every(e=>e.data.length===0||e.data.every(r=>r[1]===null)),lt=s=>{if(typeof s!="number")return"No data";const e=s>=1||s<=.01?0:2;return s.toFixed(e)+"%"},is=(s,e,r)=>{let n=ge(s);return r.forEach(c=>{const o=X([],c,s),h=be(o,e);n=He(Ve(c),h,n)}),n},be=(s,e)=>{const r=ge(s);return X(0,[0,"x"],s)-e>60*5&&r.unshift({x:e,y:null}),r},F=(s,e,r,n)=>s.length===0?[[e*1e3,null],[r*1e3,null]]:be(s,e).map(c=>[c.x*1e3,n?n(c.y):c.y]),fe=s=>s===null?s:s*1024,ie=d.memo(s=>{const{data:e,end:r,error:n,isToday:c,loading:o,start:h,timezone:l}=s,i=z(),a=d.useCallback(F,[e,h,r]),u=d.useMemo(()=>Qe(e),[e]),g=u.ioreadkbytes??[],p=u.iowritekbytes??[],m=Math.max(E(g),E(p)),b=$(m).unit,j=u.cpu??[],x=u.mem??[],w=u.count??[],C=Math.max(E(w),10),f=$(E(u.mem??[])*1024).unit,k={error:n,loading:o,nativeLegend:!0,showToday:c,timezone:l};return t.jsxs(t.Fragment,{children:[t.jsx(D,{xs:12,children:t.jsxs(P,{container:!0,direction:"row",spacing:2,children:[t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:i.graphs.cpu.percent,borderColor:"transparent",data:a(j,h,r),label:"CPU"}],ariaLabel:"CPU Usage Graph",subtitle:"%",title:"CPU",unit:"%",...k})}),t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:i.graphs.ram,borderColor:"transparent",data:a(x,h,r,fe),label:"RAM"}],formatData:y=>Y(f,y),ariaLabel:"RAM Usage Graph",formatTooltip:y=>$(y).formatted,subtitle:f,title:"RAM",...k})})]})}),t.jsx(D,{xs:12,children:t.jsxs(P,{container:!0,direction:"row",spacing:2,children:[t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:i.graphs.diskIO.read,borderColor:"transparent",data:a(g,h,r),label:"Read"},{backgroundColor:i.graphs.diskIO.write,borderColor:"transparent",data:a(p,h,r),label:"Write"}],formatData:y=>Y(b,y),ariaLabel:"Disk I/O Graph",formatTooltip:y=>$(y).formatted,subtitle:`${b}/s`,title:"Disk I/O",unit:"/s",...k})}),t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:i.graphs.processCount,borderColor:"transparent",data:a(w,h,r),label:"Count"}],ariaLabel:"Process Count Graph",suggestedMax:C,title:"Process Count",...k})})]})})]})}),ct=d.memo(s=>{const{data:e,end:r,error:n,isToday:c,loading:o,processesData:h,processesError:l,processesLoading:i,start:a,timezone:u}=s,g=z(),p=d.useCallback(F,[e,a,r]),m=(e==null?void 0:e.Workers["Waiting for Connection"])??[],b=(e==null?void 0:e.Workers["Starting up"])??[],j=(e==null?void 0:e.Workers["Reading Request"])??[],x=(e==null?void 0:e.Workers["Sending Reply"])??[],w=(e==null?void 0:e.Workers.Keepalive)??[],C=(e==null?void 0:e.Workers["DNS Lookup"])??[],f=(e==null?void 0:e.Workers["Closing connection"])??[],k=(e==null?void 0:e.Workers.Logging)??[],y=(e==null?void 0:e.Workers["Gracefully finishing"])??[],v=(e==null?void 0:e.Workers["Idle cleanup of worker"])??[],S=(e==null?void 0:e["Total kBytes"])??[],L=(e==null?void 0:e["Total Accesses"])??[],A=d.useMemo(()=>he(E(S)),[S]),M={error:n,loading:o,nativeLegend:!0,showToday:c,timezone:u};return t.jsx(oe,{children:t.jsxs(P,{container:!0,direction:"column",spacing:0,children:[t.jsx(D,{xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.requests,borderColor:"transparent",data:p(L,a,r),label:"Requests"}],ariaLabel:"Requests Per Second Graph",subtitle:"requests/s",title:"Requests",...M})}),t.jsx(D,{xs:12,children:t.jsxs(P,{container:!0,direction:"row",children:[t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.network.outbound,borderColor:"transparent",data:p(S,a,r,dt),label:"Throughput"}],formatData:V=>We(me(V*8,A)),ariaLabel:"Throughput Graph",formatTooltip:re,subtitle:`${A}/s`,title:"Throughput",unit:"/s",...M})}),t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.workers.waiting,borderColor:"transparent",data:p(m,a,r),label:"Waiting"},{backgroundColor:g.graphs.workers.starting,borderColor:"transparent",data:p(b,a,r),label:"Starting"},{backgroundColor:g.graphs.workers.reading,borderColor:"transparent",data:p(j,a,r),label:"Reading"},{backgroundColor:g.graphs.workers.sending,borderColor:"transparent",data:p(x,a,r),label:"Sending"},{backgroundColor:g.graphs.workers.keepAlive,borderColor:"transparent",data:p(w,a,r),label:"Keepalive"},{backgroundColor:g.graphs.workers.DNSLookup,borderColor:"transparent",data:p(C,a,r),label:"DNS Lookup"},{backgroundColor:g.graphs.workers.closing,borderColor:"transparent",data:p(f,a,r),label:"Closing"},{backgroundColor:g.graphs.workers.logging,borderColor:"transparent",data:p(k,a,r),label:"Logging"},{backgroundColor:g.graphs.workers.finishing,borderColor:"transparent",data:p(y,a,r),label:"Finishing"},{backgroundColor:g.graphs.workers.cleanup,borderColor:"transparent",data:p(v,a,r),label:"Cleanup"}],ariaLabel:"Workers Graph",title:"Workers",...M})})]})}),t.jsx(ie,{data:h,end:r,error:l||n,isToday:c,loading:i,start:a,timezone:u})]})})}),dt=s=>s===null?null:s*1024,ut=d.memo(s=>{var f,k,y,v,S,L;const{clientAPIKey:e,lastUpdated:r,lastUpdatedError:n,timezone:c}=s,[o,h]=d.useState(),[l,i]=d.useState({end:0,start:0}),{data:a,error:u,loading:g,request:p}=U(["apache"],e,l.start,l.end),m=U(["apacheProcesses"],e,l.start,l.end),b=(k=(f=a.Applications)==null?void 0:f.Apache)==null?void 0:k.version;!o&&b&&h(b),d.useEffect(()=>{p(),m.request()},[l,e,r,n]);const j=(A,M)=>{i({end:M,start:A})},x=(y=a.Applications)==null?void 0:y.Apache,w=K(l.start,l.end),C=Number(x==null?void 0:x.status)>0?x==null?void 0:x.status_message:null;return C!==null?t.jsxs(J,{variant:"warning",children:[t.jsx(R,{children:C}),t.jsxs(R,{children:["See our"," ",t.jsx(te,{to:"https://www.linode.com/docs/platform/longview/longview-app-for-apache/#troubleshooting",children:"guide"})," ","for help troubleshooting the Apache Longview app."]})]}):t.jsxs(P,{container:!0,direction:"column",spacing:2,children:[t.jsx(Q,{segment:"Apache"}),t.jsx(P,{sx:{boxSizing:"border-box",margin:"0"},xs:12,children:t.jsxs(q,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",children:[t.jsxs("div",{children:[t.jsx(ne,{variant:"h2",children:"Apache"}),o&&t.jsx(R,{variant:"body1",children:o})]}),t.jsx(Z,{defaultValue:"Past 30 Minutes",handleStatsChange:j,hideLabel:!0,label:"Select Time Range",small:!0})]})}),t.jsx(P,{className:"py0",sx:{boxSizing:"border-box",margin:"0"},xs:12,children:t.jsx(ct,{data:(v=a==null?void 0:a.Applications)==null?void 0:v.Apache,end:l.end,error:((S=n==null?void 0:n[0])==null?void 0:S.reason)||u,isToday:w,loading:g,processesData:((L=m.data)==null?void 0:L.Processes)??{},processesError:m.error,processesLoading:m.loading,start:l.start,timezone:c})})]})}),gt=s=>{const{data:e,end:r,error:n,isToday:c,loading:o,processesData:h,processesError:l,processesLoading:i,start:a,timezone:u}=s,g=z(),p=d.useCallback(F,[e,a,r]),m=(e==null?void 0:e.Com_select)??[],b=(e==null?void 0:e.Com_update)??[],j=(e==null?void 0:e.Com_insert)??[],x=(e==null?void 0:e.Com_delete)??[],w=(e==null?void 0:e.Aborted_connects)??[],C=(e==null?void 0:e.Aborted_clients)??[],f=(e==null?void 0:e.Slow_queries)??[],k=(e==null?void 0:e.Connections)??[],y=(e==null?void 0:e.Bytes_received)??[],v=(e==null?void 0:e.Bytes_sent)??[],{formatNetwork:S,maxUnit:L}=Ke(y,v);return t.jsx(oe,{children:t.jsxs(P,{container:!0,direction:"column",spacing:0,children:[t.jsx(D,{xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.queries.select,borderColor:"transparent",data:p(m,a,r),label:"SELECT"},{backgroundColor:g.graphs.queries.update,borderColor:"transparent",data:p(b,a,r),label:"UPDATE"},{backgroundColor:g.graphs.queries.insert,borderColor:"transparent",data:p(j,a,r),label:"INSERT"},{backgroundColor:g.graphs.queries.delete,borderColor:"transparent",data:p(x,a,r),label:"DELETE"}],ariaLabel:"Queries Per Second Graph",error:n,loading:o,nativeLegend:!0,showToday:c,subtitle:"queries/s",timezone:u,title:"Queries"})}),t.jsx(D,{xs:12,children:t.jsxs(P,{container:!0,direction:"row",children:[t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.network.inbound,borderColor:"transparent",data:p(y,a,r),label:"Inbound"},{backgroundColor:g.graphs.network.outbound,borderColor:"transparent",data:p(v,a,r),label:"Outbound"}],ariaLabel:"Throughput Graph",error:n,formatData:S,formatTooltip:re,loading:o,nativeLegend:!0,showToday:c,subtitle:`${L}/s`,timezone:u,title:"Throughput",unit:"/s"})}),t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.connections.accepted,borderColor:"transparent",data:p(k,a,r),label:"Connections"}],ariaLabel:"Connections Per Second Graph",error:n,loading:o,nativeLegend:!0,showToday:c,subtitle:"connections/s",timezone:u,title:"Connections",unit:" connections/s"})})]})}),t.jsx(D,{xs:12,children:t.jsxs(P,{container:!0,direction:"row",children:[t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.slowQueries,borderColor:"transparent",data:p(f,a,r),label:"Slow Queries"}],ariaLabel:"Slow Queries Graph",error:n,loading:o,nativeLegend:!0,showToday:c,timezone:u,title:"Slow Queries"})}),t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.aborted.connections,borderColor:"transparent",data:p(w,a,r,ue),label:"Connections"},{backgroundColor:g.graphs.aborted.clients,borderColor:"transparent",data:p(C,a,r,ue),label:"Clients"}],ariaLabel:"Aborted Clients and Connections Graph",error:n,loading:o,nativeLegend:!0,showToday:c,timezone:u,title:"Aborted"})})]})}),t.jsx(ie,{data:h,end:r,error:l||n,isToday:c,loading:i,start:a,timezone:u})]})})},ue=s=>s===null?s:Math.ceil(s),pt=d.memo(s=>{var f,k,y,v,S,L;const{clientAPIKey:e,lastUpdated:r,lastUpdatedError:n,timezone:c}=s,[o,h]=d.useState(),[l,i]=d.useState({end:0,start:0}),{data:a,error:u,loading:g,request:p}=U(["mysql"],e,l.start,l.end),m=U(["mysqlProcesses"],e,l.start,l.end),b=(k=(f=a.Applications)==null?void 0:f.MySQL)==null?void 0:k.version;!o&&b&&h(b),d.useEffect(()=>{p(),m.request()},[l,e,r,n]);const j=(A,M)=>{i({end:M,start:A})},x=(y=a.Applications)==null?void 0:y.MySQL,w=K(l.start,l.end),C=Number(x==null?void 0:x.status)>0?x==null?void 0:x.status_message:null;return C!==null?t.jsxs(J,{variant:"warning",children:[t.jsx(R,{children:C}),t.jsxs(R,{children:["See our"," ",t.jsx(te,{to:"https://www.linode.com/docs/platform/longview/longview-app-for-mysql/#troubleshooting",children:"guide"})," ","for help troubleshooting the MySQL Longview app."]})]}):t.jsxs(P,{container:!0,direction:"column",spacing:2,children:[t.jsx(Q,{segment:"MySQL"}),t.jsx(D,{xs:12,children:t.jsxs(q,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",children:[t.jsxs("div",{children:[t.jsx(ne,{variant:"h2",children:"MySQL"}),o&&t.jsx(R,{variant:"body1",children:o})]}),t.jsx(Z,{defaultValue:"Past 30 Minutes",handleStatsChange:j,hideLabel:!0,label:"Select Time Range",small:!0})]})}),t.jsx(D,{className:"py0",xs:12,children:t.jsx(gt,{data:(v=a==null?void 0:a.Applications)==null?void 0:v.MySQL,end:l.end,error:((S=n==null?void 0:n[0])==null?void 0:S.reason)||u,isToday:w,loading:g,processesData:((L=m.data)==null?void 0:L.Processes)??{},processesError:m.error,processesLoading:m.loading,start:l.start,timezone:c})})]})}),ht=d.memo(s=>{const{data:e,end:r,error:n,isToday:c,loading:o,processesData:h,processesError:l,processesLoading:i,start:a,timezone:u}=s,g=z(),p=d.useCallback(F,[e,a,r]),m={error:n,loading:o,nativeLegend:!0,showToday:c,timezone:u};return t.jsx(oe,{children:t.jsxs(P,{container:!0,direction:"column",spacing:0,children:[t.jsx(D,{xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.requests,borderColor:"transparent",data:p((e==null?void 0:e.requests)??[],a,r),label:"Requests"}],ariaLabel:"Requests Per Second Graph",subtitle:"requests/s",title:"Requests",unit:" requests/s",...m})}),t.jsx(D,{xs:12,children:t.jsxs(P,{container:!0,direction:"row",spacing:2,children:[t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.connections.accepted,borderColor:"transparent",data:p((e==null?void 0:e.accepted_cons)??[],a,r),label:"Accepted"},{backgroundColor:g.graphs.connections.handled,borderColor:"transparent",data:p((e==null?void 0:e.handled_cons)??[],a,r),label:"Handled"}],ariaLabel:"Connections Per Second Graph",subtitle:"connections/s",title:"Connections",unit:" connections/s",...m})}),t.jsx(I,{sm:6,xs:12,children:t.jsx(T,{data:[{backgroundColor:g.graphs.workers.waiting,borderColor:"transparent",data:p((e==null?void 0:e.waiting)??[],a,r),label:"Waiting"},{backgroundColor:g.graphs.workers.reading,borderColor:"transparent",data:p((e==null?void 0:e.reading)??[],a,r),label:"Reading"},{backgroundColor:g.graphs.workers.writing,borderColor:"transparent",data:p((e==null?void 0:e.writing)??[],a,r),label:"Writing"}],ariaLabel:"Workers Graph",title:"Workers",...m})})]})}),t.jsx(ie,{data:h,end:r,error:l||n,isToday:c,loading:i,start:a,timezone:u})]})})}),mt=d.memo(s=>{var f,k,y,v,S,L;const{clientAPIKey:e,lastUpdated:r,lastUpdatedError:n,timezone:c}=s,[o,h]=d.useState(),[l,i]=d.useState({end:0,start:0}),{data:a,error:u,loading:g,request:p}=U(["nginx"],e,l.start,l.end),m=U(["nginxProcesses"],e,l.start,l.end),b=(k=(f=a.Applications)==null?void 0:f.Nginx)==null?void 0:k.version;!o&&b&&h(b),d.useEffect(()=>{p(),m.request()},[l,e,r,n]);const j=(A,M)=>{i({end:M,start:A})},x=(y=a.Applications)==null?void 0:y.Nginx,w=K(l.start,l.end),C=Number(x==null?void 0:x.status)>0?x==null?void 0:x.status_message:null;return C!==null?t.jsxs(J,{variant:"warning",children:[t.jsx(R,{children:C}),t.jsxs(R,{children:["See our"," ",t.jsx(te,{to:"https://www.linode.com/docs/platform/longview/longview-app-for-nginx/#troubleshooting",children:"guide"})," ","for help troubleshooting the NGINX Longview app."]})]}):t.jsxs(P,{container:!0,direction:"column",spacing:2,children:[t.jsx(Q,{segment:"NGINX"}),t.jsx(D,{xs:12,children:t.jsxs(q,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",children:[t.jsxs("div",{children:[t.jsx(ne,{variant:"h2",children:"NGINX"}),o&&t.jsx(R,{variant:"body1",children:o})]}),t.jsx(Z,{defaultValue:"Past 30 Minutes",handleStatsChange:j,hideLabel:!0,label:"Select Time Range",small:!0})]})}),t.jsx(D,{className:"py0",xs:12,children:t.jsx(ht,{data:(v=a==null?void 0:a.Applications)==null?void 0:v.Nginx,end:l.end,error:((S=n==null?void 0:n[0])==null?void 0:S.reason)||u,isToday:w,loading:g,processesData:((L=m.data)==null?void 0:L.Processes)??{},processesError:m.error,processesLoading:m.loading,start:l.start,timezone:c})})]})}),xt=N(q,{label:"StyledBox"})(({theme:s})=>({[s.breakpoints.down("lg")]:{marginRight:s.spacing()}})),ls=N(ae,{label:"StyledTimeRangeSelect"})(({theme:s})=>({marginBottom:s.spacing(),width:250})),bt=s=>{const{helperText:e,title:r}=s;return t.jsxs(W,{sx:n=>({"& > h6":{"& > strong":{color:n.color.headline},color:n.color.grey1},marginBottom:n.spacing(2),padding:n.spacing(2)}),children:[t.jsx(R,{variant:"subtitle1",children:t.jsxs(d.Fragment,{children:[t.jsx("strong",{children:r}),!!e&&t.jsx(d.Fragment,{children:" – "}),e]})}),t.jsx("div",{children:s.children})]})},ft=s=>{const{end:e,error:r,isToday:n,loading:c,networkData:o,start:h,timezone:l}=s,i=z(),a=d.useCallback(F,[o,h,e]),u=Object.entries(o).sort(jt);return c&&u.length===0?t.jsx(pe,{}):r?t.jsx(ee,{errorText:r}):u.length===0&&!c?t.jsx(Le,{renderAsSecondary:!0,title:"No network interfaces detected",children:"The Longview agent has not detected any interfaces that it can monitor."}):t.jsx(t.Fragment,{children:u.map((g,p)=>{const[m,b]=g,{rx_bytes:j,tx_bytes:x}=b,w=he(Math.max(E(j),E(x)));return t.jsx(bt,{title:m,children:t.jsx("div",{style:{paddingTop:i.spacing(2)},children:t.jsx(T,{data:[{backgroundColor:i.graphs.network.inbound,borderColor:"transparent",data:a(j,h,e),label:"Inbound"},{backgroundColor:i.graphs.network.outbound,borderColor:"transparent",data:a(x,h,e),label:"Outbound"}],formatData:C=>me(C*8,w),ariaLabel:"Network Traffic Graph",error:r,formatTooltip:re,loading:c,nativeLegend:!0,showToday:n,subtitle:w+"/s",timezone:l,title:"Network Traffic",unit:"/s"})})},`network-interface-card-${p}`)})})},jt=(s,e)=>s[0]>e[0]?1:s[0]<e[0]?-1:0,yt=s=>{var b,j;const{clientAPIKey:e,lastUpdated:r,lastUpdatedError:n,timezone:c}=s,[o,h]=d.useState({end:0,start:0}),{data:l,error:i,loading:a,request:u}=U(["network"],e,o.start,o.end);d.useEffect(()=>{u()},[e,r,n,o]);const g=(x,w)=>{h({end:w,start:x})},p=((b=l==null?void 0:l.Network)==null?void 0:b.Interface)??{},m=K(o.start,o.end);return t.jsxs(P,{container:!0,direction:"column",spacing:2,children:[t.jsx(Q,{segment:"Network"}),t.jsx(D,{xs:12,children:t.jsx(xt,{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"flex-end",children:t.jsx(Z,{defaultValue:"Past 30 Minutes",handleStatsChange:g,hideLabel:!0,label:"Select Time Range",small:!0})})}),t.jsx(D,{className:"py0",xs:12,children:t.jsx(ft,{end:o.end,error:((j=n==null?void 0:n[0])==null?void 0:j.reason)||i,isToday:m,loading:a,networkData:p,start:o.start,timezone:c})})]})},wt=s=>{var M,V;const{error:e,isToday:r,processesData:n,processesLoading:c,selectedProcess:o,time:h,timezone:l}=s,i=z(),{end:a,start:u}=h,g=(o==null?void 0:o.name)??"",p=(o==null?void 0:o.user)??"",m=((V=(M=n.Processes)==null?void 0:M[g])==null?void 0:V[p])??{},b=m.cpu??[],j=m.count??[],x=m.mem??[],w=m.iowritekbytes??[],C=m.ioreadkbytes??[],f=d.useMemo(()=>E(x),[x]),k=$(f*1024).unit,y=d.useMemo(()=>Math.max(E(w),E(C)),[w,C]),v=$(y).unit,S=_=>_&&$(_,{unit:v}).value,L=d.useCallback(F,[n,u,a]),A={error:e,loading:c,showToday:r,timezone:l};return t.jsxs(t.Fragment,{children:[t.jsxs(R,{sx:{[i.breakpoints.down("lg")]:{marginLeft:i.spacing()}},variant:"h2",children:["Process History",g&&`: ${g}`]}),t.jsxs(W,{sx:{marginTop:i.spacing(1.25),padding:i.spacing(3)},children:[t.jsx(T,{data:[{backgroundColor:i.graphs.cpu.system,borderColor:"transparent",data:L(b,u,a),label:"CPU"}],ariaLabel:"CPU Usage Graph",subtitle:"%",title:"CPU",unit:"%",...A}),t.jsx(q,{marginTop:i.spacing(3),children:t.jsx(T,{data:[{backgroundColor:i.graphs.memory.used,borderColor:"transparent",data:L(x,u,a,fe),label:"RAM"}],ariaLabel:"RAM Usage Graph",formatData:_=>Y(k,_),formatTooltip:_=>$(_).formatted,subtitle:k,title:"RAM",...A})}),t.jsx(q,{marginTop:i.spacing(3),children:t.jsx(T,{data:[{backgroundColor:i.graphs.processCount,borderColor:"transparent",data:L(j,u,a,Ct),label:"Count"}],ariaLabel:"Process Count Graph",suggestedMax:10,title:"Count",...A})}),t.jsx(q,{marginTop:i.spacing(3),children:t.jsx(T,{data:[{backgroundColor:i.graphs.diskIO.write,borderColor:"transparent",data:L(w,u,a,S),label:"Write"},{backgroundColor:i.graphs.diskIO.read,borderColor:"transparent",data:L(C,u,a,S),label:"Read"}],ariaLabel:"Disk I/O Graph",formatData:_=>Y(v,_),formatTooltip:_=>$(_).formatted,nativeLegend:!0,subtitle:v+"/s",title:"Disk I/O",unit:"/s",...A})})]})]})},Ct=s=>s&&Math.round(s),kt=N("div",{label:"StyledDiv"})({alignItems:"center",display:"flex",flexFlow:"row nowrap",wordBreak:"break-all"}),vt=N(Je,{label:"StyledTable"})(({theme:s})=>({"& tbody":{transition:s.transitions.create(["opacity"])},"& tbody.sorting":{opacity:.5},"& thead":{"& th":{"&:first-of-type":{borderLeft:"none"},"&:last-of-type":{borderRight:"none"},borderBottom:`2px solid ${s.color.grey9}`,borderLeft:`1px solid ${s.color.grey9}`,borderRight:`1px solid ${s.color.grey9}`,borderTop:`2px solid ${s.color.grey9}`,color:s.palette.text.primary,fontFamily:s.font.bold,fontSize:"0.875em",padding:"10px 15px"}}})),Tt=d.memo(s=>{const{width:e}=rt(),{error:r,processesData:n,processesLoading:c,selectedProcess:o,setSelectedProcess:h}=s;return t.jsx(Ye,{data:n,order:"asc",orderBy:"name",preferenceKey:"lv-detail-processes",children:({data:l,handleOrderChange:i,order:a,orderBy:u})=>t.jsxs(vt,{noOverflow:e>=1280,spacingTop:16,children:[t.jsx(at,{children:t.jsxs(xe,{children:[t.jsx(B,{active:u==="name",direction:a,handleClick:i,label:"name",style:{width:"20%"},children:"Process"}),t.jsx(B,{active:u==="user",direction:a,handleClick:i,label:"user",style:{width:"20%"},children:"User"}),t.jsx(B,{active:u==="maxCount",direction:a,handleClick:i,label:"maxCount",style:{width:"15%"},children:"Max Count"}),t.jsx(B,{active:u==="averageIO",direction:a,handleClick:i,label:"averageIO",style:{width:"15%"},children:"Avg IO"}),t.jsx(B,{active:u==="averageCPU",direction:a,handleClick:i,label:"averageCPU",style:{width:"15%"},children:"Avg CPU"}),t.jsx(B,{active:u==="averageMem",direction:a,handleClick:i,label:"averageMem",style:{width:"15%"},children:"Avg Mem"})]})}),t.jsx(Ze,{children:St(c,l,o,h,r)})]})})}),St=(s,e,r,n,c)=>c&&e.length===0?t.jsx(tt,{colSpan:12,message:c}):s?t.jsx(st,{columns:6}):e.length===0?t.jsx(et,{colSpan:12}):e.map((o,h)=>t.jsx(Lt,{isSelected:(r==null?void 0:r.name)===o.name&&(r==null?void 0:r.user)===o.user,setSelectedProcess:n,...o},`process-${h}`)),Lt=d.memo(s=>{const{averageCPU:e,averageIO:r,averageMem:n,isSelected:c,maxCount:o,name:h,setSelectedProcess:l,user:i}=s;return t.jsxs(xe,{onKeyUp:a=>a.key==="Enter"&&l({name:h,user:i}),ariaLabel:`${h} for ${i}`,"data-testid":"longview-service-row",forceIndex:!0,onClick:()=>l({name:h,user:i}),selected:c,children:[t.jsx(O,{"data-testid":`name-${h}`,children:t.jsx(kt,{children:h})}),t.jsx(O,{"data-testid":`user-${i}`,children:i}),t.jsx(O,{"data-testid":`max-count-${Math.round(o)}`,children:Math.round(o)}),t.jsxs(O,{"data-testid":`average-io-${r}`,children:[$(r,{round:0,unitLabels:{bytes:"B"}}).formatted,"/s"]}),t.jsx(O,{"data-testid":`average-cpu-${e}`,children:lt(e)}),t.jsx(O,{"data-testid":`average-mem-${n}`,children:$(n*1024,{round:0}).formatted})]})}),Pt=N(q,{label:"StyledBox"})(({theme:s})=>({[s.breakpoints.down("lg")]:{marginLeft:s.spacing(),marginRight:s.spacing()}})),Dt=N(ae,{label:"StyledTimeRangeSelect"})({width:200}),At=(s,e)=>{if(!e)return s;const r=Ae(e);return s.filter(n=>n.user.match(RegExp(r,"i"))||n.name.match(RegExp(r,"i")))},Rt=d.memo(s=>{var f,k;const{clientAPIKey:e,lastUpdated:r,lastUpdatedError:n,timezone:c}=s,[o,h]=d.useState(),[l,i]=d.useState(null),[a,u]=d.useState({end:0,start:0}),g=(y,v)=>{u({end:v,start:y})},p=K(a.start,a.end),{data:m,error:b,loading:j,request:x}=U(["processes"],e,a.start,a.end);d.useEffect(()=>{x()},[a.start,a.end,e,r,n]);const w=d.useMemo(()=>Mt(m),[m]),C=d.useMemo(()=>At(w,o),[w,o]);return d.useEffect(()=>{if(l!==null)return;const y=It(C);if(y.length>0){const{name:v,user:S}=y[0];i({name:v,user:S})}},[l,C]),t.jsxs(t.Fragment,{children:[t.jsx(Q,{segment:"Processes"}),t.jsxs(P,{container:!0,spacing:4,children:[t.jsxs(D,{lg:7,xs:12,children:[t.jsxs(Pt,{display:"flex",justifyContent:"space-between",children:[t.jsx(Pe,{onChange:y=>h(y.target.value),hideLabel:!0,label:"Filter by process or user",placeholder:"Filter by process or user...",sx:{width:"300px"}}),t.jsx(Dt,{defaultValue:"Past 30 Minutes",handleStatsChange:g,hideLabel:!0,label:"Select Time Range"})]}),t.jsx(Tt,{error:((f=n==null?void 0:n[0])==null?void 0:f.reason)||b,processesData:C,processesLoading:j||r===0,selectedProcess:l,setSelectedProcess:i})]}),t.jsx(D,{lg:5,xs:12,children:t.jsx(wt,{clientAPIKey:e||"",error:((k=n==null?void 0:n[0])==null?void 0:k.reason)||b,isToday:p,lastUpdated:r,processesData:m,processesLoading:j||r===0,selectedProcess:l,time:a,timezone:c})})]})]})}),Mt=s=>{if(!s||!s.Processes)return[];const e=[];return Object.keys(s.Processes).forEach(r=>{const{longname:n,...c}=s.Processes[r];Object.keys(c).forEach(o=>{const h=s.Processes[r][o];e.push({averageCPU:H(h.cpu),averageIO:H(h.ioreadkbytes)+H(h.iowritekbytes),averageMem:H(h.mem),id:`${r}-${o}`,maxCount:E(h.count),name:r,user:o})})}),e},It=Xe(De("name")),Nt=N(Ge,{label:"StyledTabs"})(({theme:s})=>({marginBottom:`calc(${s.spacing(3)} + 6px)`})),_t={Processes:{}},$t=d.lazy(()=>se(()=>import("./LongviewDetailOverview-tVCkkd1q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]))),Et=d.lazy(()=>se(()=>import("./Installation-W93R5Wrr.js"),__vite__mapDeps([32,1,2,33,34,35]))),Gt=d.lazy(()=>se(()=>import("./Disks-At6-bZS2.js"),__vite__mapDeps([36,1,2,37,19,20,21,22,8,7,23,24,25,10,5,26,9,27,28,29,30,11,12,6,15,16,17,18,31]))),je=s=>{const{client:e,longviewClientData:r,longviewClientsError:n,longviewClientsLastUpdated:c,longviewClientsLoading:o}=s,{data:h}=Me(),l=(h==null?void 0:h.timezone)||"US/Eastern";d.useEffect(()=>{c===0&&s.getLongviewClients()},[]);const i=e&&e.api_key,{lastUpdated:a,lastUpdatedError:u,notifications:g}=ze(i,i?f=>s.getClientStats(i,f).catch(k=>null):void 0),p=ce(i&&a?()=>le(i,"getTopProcesses").then(f=>f.DATA):null,_t,[i,a]),m=ce(i&&a?()=>le(i,"getValues",{fields:["listeningServices","activeConnections"]}).then(f=>f.DATA):null,{Ports:{active:[],listening:[]}},[i,a]),j=[{display:!0,routeName:`${s.match.url}/overview`,title:"Overview"},{display:!0,routeName:`${s.match.url}/processes`,title:"Processes"},{display:!0,routeName:`${s.match.url}/network`,title:"Network"},{display:!0,routeName:`${s.match.url}/disks`,title:"Disks"},{display:e&&e.apps.apache,routeName:`${s.match.url}/apache`,title:"Apache"},{display:e&&e.apps.nginx,routeName:`${s.match.url}/nginx`,title:"Nginx"},{display:e&&e.apps.mysql,routeName:`${s.match.url}/mysql`,title:"MySQL"},{display:!0,routeName:`${s.match.url}/installation`,title:"Installation"}].filter(f=>f.display===!0),x=f=>!!_e(f,{path:s.location.pathname}),w=f=>{s.history.push(j[f].routeName)};if(o&&c===0)return t.jsx(W,{children:t.jsx(pe,{})});if(n.read&&c===0)return t.jsx(W,{children:t.jsx(ee,{errorText:n.read[0].reason})});if(!e&&!o)return t.jsx(Ie,{});if(!e)return null;const C=j.filter(f=>f.display===!0);return t.jsxs(d.Fragment,{children:[t.jsx($e,{breadcrumbProps:{firstAndLastOnly:!0,labelOptions:{noCap:!0},pathname:s.location.pathname},docsLabel:"Docs",docsLink:"https://www.linode.com/docs/platform/longview/longview/",title:e.label}),g.map((f,k)=>t.jsx(J,{spacingBottom:0,spacingTop:8,text:f.TEXT,variant:"warning"},`lv-warning-${k}`)),t.jsxs(Nt,{index:Math.max(j.findIndex(f=>x(f.routeName)),0),onChange:w,children:[t.jsx(Ee,{tabs:j}),t.jsx(d.Suspense,{fallback:t.jsx(Ne,{}),children:t.jsxs(qe,{children:[t.jsx(G,{index:0,children:t.jsx($t,{client:e.label,clientAPIKey:e.api_key,clientID:e.id,lastUpdated:a,lastUpdatedError:u,listeningPortsData:m.data,listeningPortsError:m.error,listeningPortsLoading:m.loading,longviewClientData:r,timezone:l,topProcessesData:p.data,topProcessesError:p.error,topProcessesLoading:p.loading})}),t.jsx(G,{index:1,children:t.jsx(Rt,{clientAPIKey:e.api_key,clientID:e.id,lastUpdated:a,lastUpdatedError:u,timezone:l})}),t.jsx(G,{index:2,children:t.jsx(yt,{clientAPIKey:e.api_key,lastUpdated:a,lastUpdatedError:u,timezone:l})}),t.jsx(G,{index:3,children:t.jsx(Gt,{clientAPIKey:e.api_key,clientID:e.id,clientLastUpdated:a,lastUpdated:a,lastUpdatedError:u,timezone:l})}),e&&e.apps.apache&&t.jsx(G,{index:4,children:t.jsx(ut,{clientAPIKey:i,lastUpdated:a,lastUpdatedError:u,timezone:l})}),e&&e.apps.nginx&&t.jsx(G,{index:e.apps.apache?5:4,children:t.jsx(mt,{clientAPIKey:i,lastUpdated:a,lastUpdatedError:u,timezone:l})}),e&&e.apps.mysql&&t.jsx(G,{index:4+(e.apps.nginx?1:0)+(e.apps.apache?1:0),children:t.jsx(pt,{clientAPIKey:i,lastUpdated:a,lastUpdatedError:u,timezone:l})}),t.jsx(G,{index:Number(C.length-1),children:t.jsx(Et,{clientAPIKey:e.api_key,clientInstallationKey:e.install_code})})]})})]})]})},qt=Re(d.memo,Be(s=>+X("",["match","params","id"],s)),Ue((s,{longviewClientsData:e,longviewClientsError:r,longviewClientsLastUpdated:n,longviewClientsLoading:c})=>({client:e[X("",["match","params","id"],s)],longviewClientsError:r,longviewClientsLastUpdated:n,longviewClientsLoading:c})))(je),cs=Object.freeze(Object.defineProperty({__proto__:null,LongviewDetail:je,default:qt},Symbol.toStringTag,{value:"Module"}));export{bt as G,T as L,ne as S,ae as T,D as a,lt as b,F as c,xt as d,ls as e,fe as f,cs as g,K as i,is as p,U as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/LongviewDetailOverview-tVCkkd1q.js","assets/index-Eksrs3uK.js","assets/index-RL6WRErT.css","assets/formatUptime-T2o8loDP.js","assets/Drawer-A9yKjC3Z.js","assets/TableRow-phXfWUGW.js","assets/TableRowEmpty-aXmC67-Z.js","assets/useClientLastUpdated-a0PNleVi.js","assets/longview.container-N5k_O7w1.js","assets/TableHead-Si_pzkLK.js","assets/utilities-JekaXHyt.js","assets/OrderBy-H-bWJCPy.js","assets/splitAt-pbTnq2Oi.js","assets/Paginate-XLm_-WxT.js","assets/PaginationFooter-NHWf7fW2.js","assets/TableRowError-8gKmGX7P.js","assets/TableRowLoading-iP7zIRHG.js","assets/Skeleton-iwmO4Yae.js","assets/TableSortCell-hcsagFzN.js","assets/LandingHeader-JXAVBhqg.js","assets/SafeTabPanel-S0Pp8CVT.js","assets/TabList-4PWL4GSj.js","assets/TabLinkList-BrXtJznm.js","assets/useAPIRequest-UcK5fafY.js","assets/immer.esm--MpJ8fpr.js","assets/LineGraph-UgU3EQj3.js","assets/visuallyHidden-DVicuktI.js","assets/over-27tc0FF7.js","assets/assocPath-nNkv7F8U.js","assets/set-2Chj4B2I.js","assets/sortBy-avzW26A0.js","assets/useWindowDimensions-Dnr94FWA.js","assets/Installation-W93R5Wrr.js","assets/InstallationInstructions-co98NL17.js","assets/CopyTooltip-mIyzAQ7E.js","assets/index-Y5esPPk-.js","assets/Disks-At6-bZS2.js","assets/LandingLoading-jDJ3d7aA.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}