import{g as D}from"./linodes-orSDvVk7.js";import{r as c,j as e,B as O,bB as _,s as j,f as w,hI as G,T as F,d0 as S,a1 as V,W as f,ex as I,G as C,ad as K}from"./index-Eksrs3uK.js";import{d as U}from"./DisplayPrice-SNYRHKEX.js";import{F as Q}from"./FormControl-CNHz4Ctl.js";import{R}from"./Radio-HudVgwMW.js";import{R as X}from"./RadioGroup-zpRjMzXK.js";import{T as z}from"./TabbedPanel-IicwaI6L.js";import{S as Y,g as J,P as Z,a as ee,d as te}from"./PlanInformation-CouBULD4.js";import{a as b,b as ne,T as ae,c as re}from"./TableRow-phXfWUGW.js";import{T as le}from"./TableRowEmpty-aXmC67-Z.js";import{a as L,U as oe,b as A}from"./constants-KokzTiEs.js";import{S as se}from"./SelectionCard-IyO-o1CU.js";import{r as B}from"./dynamicPricing-n5eCZqTg.js";import{T as ie}from"./TableHead-Si_pzkLK.js";const de=({count:l,region:o,type:d,types:i})=>{var a;if(!i||!d||!o)return;const n=i.find(m=>m.id===d),s=(a=D(n,o))==null?void 0:a.monthly;return s&&s*l},Be=({highAvailabilityPrice:l,pools:o,region:d,types:i})=>{const n=o.reduce((s,a)=>{const m=de({count:a.count,region:d,type:a.type,types:i});return s+(m??0)},0);return l?n+l:n},ce=l=>c.createElement("svg",{width:"11px",height:"3px",viewBox:"0 0 11 3",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...l},c.createElement("title",null,"Group 3"),c.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},c.createElement("g",{id:"LKE-Create",transform:"translate(-1030.000000, -227.000000)",stroke:"#3682DB",strokeWidth:1.8},c.createElement("g",{id:"Group-3",transform:"translate(1030.000000, 228.000000)"},c.createElement("line",{x1:0,y1:.5,x2:11,y2:.5,id:"Line-8"}))))),ue=l=>c.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",...l},c.createElement("title",null,"Group 19"),c.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},c.createElement("g",{id:"LKE-Create",transform:"translate(-1115.000000, -222.000000)",stroke:"#3682DB",strokeWidth:1.8},c.createElement("g",{id:"Group-19",transform:"translate(1115.000000, 222.000000)"},c.createElement("line",{x1:6.5,y1:0,x2:6.5,y2:13,id:"Line-8",transform:"translate(6.500000, 6.500000) rotate(-270.000000) translate(-6.500000, -6.500000) "}),c.createElement("line",{x1:6.5,y1:0,x2:6.5,y2:13,id:"Line-8"}))))),me={"&::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"&::-webkit-outer-spin-button":{"-webkit-appearance":"none",margin:0},"-moz-appearance":"textfield",padding:"0 8px",textAlign:"right"},N={flexDirection:"row",height:34,margin:"0 5px",minHeight:30,minWidth:40,width:53},W=c.memo(l=>{const{disabled:o,inputLabel:d,setValue:i}=l,n=l.max??100,s=l.min??0;let a=l.value;a>n?a=n:a<s&&(a=s);const m=u=>{const t=+u.target.value;t>=s&&t<=n&&i(+u.target.value)},r=()=>{a<n&&i(a+1)},h=()=>{a>s&&i(a-1)};return e.jsxs(O,{sx:{display:"flex",position:"relative"},children:[e.jsx(H,{"aria-label":"Subtract 1",buttonType:"outlined","data-testid":"decrement-button",disableFocusRipple:!0,disabled:o||a===s,name:"Subtract 1",onClick:h,children:e.jsx(he,{})}),e.jsx(_,{sx:{...N,".MuiInputBase-input":me,".MuiInputBase-root":N},"aria-live":"polite","data-testid":"quantity-input",disabled:o,hideLabel:!0,label:d||"Edit Quantity",max:n,min:s,name:"Quantity",onChange:m,type:"number",value:a}),e.jsx(H,{"aria-label":"Add 1",buttonType:"outlined","data-testid":"increment-button",disableFocusRipple:!0,disabled:o||a===n,name:"Add 1",onClick:r,children:e.jsx(xe,{})})]})}),H=j(w)(({theme:l})=>({"&.MuiButtonBase-root.Mui-disabled":{"& svg g":{stroke:l.color.disabledText},border:"none"},"&:hover":{backgroundColor:"rgba(224, 224, 224, 0.69)",border:"none"},border:"none",borderRadius:0,height:34,minHeight:"fit-content",minWidth:30,width:35})),he=j(ce)({width:12}),xe=j(ue)({width:14}),pe=()=>e.jsxs(F,{children:["Recommended for production workloads, a high availability (HA) control plane is replicated on multiple master nodes to 99.99% uptime.",e.jsx("br",{}),e.jsx(V,{to:"https://www.linode.com/docs/guides/enable-lke-high-availability/",children:"Learn more about the HA control plane"}),"."]}),Ne=l=>{const{highAvailabilityPrice:o,setHighAvailability:d}=l,i=n=>{d(n.target.value==="yes")};return e.jsxs(Q,{"data-testid":"ha-control-plane-form",children:[e.jsx(G,{sx:n=>({"&&.MuiFormLabel-root.Mui-focused":{color:n.name==="dark"?"white":n.color.black}}),id:"ha-radio-buttons-group-label",children:e.jsx(F,{variant:"inherit",children:"HA Control Plane"})}),e.jsx(pe,{}),e.jsxs(X,{"aria-labelledby":"ha-radio-buttons-group-label",name:"ha-radio-buttons-group",onChange:n=>i(n),children:[e.jsx(S,{label:`Yes, enable HA control plane. ${o?`(${U(o)}/month)`:"(Select a region to view price information.)"}`,control:e.jsx(R,{"data-testid":"ha-radio-button-yes"}),name:"yes",value:"yes"}),e.jsx(S,{control:e.jsx(R,{}),label:"No",name:"no",value:"no"})]})]})},be=l=>{const{disabled:o,getTypeCount:d,idx:i,onAdd:n,onSelect:s,selectedId:a,selectedRegionID:m,type:r,updatePlanCount:h}=l,u=d(r.id),t=D(r,m),p=[`$${B(t==null?void 0:t.monthly)}/mo ($${t==null?void 0:t.hourly}/hr)`,r.subHeadings[1]],y=()=>e.jsx(C,{xs:12,children:e.jsxs(M,{children:[e.jsx(W,{disabled:o,setValue:x=>h(r.id,x),value:u}),n&&e.jsx(w,{buttonType:"primary",disabled:u<1||o,onClick:()=>n(r.id,u),sx:{marginLeft:"10px",minWidth:"85px"},children:"Add"})]})});return e.jsxs(c.Fragment,{children:[e.jsx(f,{mdDown:!0,children:e.jsxs(Y,{"data-qa-plan-row":r.formattedLabel,disabled:o,children:[e.jsx(b,{"data-qa-plan-name":!0,children:r.heading}),e.jsxs(b,{"data-qa-monthly":!0,errorCell:!(t!=null&&t.monthly),errorText:t!=null&&t.monthly?void 0:L,children:["$",B(t==null?void 0:t.monthly)]}),e.jsxs(b,{"data-qa-hourly":!0,errorCell:!(t!=null&&t.hourly),errorText:t!=null&&t.hourly?void 0:L,children:["$",(t==null?void 0:t.hourly)??oe]}),e.jsx(b,{center:!0,"data-qa-ram":!0,children:I(r.memory,!0)}),e.jsx(b,{center:!0,"data-qa-cpu":!0,children:r.vcpus}),e.jsx(b,{center:!0,"data-qa-storage":!0,children:I(r.disk,!0)}),e.jsx(b,{children:e.jsxs(M,{children:[e.jsx(W,{disabled:!n&&!!a&&r.id!==a||o||!(t!=null&&t.monthly),setValue:x=>h(r.id,x),inputLabel:`edit-quantity-${r.id}`,value:u}),n&&e.jsx(w,{buttonType:"primary",disabled:u<1||o||!(t!=null&&t.monthly),onClick:()=>n(r.id,u),sx:{marginLeft:"10px",minWidth:"85px"},children:"Add"})]})})]},r.id)}),e.jsx(f,{mdUp:!0,children:e.jsx(se,{checked:r.id===String(a),disabled:o,heading:r.heading,onClick:()=>s(r.id),renderVariant:y,subheadings:p},r.id)})]},`tabbed-panel-${i}`)},M=j("div",{label:"StyledInputOuter"})(({theme:l})=>({alignItems:"center",display:"flex",justifyContent:"flex-end",[l.breakpoints.down("md")]:{justifyContent:"flex-start"}})),ge=[{cellName:"Plan",center:!1,noWrap:!1,testId:"plan"},{cellName:"Monthly",center:!1,noWrap:!1,testId:"monthly"},{cellName:"Hourly",center:!1,noWrap:!1,testId:"hourly"},{cellName:"RAM",center:!0,noWrap:!1,testId:"ram"},{cellName:"CPUs",center:!0,noWrap:!1,testId:"cpu"},{cellName:"Storage",center:!0,noWrap:!1,testId:"storage"},{cellName:"Quantity",center:!1,noWrap:!1,testId:"quantity"}],ye=l=>{const{disabled:o,getTypeCount:d,onAdd:i,onSelect:n,plans:s,selectedId:a,selectedRegionID:m,updatePlanCount:r}=l,h=!m,u=c.useCallback(()=>s.map((t,p)=>e.jsx(be,{disabled:o,getTypeCount:d,idx:p,onAdd:i,onSelect:n,selectedId:a,selectedRegionID:m,type:t,updatePlanCount:r},p)),[o,d,i,n,s,a,m,r]);return e.jsxs(C,{container:!0,spacing:2,children:[e.jsx(f,{mdUp:!0,children:h?e.jsx(K,{spacingLeft:8,spacingTop:8,sx:{"& p":{fontSize:"0.875rem"}},text:A,variant:"info"}):u()}),e.jsx(f,{mdDown:!0,children:e.jsx(C,{lg:12,xs:12,children:e.jsxs(ne,{"aria-label":"List of Linode Plans",spacingBottom:16,children:[e.jsx(ie,{children:e.jsx(ae,{children:ge.map(({cellName:t,center:p,noWrap:y,testId:x})=>{const T=`${x}-header`;return e.jsx(b,{center:p,"data-qa":T,noWrap:y,children:t==="Quantity"?e.jsx("p",{className:"visually-hidden",children:t}):t},x)})})}),e.jsx(re,{role:"grid",children:h?e.jsx(le,{colSpan:9,message:A}):u()})]})})})]})},We=l=>{const{copy:o,currentPlanHeading:d,disabled:i,error:n,getTypeCount:s,hasSelectedRegion:a,header:m,isPlanPanelDisabled:r,isSelectedRegionEligibleForPlan:h,onAdd:u,onSelect:t,regionsData:p,resetValues:y,selectedId:x,selectedRegionID:T,types:P,updatePlanCount:q}=l,E=J(P),$=Object.keys(E).map(g=>{var v;return{render:()=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{isSelectedRegionEligibleForPlan:h(g),hasSelectedRegion:a,planType:g,regionsData:p}),e.jsx(ye,{disabled:i||r(g),getTypeCount:s,onAdd:u,onSelect:t,plans:E[g],selectedId:x,selectedRegionID:T,updatePlanCount:q})]}),title:(v=ee[g==="standard"?"shared":g])==null?void 0:v.title}}),k=te(P,x,d);return e.jsx(z,{copy:o,error:n,handleTabChange:()=>y(),header:m||" ",initTab:k>=0?k:0,sx:{padding:0},tabs:$})};export{W as E,Ne as H,We as K,de as a,pe as b,Be as g};
