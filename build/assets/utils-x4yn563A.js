import{aW as T,c as N,e1 as W,e2 as H,e3 as _,r as $,j as o,af as z,ag as Q,T as b,a1 as h,bI as U,ad as F,dE as V,s as q,B as G,bx as J}from"./index-Eksrs3uK.js";import{u as K}from"./configs-3PoBJaCX.js";const X=e=>(e==null?void 0:e.length)===1?e[0].id:void 0,oe=e=>{const{action:i,isOpen:a,linodeId:n,manuallyUpdateConfigs:u,onClose:p}=e,x=T(),{data:r}=N(n??-1,n!==void 0&&a),{data:s,error:c,isLoading:y}=K(n??-1,n!==void 0&&a),{error:v,isLoading:L,mutateAsync:P}=W(n??-1,u?s:void 0),{error:C,isLoading:j,mutateAsync:S}=H(n??-1,u?s:void 0),{error:A,isLoading:E,mutateAsync:O}=_(n??-1),[g,I]=$.useState(null),f={"Power Off":O,"Power On":P,Reboot:S},B={"Power Off":A,"Power On":v,Reboot:C},M={"Power Off":E,"Power On":L,Reboot:j},d=B[i],D=M[i],m=e.action==="Reboot",l=e.action==="Power On",R=async()=>{if(l||m){const t=f[i];await t({config_id:g??X(s)})}else{const t=f[i];await t()}V(),p()},k=s!==void 0&&(s==null?void 0:s.length)>1&&(l||m),w=(s==null?void 0:s.map(t=>({label:t.label,value:t.id})))??[];return o.jsxs(z,{actions:o.jsx(Q,{primaryButtonProps:{label:`${e.action} Linode`,loading:D,onClick:R},secondaryButtonProps:{label:"Cancel",onClick:e.onClose}}),sx:{"& .dialog-content":{paddingBottom:0,paddingTop:0}},error:d==null?void 0:d[0].reason,onClose:p,open:a,title:`${i} Linode ${(r==null?void 0:r.label)??""}?`,children:[l?o.jsxs(b,{sx:{alignItems:"center",fontSize:"0.875rem",lineHeight:"1.25rem",marginBottom:x.spacing(1.25)},children:["See the ",o.jsx(h,{to:"https://www.linode.com/docs/products/compute/compute-instances/guides/set-up-and-secure/",children:"guide for setting up and securing a compute instance"})," for more information."]}):null,k&&o.jsx(U,{errorText:c==null?void 0:c[0].reason,isLoading:y,label:"Config",onChange:t=>I(t===null?null:t.value),options:w,overflowPortal:!0,value:w.find(t=>t.value===g)}),e.action==="Power Off"&&o.jsx("span",{children:o.jsxs(F,{sx:{"& .noticeText":{fontSize:"0.875rem !important"}},variant:"warning",children:[o.jsx("strong",{children:"Note: "}),"Powered down Linodes will still accrue charges.",o.jsx("br",{}),"See the ",o.jsx(h,{to:"https://www.linode.com/docs/guides/understanding-billing-and-payments/#will-i-be-billed-for-powered-off-or-unused-services",children:"Billing and Payments documentation"})," for more information."]})})]})},te=({children:e,isSummaryView:i,title:a,variant:n="h2"})=>o.jsxs(Y,{children:[i?o.jsx(b,{sx:Z,variant:n,children:a}):null,e&&o.jsx(G,{sx:{alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},children:e})]}),Y=q("div",{name:"EntityHeader"})(({theme:e})=>({alignItems:"center",backgroundColor:e.bg.bgPaper,display:"flex",justifyContent:"space-between",margin:0,[e.breakpoints.down("sm")]:{flexWrap:"wrap"},width:"100%"})),Z={padding:1,whiteSpace:"nowrap"},ie=e=>e?e.match(/valid/i)?(J("Error parsing maintenance start time",{convertedDate:e,rawDate:e}),"Maintenance Window Unknown"):e:"No Maintenance Needed",se=e=>{switch(e){case"maintenance":return 1;case"stopped":return 2;case"busy":return 3;case"running":return 4;case"offline":return 5;default:return 3}},ae=e=>e==="running"?"active":["offline","stopped"].includes(e)?"inactive":"other",re=e=>{const i=new Set;for(const a of e)for(const n of a.interfaces)n.purpose==="vpc"&&n.vpc_id&&i.add(n.vpc_id);return Array.from(i)};export{te as E,oe as P,re as a,ae as g,ie as p,se as s};
