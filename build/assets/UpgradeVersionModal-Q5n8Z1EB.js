import{hy as k,u as K,j as e,ad as x,T as b,r as i,hs as U,cx as T,hz as A,hu as N,af as V,hA as B,ag as R,hB as E}from"./index-Eksrs3uK.js";import{T as L}from"./TypeToConfirmDialog-9yjZCCL0.js";const _=p=>{const{clusterId:u,clusterLabel:r,onClose:a,open:l}=p,{error:s,isLoading:g,mutateAsync:y}=k(),h=K(),t=()=>{y({id:u}).then(()=>{a(),h.replace("/kubernetes/clusters")})};return e.jsxs(L,{entity:{action:"deletion",name:r,primaryBtnText:"Delete Cluster",subType:"Cluster",type:"Kubernetes"},label:"Cluster Name",loading:g,onClick:t,onClose:a,open:l,title:`Delete Cluster ${r}`,children:[s?e.jsx(x,{text:s==null?void 0:s[0].reason,variant:"error"}):null,e.jsx(x,{variant:"warning",children:e.jsxs(b,{style:{fontSize:"0.875rem"},children:[e.jsx("strong",{children:"Warning:"}),e.jsxs("ul",{style:{margin:"5px 0px 0px",paddingLeft:"15px"},children:[e.jsx("li",{children:"Deleting a cluster is permanent and can't be undone."}),e.jsx("li",{children:"Attached Block Storage Volumes or NodeBalancers must be deleted separately."})]})]})})]})},F=p=>{const{clusterID:u,clusterLabel:r,currentVersion:a,isOpen:l,onClose:s}=p,{data:g}=U(),{enqueueSnackbar:y}=T(),{mutateAsync:h}=A(u),t=N(a,g??[]),[d,m]=i.useState(!1),[f,o]=i.useState(),[j,n]=i.useState(!1);if(i.useEffect(()=>{l&&(o(void 0),n(!1),m(!1))},[l]),t===null)return null;const C=()=>{n(!0),o(void 0),h({k8s_version:t}).then(c=>{m(!0),n(!1)}).catch(c=>{n(!1),o(c[0].reason)})},D=()=>{n(!0),o(void 0),E(u).then(c=>{y("Recycle started successfully.",{variant:"success"}),s()}).catch(c=>{n(!1),o(c[0].reason)})},S=d?"Step 2: Recycle All Cluster Nodes":`Step 1: Upgrade ${r} to Kubernetes ${t}`,v=e.jsx(R,{primaryButtonProps:{"data-testid":"confirm",label:d?"Recycle All Nodes":"Upgrade Version",loading:j,onClick:d?D:C},secondaryButtonProps:{"data-testid":"cancel",label:"Cancel",onClick:s},style:{padding:0}});return e.jsx(V,{actions:v,error:f,onClose:s,open:l,title:S,children:e.jsx(b,{children:d?e.jsxs(e.Fragment,{children:["Kubernetes version has been updated successfully. ",e.jsx("br",{})," ",e.jsx("br",{}),"For the changes to take full effect you must recycle the nodes in your cluster. ",B]}):e.jsxs(e.Fragment,{children:["Upgrade ",r,"â€™s Kubernetes version from"," ",e.jsx("strong",{children:a})," to ",e.jsx("strong",{children:t}),"? Once the upgrade is complete you will need to recycle all nodes in your cluster."]})})})},$=i.memo(F);export{_ as D,$ as U};
