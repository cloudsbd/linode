import{aW as P,cx as I,bD as q,j as e,W as h,hr as A,bx as R,bM as K,m as V,hs as _,ht as M,bb as G,bd as N,ba as z,hu as $,hv as B,G as j,V as F,cp as D,u as T,di as Q,hw as H,r as L,hx as O,E as W,C as Y,Q as X,dk as J}from"./index-Eksrs3uK.js";import{L as Z}from"./LandingHeader-JXAVBhqg.js";import{P as ee}from"./PaginationFooter-NHWf7fW2.js";import{T as E,a as l,b as te,c as se}from"./TableRow-phXfWUGW.js";import{T as x}from"./TableSortCell-hcsagFzN.js";import{u as re}from"./useOrder-rsUMHEuj.js";import{u as ae}from"./usePagination-Sxr0Tlb7.js";import{D as ne}from"./DateTimeDisplay-bXC9mIcz.js";import{A as oe}from"./ActionMenu-4CPisA_2.js";import{I as le}from"./InlineMenuAction-d5mRENST.js";import{d as ie}from"./downloadFile-7KribbgA.js";import{D as ue,U as ce}from"./UpgradeVersionModal-Q5n8Z1EB.js";import{a as de,d as be,y as pe,b as ge,R as he}from"./ResourcesSection-fJQ13r7x.js";import{T as me}from"./TableHead-Si_pzkLK.js";import"./OrderBy-H-bWJCPy.js";import"./splitAt-pbTnq2Oi.js";import"./TypeToConfirmDialog-9yjZCCL0.js";import"./TypeToConfirm-koQ3u5up.js";import"./ListItem-joIHQeyv.js";const xe=d=>{const t=P(),{enqueueSnackbar:i}=I(),b=q(t.breakpoints.down("md")),{clusterId:a,clusterLabel:p,openDialog:n}=d,o=[{onClick:()=>{u()},title:"Download kubeconfig"},{onClick:()=>{n()},title:"Delete"}],u=()=>{A(a).then(r=>{try{const s=window.atob(r.kubeconfig);ie(`${p}-kubeconfig.yaml`,s)}catch(s){R(s,{"Encoded response":r.kubeconfig}),i("Error parsing your kubeconfig file",{variant:"error"});return}}).catch(r=>{const s=K(r,"Unable to download your kubeconfig");i(s,{variant:"error"})})};return e.jsxs(e.Fragment,{children:[!b&&o.map(r=>e.jsx(le,{actionText:r.title,onClick:r.onClick},r.title)),e.jsx(h,{mdUp:!0,children:e.jsx(oe,{actionsList:o,ariaLabel:`Action menu for Cluster ${d.clusterLabel}`})})]})},Ce=V()(()=>({clusterRow:{"&:before":{display:"none"}},labelStatusWrapper:{alignItems:"center",display:"flex",flexFlow:"row nowrap",whiteSpace:"nowrap"},link:{"&:hover, &:focus":{textDecoration:"underline"},display:"block",fontSize:".875rem",lineHeight:"1.125rem"},version:{alignItems:"center",display:"flex",justifyContent:"flex-start"}})),ye=d=>{const{cluster:t,openDeleteDialog:i,openUpgradeDialog:b}=d,{classes:a}=Ce(),{data:p}=_(),{data:n}=M(t.id),o=G((n==null?void 0:n.map(g=>g.type))??[]),u=N(o),{data:r}=z(),s=r==null?void 0:r.find(g=>g.id===t.region),y=$(t.k8s_version,p??[])!==null,{CPU:m,RAM:k}=B(n??[],u??[]);return e.jsxs(E,{ariaLabel:`Cluster ${t.label}`,className:a.clusterRow,"data-qa-cluster-cell":t.id,"data-testid":"cluster-row",children:[e.jsx(l,{"data-qa-cluster-label":!0,children:e.jsxs(j,{alignItems:"center",container:!0,justifyContent:"space-between",wrap:"nowrap",children:[e.jsx(j,{className:"py0",children:e.jsx("div",{className:a.labelStatusWrapper,children:e.jsx(F,{className:a.link,tabIndex:0,to:`/kubernetes/clusters/${t.id}/summary`,children:t.label})})}),t.control_plane.high_availability?e.jsx(j,{children:e.jsx(D,{"data-testid":"ha-chip",label:"HA",outlineColor:"green",size:"small",variant:"outlined"})}):null]})}),e.jsxs(h,{mdDown:!0,children:[e.jsx(l,{"data-qa-cluster-version":!0,children:e.jsxs("div",{className:a.version,children:[t.k8s_version,y?e.jsx(D,{clickable:!0,inTable:!0,label:"UPGRADE",onClick:b,size:"small"}):null]})}),e.jsx(l,{"data-qa-cluster-date":!0,children:e.jsx(ne,{value:t.created})})]}),e.jsx(l,{"data-qa-cluster-region":!0,children:(s==null?void 0:s.label)??t.region}),e.jsxs(h,{smDown:!0,children:[e.jsx(l,{"data-qa-cluster-memory":!0,children:`${k/1024} GB`}),e.jsx(l,{"data-qa-cluster-cpu":!0,children:`${m} ${m===1?"CPU":"CPUs"}`})]}),e.jsx(l,{actionCell:!0,children:e.jsx(xe,{openDialog:()=>i(t.id,t.label,n??[]),clusterId:t.id,clusterLabel:t.label})})]},t.id)},ke={description:"Deploy and scale your applications with the Linode Kubernetes Engine (LKE), a Kubernetes service equipped with a fully managed control plane.",subtitle:"Fully managed Kubernetes infrastructure",title:"Kubernetes"},we={links:[{text:"Get Started with the Linode Kubernetes Engine (LKE)",to:"https://www.linode.com/docs/products/compute/kubernetes/get-started/"},{text:"Create and Administer a Kubernetes Cluster on LKE",to:"https://www.linode.com/docs/products/compute/kubernetes/guides/create-lke-cluster"},{text:"Using the Kubernetes Dashboard",to:"https://www.linode.com/docs/guides/using-the-kubernetes-dashboard-on-lke/"},{text:"A Beginnerâ€™s Guide to Kubernetes",to:"https://www.linode.com/docs/guides/beginners-guide-to-kubernetes/"}],moreInfo:{text:de,to:be},title:"Getting Started Guides"},fe={links:[{external:!0,text:"Easily Deploy a Kubernetes Cluster on LKE",to:"https://www.youtube.com/watch?v=erthAqqdD_c"},{external:!0,text:"Enable High Availability on an LKE Cluster",to:"https://www.youtube.com/watch?v=VYUr_WvXCsY"},{external:!0,text:"Use a Load Balancer with an LKE Cluster",to:"https://www.youtube.com/watch?v=odPmyT5DONg"},{external:!0,text:"Use TOBS (The Observability Stack) with LKE",to:"https://www.youtube.com/watch?v=1564_DrFRSE"}],moreInfo:{text:pe,to:ge},title:"Video Playlist"},v={action:"Click:link",category:"Kubernetes landing page empty"},je=()=>{const{push:d}=T();return e.jsx(he,{buttonProps:[{children:"Create Cluster",onClick:()=>{Q({action:"Click:button",category:v.category,label:"Create Cluster"}),d("/kubernetes/create")}}],gettingStartedGuidesData:we,headers:ke,icon:H,linkAnalyticsEvent:v,youtubeLinkData:fe})},De={loading:!1,open:!1,selectedClusterID:0,selectedClusterLabel:"",selectedClusterNodePools:[]},Le={currentVersion:"",nextVersion:null,open:!1,selectedClusterID:0,selectedClusterLabel:""},S="kubernetes",Fe=()=>{const{push:d}=T(),t=ae(1,S),[i,b]=L.useState(De),[a,p]=L.useState(Le),{handleOrderChange:n,order:o,orderBy:u}=re({order:"desc",orderBy:"label"},`${S}-order`),r={"+order":o,"+order_by":u},{data:s,error:C,isLoading:y}=O({page:t.page,page_size:t.pageSize},r),m=(c,w,f)=>{p({currentVersion:f,open:!0,selectedClusterID:c,selectedClusterLabel:w})},k=()=>{p({...a,open:!1})},g=(c,w,f)=>{b({loading:!1,open:!0,selectedClusterID:c,selectedClusterLabel:w,selectedClusterNodePools:f})},U=()=>{b({...i,open:!1})};return C?e.jsx(W,{errorText:K(C,"There was an error loading your Kubernetes clusters.")}):y?e.jsx(Y,{}):(s==null?void 0:s.results)===0?e.jsx(je,{}):e.jsxs(e.Fragment,{children:[e.jsx(X,{segment:"Kubernetes Clusters"}),e.jsx(Z,{docsLink:"https://www.linode.com/docs/kubernetes/deploy-and-manage-a-cluster-with-linode-kubernetes-engine-a-tutorial/",entity:"Cluster",onButtonClick:()=>d("/kubernetes/create"),removeCrumbX:1,title:"Kubernetes"}),e.jsxs(te,{"aria-label":"List of Your Kubernetes Clusters",children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(x,{active:u==="label","data-qa-kubernetes-clusters-name-header":!0,direction:o,handleClick:n,label:"label",children:"Cluster Label"}),e.jsxs(h,{mdDown:!0,children:[e.jsx(x,{active:u==="k8s_version","data-qa-kubernetes-clusters-version-header":!0,direction:o,handleClick:n,label:"k8s_version",children:"Version"}),e.jsx(x,{active:u==="created","data-qa-kubernetes-clusters-created-header":!0,direction:o,handleClick:n,label:"created",children:"Created"})]}),e.jsx(x,{active:u==="region","data-qa-kubernetes-clusters-region-header":!0,direction:o,handleClick:n,label:"region",children:"Region"}),e.jsxs(h,{smDown:!0,children:[e.jsx(l,{"data-qa-kubernetes-clusters-memory-header":!0,children:"Total Memory"}),e.jsx(l,{"data-qa-kubernetes-clusters-cpu-header":!0,children:"Total CPUs"})]}),e.jsx(l,{})]})}),e.jsx(se,{children:s==null?void 0:s.data.map(c=>e.jsx(ye,{openUpgradeDialog:()=>m(c.id,c.label,c.k8s_version),cluster:c,openDeleteDialog:g},`kubernetes-cluster-list-${c.id}`))})]}),e.jsx(ee,{count:(s==null?void 0:s.results)??0,eventCategory:"kubernetes landing",handlePageChange:t.handlePageChange,handleSizeChange:t.handlePageSizeChange,page:t.page,pageSize:t.pageSize}),e.jsx(J,{spacingTop:18}),e.jsx(ue,{clusterId:i.selectedClusterID,clusterLabel:i.selectedClusterLabel,onClose:U,open:i.open}),e.jsx(ce,{clusterID:a.selectedClusterID,clusterLabel:a.selectedClusterLabel,currentVersion:a.currentVersion,isOpen:a.open,onClose:k})]})};export{Fe as KubernetesLanding,Fe as default};
