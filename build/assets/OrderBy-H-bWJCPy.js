import{c9 as j,Z as h,r as d,j as y,c4 as C,c5 as K,e as L,u as S,h as b,ca as v,bj as F,aj as U,cb as m,J as V}from"./index-Eksrs3uK.js";import{s as x}from"./splitAt-pbTnq2Oi.js";var I=j(function(r,s){return Array.prototype.slice.call(s,0).sort(r)});const R=(e,r,s)=>{let t=0;return e.toLowerCase()<r.toLowerCase()?t=-1:e.toLowerCase()>r.toLowerCase()&&(t=1),s==="asc"?t:-t},T=(e,r,s)=>{const t=h(e).diff(h(r)).valueOf();return s==="asc"?t:-t},E=(e,r,s)=>{let t=0;return e<r?t=-1:e>r&&(t=1),s==="asc"?t:-t},M=(e,r,s)=>{let t=0;return e.length>r.length?t=1:e.length<r.length&&(t=-1),s==="asc"?t:-t},Q=(e,r,s,t,a,o)=>{var n;return o&&["asc","desc"].includes(s[`${o}-order`])&&s[`${o}-order`]?{order:s[`${o}-order`],orderBy:s[`${o}-orderBy`]}:["asc","desc"].includes(s.order)&&s.orderBy?{order:s.order,orderBy:s.orderBy}:((n=r==null?void 0:r.sortKeys)==null?void 0:n[e])??{order:a,orderBy:t}},q=(e,r)=>I((s,t)=>{let a;e.includes("[")&&(a=x(e.indexOf("["),e).map(c=>c.includes("[")?+c.replace(/[\[\]']+/g,""):c)),e.includes(":")&&(a=e.split(":"));const o=m("",a||[e],s),n=m("",a||[e],t);return Array.isArray(o)&&Array.isArray(n)?M(o,n,r):B(o)&&B(n)?T(o,n,r):typeof o=="string"&&typeof n=="string"?R(o,n,r):E(o,n,r)}),w=e=>{const{data:r}=C(),{mutateAsync:s}=K(),t=L(),a=S(),o=b(t.search),n=Q(e.preferenceKey??"",r??{},o,e.orderBy,e.order),[c,P]=d.useState(n.orderBy??"label"),[f,A]=d.useState(n.order??"desc"),D=v(e.data),l=d.useRef(e.data);F(e.data,D)||(l.current=e.data);const g=q(c,f)(l.current);l.current=g;const O=d.useRef(U(1500,!1,(u,i)=>{e.preferenceKey&&s({sortKeys:{...(r==null?void 0:r.sortKeys)??{},[e.preferenceKey]:{order:i,orderBy:u}}})})).current,$={...e,data:g,handleOrderChange:(u,i)=>{P(u),A(i),a.replace({search:`?order=${i}&orderBy=${u}`}),O(u,i)},order:f,orderBy:c};return y.jsx(y.Fragment,{children:e.children($)})},z=d.memo(w),Z=e=>y.jsx(z,{...e}),B=e=>V.fromISO(e).isValid;export{Z as O,Q as g};
